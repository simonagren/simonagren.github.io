{"version":3,"file":"390-3c034b95b84916bcb0f9.js","mappings":"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","sources":["webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/formatSort.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/for-in/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/isobject/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/orderBy.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/findIndex.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/compact.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/intersection.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/SearchParameters/RefinementList.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/omit.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/requestBuilder.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch/dist/algoliasearch-lite.umd.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/utils/isValidUserToken.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/for-own/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/objectHasKeys.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/valToNumber.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/get-value/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/merge.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/set-value/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/arr-flatten/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/union-value/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/algoliasearch.helper.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/@algolia/events/events.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/kind-of/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/find.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/context.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/utils.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/createWidgetsManager.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/highlight.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/indexUtils.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/version.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/createInstantSearchManager.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/createStore.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/metadata.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/widgets/InstantSearch.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/createConnector.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/connectors/connectConfigure.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/widgets/Configure.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/connectors/connectSearchBox.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../packages/flow-ui/flow-ui-components/src/useDebounce/useDebounce.jsx","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../packages/flow-ui/flow-ui-widgets/src/Search/Search.Box.jsx","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/connectors/connectHighlight.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/core/utils.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/components/Highlighter.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/components/Highlight.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/widgets/Highlight.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/components/Snippet.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/widgets/Snippet.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/connectors/connectStateResults.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/connectors/connectPoweredBy.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-core/dist/es/core/translatable.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/components/PoweredBy.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/react-instantsearch-dom/dist/es/widgets/PoweredBy.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../packages/flow-ui/flow-ui-components/src/useScrollDisabler/useScrollDisabler.jsx","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../packages/flow-ui/flow-ui-widgets/src/Search/Search.Results.jsx","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../packages/flow-ui/flow-ui-widgets/src/Search/Search.jsx","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/is-plain-object/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/DerivedHelper/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/inherits.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/defaultsPure.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/SearchParameters/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/group-array/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/split-string/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/version.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/functions/escapeFacetValue.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/SearchResults/index.js","webpack://@elegantstack/gatsby-starter-flexiblog-personal/../node_modules/algoliasearch-helper/src/SearchResults/generate-hierarchical-tree.js"],"sourcesContent":["'use strict';\n\nvar find = require('./find');\n\n/**\n * Transform sort format from user friendly notation to lodash format\n * @param {string[]} sortBy array of predicate of the form \"attribute:order\"\n * @param {string[]} [defaults] array of predicate of the form \"attribute:order\"\n * @return {array.<string[]>} array containing 2 elements : attributes, orders\n */\nmodule.exports = function formatSort(sortBy, defaults) {\n  var defaultInstructions = (defaults || []).map(function (sort) {\n    return sort.split(':');\n  });\n\n  return sortBy.reduce(\n    function preparePredicate(out, sort) {\n      var sortInstruction = sort.split(':');\n\n      var matchingDefault = find(\n        defaultInstructions,\n        function (defaultInstruction) {\n          return defaultInstruction[0] === sortInstruction[0];\n        }\n      );\n\n      if (sortInstruction.length > 1 || !matchingDefault) {\n        out[0].push(sortInstruction[0]);\n        out[1].push(sortInstruction[1]);\n        return out;\n      }\n\n      out[0].push(matchingDefault[0]);\n      out[1].push(matchingDefault[1]);\n      return out;\n    },\n    [[], []]\n  );\n};\n","/*!\n * for-in <https://github.com/jonschlinkert/for-in>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function forIn(obj, fn, thisArg) {\n  for (var key in obj) {\n    if (fn.call(thisArg, obj[key], key, obj) === false) {\n      break;\n    }\n  }\n};\n","/*!\n * isobject <https://github.com/jonschlinkert/isobject>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function isObject(val) {\n  return val != null && typeof val === 'object' && Array.isArray(val) === false;\n};\n","'use strict';\n\nvar AlgoliaSearchHelper = require('./src/algoliasearch.helper');\nvar SearchParameters = require('./src/SearchParameters');\nvar SearchResults = require('./src/SearchResults');\n\n/**\n * The algoliasearchHelper module is the function that will let its\n * contains everything needed to use the Algoliasearch\n * Helper. It is a also a function that instanciate the helper.\n * To use the helper, you also need the Algolia JS client v3.\n * @example\n * //using the UMD build\n * var client = algoliasearch('latency', '6be0576ff61c053d5f9a3225e2a90f76');\n * var helper = algoliasearchHelper(client, 'bestbuy', {\n *   facets: ['shipping'],\n *   disjunctiveFacets: ['category']\n * });\n * helper.on('result', function(event) {\n *   console.log(event.results);\n * });\n * helper\n *   .toggleFacetRefinement('category', 'Movies & TV Shows')\n *   .toggleFacetRefinement('shipping', 'Free shipping')\n *   .search();\n * @example\n * // The helper is an event emitter using the node API\n * helper.on('result', updateTheResults);\n * helper.once('result', updateTheResults);\n * helper.removeListener('result', updateTheResults);\n * helper.removeAllListeners('result');\n * @module algoliasearchHelper\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the name of the index to query\n * @param  {SearchParameters|object} opts an object defining the initial config of the search. It doesn't have to be a {SearchParameters}, just an object containing the properties you need from it.\n * @return {AlgoliaSearchHelper} The helper instance\n */\nfunction algoliasearchHelper(client, index, opts) {\n  return new AlgoliaSearchHelper(client, index, opts);\n}\n\n/**\n * The version currently used\n * @member module:algoliasearchHelper.version\n * @type {number}\n */\nalgoliasearchHelper.version = require('./src/version');\n\n/**\n * Constructor for the Helper.\n * @member module:algoliasearchHelper.AlgoliaSearchHelper\n * @type {AlgoliaSearchHelper}\n */\nalgoliasearchHelper.AlgoliaSearchHelper = AlgoliaSearchHelper;\n\n/**\n * Constructor for the object containing all the parameters of the search.\n * @member module:algoliasearchHelper.SearchParameters\n * @type {SearchParameters}\n */\nalgoliasearchHelper.SearchParameters = SearchParameters;\n\n/**\n * Constructor for the object containing the results of the search.\n * @member module:algoliasearchHelper.SearchResults\n * @type {SearchResults}\n */\nalgoliasearchHelper.SearchResults = SearchResults;\n\nmodule.exports = algoliasearchHelper;\n","'use strict';\n\nfunction compareAscending(value, other) {\n  if (value !== other) {\n    var valIsDefined = value !== undefined;\n    var valIsNull = value === null;\n\n    var othIsDefined = other !== undefined;\n    var othIsNull = other === null;\n\n    if (\n      (!othIsNull && value > other) ||\n      (valIsNull && othIsDefined) ||\n      !valIsDefined\n    ) {\n      return 1;\n    }\n    if (\n      (!valIsNull && value < other) ||\n      (othIsNull && valIsDefined) ||\n      !othIsDefined\n    ) {\n      return -1;\n    }\n  }\n  return 0;\n}\n\n/**\n * @param {Array<object>} collection object with keys in attributes\n * @param {Array<string>} iteratees attributes\n * @param {Array<string>} orders asc | desc\n * @return {Array<object>} sorted collection\n */\nfunction orderBy(collection, iteratees, orders) {\n  if (!Array.isArray(collection)) {\n    return [];\n  }\n\n  if (!Array.isArray(orders)) {\n    orders = [];\n  }\n\n  var result = collection.map(function (value, index) {\n    return {\n      criteria: iteratees.map(function (iteratee) {\n        return value[iteratee];\n      }),\n      index: index,\n      value: value,\n    };\n  });\n\n  result.sort(function comparer(object, other) {\n    var index = -1;\n\n    while (++index < object.criteria.length) {\n      var res = compareAscending(object.criteria[index], other.criteria[index]);\n      if (res) {\n        if (index >= orders.length) {\n          return res;\n        }\n        if (orders[index] === 'desc') {\n          return -res;\n        }\n        return res;\n      }\n    }\n\n    // This ensures a stable sort in V8 and other engines.\n    // See https://bugs.chromium.org/p/v8/issues/detail?id=90 for more details.\n    return object.index - other.index;\n  });\n\n  return result.map(function (res) {\n    return res.value;\n  });\n}\n\nmodule.exports = orderBy;\n","'use strict';\n\n// @MAJOR can be replaced by native Array#findIndex when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return -1;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return i;\n    }\n  }\n  return -1;\n};\n","'use strict';\n\nmodule.exports = function compact(array) {\n  if (!Array.isArray(array)) {\n    return [];\n  }\n\n  return array.filter(Boolean);\n};\n","'use strict';\n\nfunction intersection(arr1, arr2) {\n  return arr1.filter(function (value, index) {\n    return (\n      arr2.indexOf(value) > -1 &&\n      arr1.indexOf(value) === index /* skips duplicates */\n    );\n  });\n}\n\nmodule.exports = intersection;\n","'use strict';\n\n/**\n * Functions to manipulate refinement lists\n *\n * The RefinementList is not formally defined through a prototype but is based\n * on a specific structure.\n *\n * @module SearchParameters.refinementList\n *\n * @typedef {string[]} SearchParameters.refinementList.Refinements\n * @typedef {Object.<string, SearchParameters.refinementList.Refinements>} SearchParameters.refinementList.RefinementList\n */\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar objectHasKeys = require('../functions/objectHasKeys');\nvar omit = require('../functions/omit');\n\nvar lib = {\n  /**\n   * Adds a refinement to a RefinementList\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement, if the value is not a string it will be converted\n   * @return {RefinementList} a new and updated refinement list\n   */\n  addRefinement: function addRefinement(refinementList, attribute, value) {\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return refinementList;\n    }\n\n    var valueAsString = '' + value;\n\n    var facetRefinement = !refinementList[attribute]\n      ? [valueAsString]\n      : refinementList[attribute].concat(valueAsString);\n\n    var mod = {};\n\n    mod[attribute] = facetRefinement;\n\n    return defaultsPure({}, mod, refinementList);\n  },\n  /**\n   * Removes refinement(s) for an attribute:\n   *  - if the value is specified removes the refinement for the value on the attribute\n   *  - if no value is specified removes all the refinements for this attribute\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} [value] the value of the refinement\n   * @return {RefinementList} a new and updated refinement lst\n   */\n  removeRefinement: function removeRefinement(\n    refinementList,\n    attribute,\n    value\n  ) {\n    if (value === undefined) {\n      // we use the \"filter\" form of clearRefinement, since it leaves empty values as-is\n      // the form with a string will remove the attribute completely\n      return lib.clearRefinement(refinementList, function (v, f) {\n        return attribute === f;\n      });\n    }\n\n    var valueAsString = '' + value;\n\n    return lib.clearRefinement(refinementList, function (v, f) {\n      return attribute === f && valueAsString === v;\n    });\n  },\n  /**\n   * Toggles the refinement value for an attribute.\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} attribute the attribute to refine\n   * @param {string} value the value of the refinement\n   * @return {RefinementList} a new and updated list\n   */\n  toggleRefinement: function toggleRefinement(\n    refinementList,\n    attribute,\n    value\n  ) {\n    if (value === undefined)\n      throw new Error('toggleRefinement should be used with a value');\n\n    if (lib.isRefined(refinementList, attribute, value)) {\n      return lib.removeRefinement(refinementList, attribute, value);\n    }\n\n    return lib.addRefinement(refinementList, attribute, value);\n  },\n  /**\n   * Clear all or parts of a RefinementList. Depending on the arguments, three\n   * kinds of behavior can happen:\n   *  - if no attribute is provided: clears the whole list\n   *  - if an attribute is provided as a string: clears the list for the specific attribute\n   *  - if an attribute is provided as a function: discards the elements for which the function returns true\n   * @param {RefinementList} refinementList the initial list\n   * @param {string} [attribute] the attribute or function to discard\n   * @param {string} [refinementType] optional parameter to give more context to the attribute function\n   * @return {RefinementList} a new and updated refinement list\n   */\n  clearRefinement: function clearRefinement(\n    refinementList,\n    attribute,\n    refinementType\n  ) {\n    if (attribute === undefined) {\n      // return the same object if the list is already empty\n      // this is mainly for tests, as it doesn't have much impact on performance\n      if (!objectHasKeys(refinementList)) {\n        return refinementList;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(refinementList, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n\n      var newRefinementList = Object.keys(refinementList).reduce(function (\n        memo,\n        key\n      ) {\n        var values = refinementList[key] || [];\n        var facetList = values.filter(function (value) {\n          return !attribute(value, key, refinementType);\n        });\n\n        if (facetList.length !== values.length) {\n          hasChanged = true;\n        }\n\n        memo[key] = facetList;\n\n        return memo;\n      },\n      {});\n\n      if (hasChanged) return newRefinementList;\n      return refinementList;\n    }\n\n    // We return nothing if the attribute is not undefined, a string or a function,\n    // as it is not a valid value for a refinement\n    return undefined;\n  },\n  /**\n   * Test if the refinement value is used for the attribute. If no refinement value\n   * is provided, test if the refinementList contains any refinement for the\n   * given attribute.\n   * @param {RefinementList} refinementList the list of refinement\n   * @param {string} attribute name of the attribute\n   * @param {string} [refinementValue] value of the filter/refinement\n   * @return {boolean} true if the attribute is refined, false otherwise\n   */\n  isRefined: function isRefined(refinementList, attribute, refinementValue) {\n    var containsRefinements =\n      Boolean(refinementList[attribute]) &&\n      refinementList[attribute].length > 0;\n\n    if (refinementValue === undefined || !containsRefinements) {\n      return containsRefinements;\n    }\n\n    var refinementValueAsString = '' + refinementValue;\n\n    return refinementList[attribute].indexOf(refinementValueAsString) !== -1;\n  },\n};\n\nmodule.exports = lib;\n","'use strict';\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source === null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key;\n  var i;\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    // eslint-disable-next-line no-continue\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n  return target;\n}\n\nmodule.exports = _objectWithoutPropertiesLoose;\n","'use strict';\n\nvar merge = require('./functions/merge');\n\nfunction sortObject(obj) {\n  return Object.keys(obj)\n    .sort()\n    .reduce(function (acc, curr) {\n      acc[curr] = obj[curr];\n      return acc;\n    }, {});\n}\n\nvar requestBuilder = {\n  /**\n   * Get all the queries to send to the client, those queries can used directly\n   * with the Algolia client.\n   * @private\n   * @param  {string} index The name of the index\n   * @param  {SearchParameters} state The state from which to get the queries\n   * @return {object[]} The queries\n   */\n  _getQueries: function getQueries(index, state) {\n    var queries = [];\n\n    // One query for the hits\n    queries.push({\n      indexName: index,\n      params: requestBuilder._getHitsSearchParams(state),\n    });\n\n    // One for each disjunctive facets\n    state.getRefinedDisjunctiveFacets().forEach(function (refinedFacet) {\n      queries.push({\n        indexName: index,\n        params: requestBuilder._getDisjunctiveFacetSearchParams(\n          state,\n          refinedFacet\n        ),\n      });\n    });\n\n    // More to get the parent levels of the hierarchical facets when refined\n    state.getRefinedHierarchicalFacets().forEach(function (refinedFacet) {\n      var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n      var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n      var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n      // If we are deeper than level 0 (starting from `beer > IPA`)\n      // we want to get all parent values\n      if (\n        currentRefinement.length > 0 &&\n        currentRefinement[0].split(separator).length > 1\n      ) {\n        // We generate a map of the filters we will use for our facet values queries\n        var filtersMap = currentRefinement[0]\n          .split(separator)\n          .slice(0, -1)\n          .reduce(function createFiltersMap(map, segment, level) {\n            return map.concat({\n              attribute: hierarchicalFacet.attributes[level],\n              value:\n                level === 0\n                  ? segment\n                  : [map[map.length - 1].value, segment].join(separator),\n            });\n          }, []);\n\n        filtersMap.forEach(function (filter, level) {\n          var params = requestBuilder._getDisjunctiveFacetSearchParams(\n            state,\n            filter.attribute,\n            level === 0\n          );\n\n          // Keep facet filters unrelated to current hierarchical attributes\n          function hasHierarchicalFacetFilter(value) {\n            return hierarchicalFacet.attributes.some(function (attribute) {\n              return attribute === value.split(':')[0];\n            });\n          }\n\n          var filteredFacetFilters = (params.facetFilters || []).reduce(\n            function (acc, facetFilter) {\n              if (Array.isArray(facetFilter)) {\n                var filtered = facetFilter.filter(function (filterValue) {\n                  return !hasHierarchicalFacetFilter(filterValue);\n                });\n\n                if (filtered.length > 0) {\n                  acc.push(filtered);\n                }\n              }\n\n              if (\n                typeof facetFilter === 'string' &&\n                !hasHierarchicalFacetFilter(facetFilter)\n              ) {\n                acc.push(facetFilter);\n              }\n\n              return acc;\n            },\n            []\n          );\n\n          var parent = filtersMap[level - 1];\n          if (level > 0) {\n            params.facetFilters = filteredFacetFilters.concat(\n              parent.attribute + ':' + parent.value\n            );\n          } else {\n            params.facetFilters =\n              filteredFacetFilters.length > 0\n                ? filteredFacetFilters\n                : undefined;\n          }\n\n          queries.push({ indexName: index, params: params });\n        });\n      }\n    });\n\n    return queries;\n  },\n\n  /**\n   * Build search parameters used to fetch hits\n   * @private\n   * @param  {SearchParameters} state The state from which to get the queries\n   * @return {object.<string, any>} The search parameters for hits\n   */\n  _getHitsSearchParams: function (state) {\n    var facets = state.facets\n      .concat(state.disjunctiveFacets)\n      .concat(requestBuilder._getHitsHierarchicalFacetsAttributes(state))\n      .sort();\n\n    var facetFilters = requestBuilder._getFacetFilters(state);\n    var numericFilters = requestBuilder._getNumericFilters(state);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      facets: facets.indexOf('*') > -1 ? ['*'] : facets,\n      tagFilters: tagFilters,\n    };\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Build search parameters used to fetch a disjunctive facet\n   * @private\n   * @param  {SearchParameters} state The state from which to get the queries\n   * @param  {string} facet the associated facet name\n   * @param  {boolean} hierarchicalRootLevel ?? FIXME\n   * @return {object} The search parameters for a disjunctive facet\n   */\n  _getDisjunctiveFacetSearchParams: function (\n    state,\n    facet,\n    hierarchicalRootLevel\n  ) {\n    var facetFilters = requestBuilder._getFacetFilters(\n      state,\n      facet,\n      hierarchicalRootLevel\n    );\n    var numericFilters = requestBuilder._getNumericFilters(state, facet);\n    var tagFilters = requestBuilder._getTagFilters(state);\n    var additionalParams = {\n      hitsPerPage: 0,\n      page: 0,\n      analytics: false,\n      clickAnalytics: false,\n    };\n\n    if (tagFilters.length > 0) {\n      additionalParams.tagFilters = tagFilters;\n    }\n\n    var hierarchicalFacet = state.getHierarchicalFacetByName(facet);\n\n    if (hierarchicalFacet) {\n      additionalParams.facets =\n        requestBuilder._getDisjunctiveHierarchicalFacetAttribute(\n          state,\n          hierarchicalFacet,\n          hierarchicalRootLevel\n        );\n    } else {\n      additionalParams.facets = facet;\n    }\n\n    if (numericFilters.length > 0) {\n      additionalParams.numericFilters = numericFilters;\n    }\n\n    if (facetFilters.length > 0) {\n      additionalParams.facetFilters = facetFilters;\n    }\n\n    return sortObject(merge({}, state.getQueryParams(), additionalParams));\n  },\n\n  /**\n   * Return the numeric filters in an algolia request fashion\n   * @private\n   * @param {SearchParameters} state the state from which to get the filters\n   * @param {string} [facetName] the name of the attribute for which the filters should be excluded\n   * @return {string[]} the numeric filters in the algolia format\n   */\n  _getNumericFilters: function (state, facetName) {\n    if (state.numericFilters) {\n      return state.numericFilters;\n    }\n\n    var numericFilters = [];\n\n    Object.keys(state.numericRefinements).forEach(function (attribute) {\n      var operators = state.numericRefinements[attribute] || {};\n      Object.keys(operators).forEach(function (operator) {\n        var values = operators[operator] || [];\n        if (facetName !== attribute) {\n          values.forEach(function (value) {\n            if (Array.isArray(value)) {\n              var vs = value.map(function (v) {\n                return attribute + operator + v;\n              });\n              numericFilters.push(vs);\n            } else {\n              numericFilters.push(attribute + operator + value);\n            }\n          });\n        }\n      });\n    });\n\n    return numericFilters;\n  },\n\n  /**\n   * Return the tags filters depending on which format is used, either tagFilters or tagRefinements\n   * @private\n   * @param {SearchParameters} state the state from which to get the filters\n   * @return {string} Tag filters in a single string\n   */\n  _getTagFilters: function (state) {\n    if (state.tagFilters) {\n      return state.tagFilters;\n    }\n\n    return state.tagRefinements.join(',');\n  },\n\n  /**\n   * Build facetFilters parameter based on current refinements. The array returned\n   * contains strings representing the facet filters in the algolia format.\n   * @private\n   * @param  {SearchParameters} state The state from which to get the queries\n   * @param  {string} [facet] if set, the current disjunctive facet\n   * @param  {boolean} [hierarchicalRootLevel] ?? FIXME\n   * @return {array.<string>} The facet filters in the algolia format\n   */\n  _getFacetFilters: function (state, facet, hierarchicalRootLevel) {\n    var facetFilters = [];\n\n    var facetsRefinements = state.facetsRefinements || {};\n    Object.keys(facetsRefinements)\n      .sort()\n      .forEach(function (facetName) {\n        var facetValues = facetsRefinements[facetName] || [];\n        facetValues.sort().forEach(function (facetValue) {\n          facetFilters.push(facetName + ':' + facetValue);\n        });\n      });\n\n    var facetsExcludes = state.facetsExcludes || {};\n    Object.keys(facetsExcludes)\n      .sort()\n      .forEach(function (facetName) {\n        var facetValues = facetsExcludes[facetName] || [];\n        facetValues.sort().forEach(function (facetValue) {\n          facetFilters.push(facetName + ':-' + facetValue);\n        });\n      });\n\n    var disjunctiveFacetsRefinements = state.disjunctiveFacetsRefinements || {};\n    Object.keys(disjunctiveFacetsRefinements)\n      .sort()\n      .forEach(function (facetName) {\n        var facetValues = disjunctiveFacetsRefinements[facetName] || [];\n        if (facetName === facet || !facetValues || facetValues.length === 0) {\n          return;\n        }\n        var orFilters = [];\n\n        facetValues.sort().forEach(function (facetValue) {\n          orFilters.push(facetName + ':' + facetValue);\n        });\n\n        facetFilters.push(orFilters);\n      });\n\n    var hierarchicalFacetsRefinements =\n      state.hierarchicalFacetsRefinements || {};\n    Object.keys(hierarchicalFacetsRefinements)\n      .sort()\n      .forEach(function (facetName) {\n        var facetValues = hierarchicalFacetsRefinements[facetName] || [];\n        var facetValue = facetValues[0];\n\n        if (facetValue === undefined) {\n          return;\n        }\n\n        var hierarchicalFacet = state.getHierarchicalFacetByName(facetName);\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n        var attributeToRefine;\n        var attributesIndex;\n\n        // we ask for parent facet values only when the `facet` is the current hierarchical facet\n        if (facet === facetName) {\n          // if we are at the root level already, no need to ask for facet values, we get them from\n          // the hits query\n          if (\n            facetValue.indexOf(separator) === -1 ||\n            (!rootPath && hierarchicalRootLevel === true) ||\n            (rootPath &&\n              rootPath.split(separator).length ===\n                facetValue.split(separator).length)\n          ) {\n            return;\n          }\n\n          if (!rootPath) {\n            attributesIndex = facetValue.split(separator).length - 2;\n            facetValue = facetValue.slice(0, facetValue.lastIndexOf(separator));\n          } else {\n            attributesIndex = rootPath.split(separator).length - 1;\n            facetValue = rootPath;\n          }\n\n          attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n        } else {\n          attributesIndex = facetValue.split(separator).length - 1;\n\n          attributeToRefine = hierarchicalFacet.attributes[attributesIndex];\n        }\n\n        if (attributeToRefine) {\n          facetFilters.push([attributeToRefine + ':' + facetValue]);\n        }\n      });\n\n    return facetFilters;\n  },\n\n  _getHitsHierarchicalFacetsAttributes: function (state) {\n    var out = [];\n\n    return state.hierarchicalFacets.reduce(\n      // ask for as much levels as there's hierarchical refinements\n      function getHitsAttributesForHierarchicalFacet(\n        allAttributes,\n        hierarchicalFacet\n      ) {\n        var hierarchicalRefinement = state.getHierarchicalRefinement(\n          hierarchicalFacet.name\n        )[0];\n\n        // if no refinement, ask for root level\n        if (!hierarchicalRefinement) {\n          allAttributes.push(hierarchicalFacet.attributes[0]);\n          return allAttributes;\n        }\n\n        var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n        var level = hierarchicalRefinement.split(separator).length;\n        var newAttributes = hierarchicalFacet.attributes.slice(0, level + 1);\n\n        return allAttributes.concat(newAttributes);\n      },\n      out\n    );\n  },\n\n  _getDisjunctiveHierarchicalFacetAttribute: function (\n    state,\n    hierarchicalFacet,\n    rootLevel\n  ) {\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    if (rootLevel === true) {\n      var rootPath = state._getHierarchicalRootPath(hierarchicalFacet);\n      var attributeIndex = 0;\n\n      if (rootPath) {\n        attributeIndex = rootPath.split(separator).length;\n      }\n      return [hierarchicalFacet.attributes[attributeIndex]];\n    }\n\n    var hierarchicalRefinement =\n      state.getHierarchicalRefinement(hierarchicalFacet.name)[0] || '';\n    // if refinement is 'beers > IPA > Flying dog',\n    // then we want `facets: ['beers > IPA']` as disjunctive facet (parent level values)\n\n    var parentLevel = hierarchicalRefinement.split(separator).length - 1;\n    return hierarchicalFacet.attributes.slice(0, parentLevel + 1);\n  },\n\n  getSearchForFacetQuery: function (facetName, query, maxFacetHits, state) {\n    var stateForSearchForFacetValues = state.isDisjunctiveFacet(facetName)\n      ? state.clearRefinements(facetName)\n      : state;\n    var searchForFacetSearchParameters = {\n      facetQuery: query,\n      facetName: facetName,\n    };\n    if (typeof maxFacetHits === 'number') {\n      searchForFacetSearchParameters.maxFacetHits = maxFacetHits;\n    }\n    return sortObject(\n      merge(\n        {},\n        requestBuilder._getHitsSearchParams(stateForSearchForFacetValues),\n        searchForFacetSearchParameters\n      )\n    );\n  },\n};\n\nmodule.exports = requestBuilder;\n","/*! algoliasearch-lite.umd.js | 4.24.0 | © Algolia, inc. | https://github.com/algolia/algoliasearch-client-javascript */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):(e=e||self).algoliasearch=t()}(this,(function(){\"use strict\";function e(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function t(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function r(r){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?t(Object(o),!0).forEach((function(t){e(r,t,o[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(r,Object.getOwnPropertyDescriptors(o)):t(Object(o)).forEach((function(e){Object.defineProperty(r,e,Object.getOwnPropertyDescriptor(o,e))}))}return r}function n(e,t){if(null==e)return{};var r,n,o=function(e,t){if(null==e)return{};var r,n,o={},a=Object.keys(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(n=0;n<a.length;n++)r=a[n],t.indexOf(r)>=0||Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r])}return o}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e)))return;var r=[],n=!0,o=!1,a=void 0;try{for(var u,i=e[Symbol.iterator]();!(n=(u=i.next()).done)&&(r.push(u.value),!t||r.length!==t);n=!0);}catch(e){o=!0,a=e}finally{try{n||null==i.return||i.return()}finally{if(o)throw a}}return r}(e,t)||function(){throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}()}function a(e){return function(e){if(Array.isArray(e)){for(var t=0,r=new Array(e.length);t<e.length;t++)r[t]=e[t];return r}}(e)||function(e){if(Symbol.iterator in Object(e)||\"[object Arguments]\"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError(\"Invalid attempt to spread non-iterable instance\")}()}function u(e){var t,r=\"algoliasearch-client-js-\".concat(e.key),n=function(){return void 0===t&&(t=e.localStorage||window.localStorage),t},a=function(){return JSON.parse(n().getItem(r)||\"{}\")},u=function(e){n().setItem(r,JSON.stringify(e))},i=function(){var t=e.timeToLive?1e3*e.timeToLive:null,r=a(),n=Object.fromEntries(Object.entries(r).filter((function(e){return void 0!==o(e,2)[1].timestamp})));if(u(n),t){var i=Object.fromEntries(Object.entries(n).filter((function(e){var r=o(e,2)[1],n=(new Date).getTime();return!(r.timestamp+t<n)})));u(i)}};return{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return Promise.resolve().then((function(){i();var t=JSON.stringify(e);return a()[t]})).then((function(e){return Promise.all([e?e.value:t(),void 0!==e])})).then((function(e){var t=o(e,2),n=t[0],a=t[1];return Promise.all([n,a||r.miss(n)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve().then((function(){var o=a();return o[JSON.stringify(e)]={timestamp:(new Date).getTime(),value:t},n().setItem(r,JSON.stringify(o)),t}))},delete:function(e){return Promise.resolve().then((function(){var t=a();delete t[JSON.stringify(e)],n().setItem(r,JSON.stringify(t))}))},clear:function(){return Promise.resolve().then((function(){n().removeItem(r)}))}}}function i(e){var t=a(e.caches),r=t.shift();return void 0===r?{get:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},n=t();return n.then((function(e){return Promise.all([e,r.miss(e)])})).then((function(e){return o(e,1)[0]}))},set:function(e,t){return Promise.resolve(t)},delete:function(e){return Promise.resolve()},clear:function(){return Promise.resolve()}}:{get:function(e,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}};return r.get(e,n,o).catch((function(){return i({caches:t}).get(e,n,o)}))},set:function(e,n){return r.set(e,n).catch((function(){return i({caches:t}).set(e,n)}))},delete:function(e){return r.delete(e).catch((function(){return i({caches:t}).delete(e)}))},clear:function(){return r.clear().catch((function(){return i({caches:t}).clear()}))}}}function s(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{serializable:!0},t={};return{get:function(r,n){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{miss:function(){return Promise.resolve()}},a=JSON.stringify(r);if(a in t)return Promise.resolve(e.serializable?JSON.parse(t[a]):t[a]);var u=n(),i=o&&o.miss||function(){return Promise.resolve()};return u.then((function(e){return i(e)})).then((function(){return u}))},set:function(r,n){return t[JSON.stringify(r)]=e.serializable?JSON.stringify(n):n,Promise.resolve(n)},delete:function(e){return delete t[JSON.stringify(e)],Promise.resolve()},clear:function(){return t={},Promise.resolve()}}}function c(e){for(var t=e.length-1;t>0;t--){var r=Math.floor(Math.random()*(t+1)),n=e[t];e[t]=e[r],e[r]=n}return e}function l(e,t){return t?(Object.keys(t).forEach((function(r){e[r]=t[r](e)})),e):e}function f(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=0;return e.replace(/%s/g,(function(){return encodeURIComponent(r[o++])}))}var h={WithinQueryParameters:0,WithinHeaders:1};function m(e,t){var r=e||{},n=r.data||{};return Object.keys(r).forEach((function(e){-1===[\"timeout\",\"headers\",\"queryParameters\",\"data\",\"cacheable\"].indexOf(e)&&(n[e]=r[e])})),{data:Object.entries(n).length>0?n:void 0,timeout:r.timeout||t,headers:r.headers||{},queryParameters:r.queryParameters||{},cacheable:r.cacheable}}var d={Read:1,Write:2,Any:3},p=1,v=2,g=3;function y(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p;return r(r({},e),{},{status:t,lastUpdate:Date.now()})}function b(e){return\"string\"==typeof e?{protocol:\"https\",url:e,accept:d.Any}:{protocol:e.protocol||\"https\",url:e.url,accept:e.accept||d.Any}}var O=\"GET\",P=\"POST\";function q(e,t){return Promise.all(t.map((function(t){return e.get(t,(function(){return Promise.resolve(y(t))}))}))).then((function(e){var r=e.filter((function(e){return function(e){return e.status===p||Date.now()-e.lastUpdate>12e4}(e)})),n=e.filter((function(e){return function(e){return e.status===g&&Date.now()-e.lastUpdate<=12e4}(e)})),o=[].concat(a(r),a(n));return{getTimeout:function(e,t){return(0===n.length&&0===e?1:n.length+3+e)*t},statelessHosts:o.length>0?o.map((function(e){return b(e)})):t}}))}function j(e,t,n,o){var u=[],i=function(e,t){if(e.method===O||void 0===e.data&&void 0===t.data)return;var n=Array.isArray(e.data)?e.data:r(r({},e.data),t.data);return JSON.stringify(n)}(n,o),s=function(e,t){var n=r(r({},e.headers),t.headers),o={};return Object.keys(n).forEach((function(e){var t=n[e];o[e.toLowerCase()]=t})),o}(e,o),c=n.method,l=n.method!==O?{}:r(r({},n.data),o.data),f=r(r(r({\"x-algolia-agent\":e.userAgent.value},e.queryParameters),l),o.queryParameters),h=0,m=function t(r,a){var l=r.pop();if(void 0===l)throw{name:\"RetryError\",message:\"Unreachable hosts - your application id may be incorrect. If the error persists, please reach out to the Algolia Support team: https://alg.li/support .\",transporterStackTrace:A(u)};var m={data:i,headers:s,method:c,url:S(l,n.path,f),connectTimeout:a(h,e.timeouts.connect),responseTimeout:a(h,o.timeout)},d=function(e){var t={request:m,response:e,host:l,triesLeft:r.length};return u.push(t),t},p={onSuccess:function(e){return function(e){try{return JSON.parse(e.content)}catch(t){throw function(e,t){return{name:\"DeserializationError\",message:e,response:t}}(t.message,e)}}(e)},onRetry:function(n){var o=d(n);return n.isTimedOut&&h++,Promise.all([e.logger.info(\"Retryable failure\",x(o)),e.hostsCache.set(l,y(l,n.isTimedOut?g:v))]).then((function(){return t(r,a)}))},onFail:function(e){throw d(e),function(e,t){var r=e.content,n=e.status,o=r;try{o=JSON.parse(r).message}catch(e){}return function(e,t,r){return{name:\"ApiError\",message:e,status:t,transporterStackTrace:r}}(o,n,t)}(e,A(u))}};return e.requester.send(m).then((function(e){return function(e,t){return function(e){var t=e.status;return e.isTimedOut||function(e){var t=e.isTimedOut,r=e.status;return!t&&0==~~r}(e)||2!=~~(t/100)&&4!=~~(t/100)}(e)?t.onRetry(e):2==~~(e.status/100)?t.onSuccess(e):t.onFail(e)}(e,p)}))};return q(e.hostsCache,t).then((function(e){return m(a(e.statelessHosts).reverse(),e.getTimeout)}))}function w(e){var t={value:\"Algolia for JavaScript (\".concat(e,\")\"),add:function(e){var r=\"; \".concat(e.segment).concat(void 0!==e.version?\" (\".concat(e.version,\")\"):\"\");return-1===t.value.indexOf(r)&&(t.value=\"\".concat(t.value).concat(r)),t}};return t}function S(e,t,r){var n=T(r),o=\"\".concat(e.protocol,\"://\").concat(e.url,\"/\").concat(\"/\"===t.charAt(0)?t.substr(1):t);return n.length&&(o+=\"?\".concat(n)),o}function T(e){return Object.keys(e).map((function(t){return f(\"%s=%s\",t,(r=e[t],\"[object Object]\"===Object.prototype.toString.call(r)||\"[object Array]\"===Object.prototype.toString.call(r)?JSON.stringify(e[t]):e[t]));var r})).join(\"&\")}function A(e){return e.map((function(e){return x(e)}))}function x(e){var t=e.request.headers[\"x-algolia-api-key\"]?{\"x-algolia-api-key\":\"*****\"}:{};return r(r({},e),{},{request:r(r({},e.request),{},{headers:r(r({},e.request.headers),t)})})}var N=function(e){var t=e.appId,n=function(e,t,r){var n={\"x-algolia-api-key\":r,\"x-algolia-application-id\":t};return{headers:function(){return e===h.WithinHeaders?n:{}},queryParameters:function(){return e===h.WithinQueryParameters?n:{}}}}(void 0!==e.authMode?e.authMode:h.WithinHeaders,t,e.apiKey),a=function(e){var t=e.hostsCache,r=e.logger,n=e.requester,a=e.requestsCache,u=e.responsesCache,i=e.timeouts,s=e.userAgent,c=e.hosts,l=e.queryParameters,f={hostsCache:t,logger:r,requester:n,requestsCache:a,responsesCache:u,timeouts:i,userAgent:s,headers:e.headers,queryParameters:l,hosts:c.map((function(e){return b(e)})),read:function(e,t){var r=m(t,f.timeouts.read),n=function(){return j(f,f.hosts.filter((function(e){return 0!=(e.accept&d.Read)})),e,r)};if(!0!==(void 0!==r.cacheable?r.cacheable:e.cacheable))return n();var a={request:e,mappedRequestOptions:r,transporter:{queryParameters:f.queryParameters,headers:f.headers}};return f.responsesCache.get(a,(function(){return f.requestsCache.get(a,(function(){return f.requestsCache.set(a,n()).then((function(e){return Promise.all([f.requestsCache.delete(a),e])}),(function(e){return Promise.all([f.requestsCache.delete(a),Promise.reject(e)])})).then((function(e){var t=o(e,2);t[0];return t[1]}))}))}),{miss:function(e){return f.responsesCache.set(a,e)}})},write:function(e,t){return j(f,f.hosts.filter((function(e){return 0!=(e.accept&d.Write)})),e,m(t,f.timeouts.write))}};return f}(r(r({hosts:[{url:\"\".concat(t,\"-dsn.algolia.net\"),accept:d.Read},{url:\"\".concat(t,\".algolia.net\"),accept:d.Write}].concat(c([{url:\"\".concat(t,\"-1.algolianet.com\")},{url:\"\".concat(t,\"-2.algolianet.com\")},{url:\"\".concat(t,\"-3.algolianet.com\")}]))},e),{},{headers:r(r(r({},n.headers()),{\"content-type\":\"application/x-www-form-urlencoded\"}),e.headers),queryParameters:r(r({},n.queryParameters()),e.queryParameters)}));return l({transporter:a,appId:t,addAlgoliaAgent:function(e,t){a.userAgent.add({segment:e,version:t})},clearCache:function(){return Promise.all([a.requestsCache.clear(),a.responsesCache.clear()]).then((function(){}))}},e.methods)},C=function(e){return function(t,r){return t.method===O?e.transporter.read(t,r):e.transporter.write(t,r)}},E=function(e){return function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n={transporter:e.transporter,appId:e.appId,indexName:t};return l(n,r.methods)}},J=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{params:T(e.params||{})})}));return e.transporter.read({method:P,path:\"1/indexes/*/queries\",data:{requests:o},cacheable:!0},n)}},k=function(e){return function(t,o){return Promise.all(t.map((function(t){var a=t.params,u=a.facetName,i=a.facetQuery,s=n(a,[\"facetName\",\"facetQuery\"]);return E(e)(t.indexName,{methods:{searchForFacetValues:F}}).searchForFacetValues(u,i,r(r({},o),s))})))}},I=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/answers/%s/prediction\",e.indexName),data:{query:t,queryLanguages:r},cacheable:!0},n)}},R=function(e){return function(t,r){return e.transporter.read({method:P,path:f(\"1/indexes/%s/query\",e.indexName),data:{query:t},cacheable:!0},r)}},F=function(e){return function(t,r,n){return e.transporter.read({method:P,path:f(\"1/indexes/%s/facets/%s/query\",e.indexName,t),data:{facetQuery:r},cacheable:!0},n)}},D=1,W=2,H=3;var Q=function(e){return function(t,n){var o=t.map((function(e){return r(r({},e),{},{threshold:e.threshold||0})}));return e.transporter.read({method:P,path:\"1/indexes/*/recommendations\",data:{requests:o},cacheable:!0},n)}};function L(e,t,n){var o,a={appId:e,apiKey:t,timeouts:{connect:1,read:2,write:30},requester:{send:function(e){return new Promise((function(t){var r=new XMLHttpRequest;r.open(e.method,e.url,!0),Object.keys(e.headers).forEach((function(t){return r.setRequestHeader(t,e.headers[t])}));var n,o=function(e,n){return setTimeout((function(){r.abort(),t({status:0,content:n,isTimedOut:!0})}),1e3*e)},a=o(e.connectTimeout,\"Connection timeout\");r.onreadystatechange=function(){r.readyState>r.OPENED&&void 0===n&&(clearTimeout(a),n=o(e.responseTimeout,\"Socket timeout\"))},r.onerror=function(){0===r.status&&(clearTimeout(a),clearTimeout(n),t({content:r.responseText||\"Network request failed\",status:r.status,isTimedOut:!1}))},r.onload=function(){clearTimeout(a),clearTimeout(n),t({content:r.responseText,status:r.status,isTimedOut:!1})},r.send(e.data)}))}},logger:(o=H,{debug:function(e,t){return D>=o&&console.debug(e,t),Promise.resolve()},info:function(e,t){return W>=o&&console.info(e,t),Promise.resolve()},error:function(e,t){return console.error(e,t),Promise.resolve()}}),responsesCache:s(),requestsCache:s({serializable:!1}),hostsCache:i({caches:[u({key:\"\".concat(\"4.24.0\",\"-\").concat(e)}),s()]}),userAgent:w(\"4.24.0\").add({segment:\"Browser\",version:\"lite\"}),authMode:h.WithinQueryParameters};return N(r(r(r({},a),n),{},{methods:{search:J,searchForFacetValues:k,multipleQueries:J,multipleSearchForFacetValues:k,customRequest:C,initIndex:function(e){return function(t){return E(e)(t,{methods:{search:R,searchForFacetValues:F,findAnswers:I}})}},getRecommendations:Q}}))}return L.version=\"4.24.0\",L}));\n","'use strict';\n\nmodule.exports = function isValidUserToken(userToken) {\n  if (userToken === null) {\n    return false;\n  }\n  return /^[a-zA-Z0-9_-]{1,64}$/.test(userToken);\n};\n","/*!\n * for-own <https://github.com/jonschlinkert/for-own>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar forIn = require('for-in');\nvar hasOwn = Object.prototype.hasOwnProperty;\n\nmodule.exports = function forOwn(obj, fn, thisArg) {\n  forIn(obj, function(val, key) {\n    if (hasOwn.call(obj, key)) {\n      return fn.call(thisArg, obj[key], key, obj);\n    }\n  });\n};\n","'use strict';\n\nfunction objectHasKeys(obj) {\n  return obj && Object.keys(obj).length > 0;\n}\n\nmodule.exports = objectHasKeys;\n","'use strict';\n\nfunction valToNumber(v) {\n  if (typeof v === 'number') {\n    return v;\n  } else if (typeof v === 'string') {\n    return parseFloat(v);\n  } else if (Array.isArray(v)) {\n    return v.map(valToNumber);\n  }\n\n  throw new Error(\n    'The value should be a number, a parsable string or an array of those.'\n  );\n}\n\nmodule.exports = valToNumber;\n","/*!\n * get-value <https://github.com/jonschlinkert/get-value>\n *\n * Copyright (c) 2014-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\nconst isObject = require('isobject');\n\nmodule.exports = function(target, path, options) {\n  if (!isObject(options)) {\n    options = { default: options };\n  }\n\n  if (!isValidObject(target)) {\n    return typeof options.default !== 'undefined' ? options.default : target;\n  }\n\n  if (typeof path === 'number') {\n    path = String(path);\n  }\n\n  const isArray = Array.isArray(path);\n  const isString = typeof path === 'string';\n  const splitChar = options.separator || '.';\n  const joinChar = options.joinChar || (typeof splitChar === 'string' ? splitChar : '.');\n\n  if (!isString && !isArray) {\n    return target;\n  }\n\n  if (isString && path in target) {\n    return isValid(path, target, options) ? target[path] : options.default;\n  }\n\n  let segs = isArray ? path : split(path, splitChar, options);\n  let len = segs.length;\n  let idx = 0;\n\n  do {\n    let prop = segs[idx];\n    if (typeof prop === 'number') {\n      prop = String(prop);\n    }\n\n    while (prop && prop.slice(-1) === '\\\\') {\n      prop = join([prop.slice(0, -1), segs[++idx] || ''], joinChar, options);\n    }\n\n    if (prop in target) {\n      if (!isValid(prop, target, options)) {\n        return options.default;\n      }\n\n      target = target[prop];\n    } else {\n      let hasProp = false;\n      let n = idx + 1;\n\n      while (n < len) {\n        prop = join([prop, segs[n++]], joinChar, options);\n\n        if ((hasProp = prop in target)) {\n          if (!isValid(prop, target, options)) {\n            return options.default;\n          }\n\n          target = target[prop];\n          idx = n - 1;\n          break;\n        }\n      }\n\n      if (!hasProp) {\n        return options.default;\n      }\n    }\n  } while (++idx < len && isValidObject(target));\n\n  if (idx === len) {\n    return target;\n  }\n\n  return options.default;\n};\n\nfunction join(segs, joinChar, options) {\n  if (typeof options.join === 'function') {\n    return options.join(segs);\n  }\n  return segs[0] + joinChar + segs[1];\n}\n\nfunction split(path, splitChar, options) {\n  if (typeof options.split === 'function') {\n    return options.split(path);\n  }\n  return path.split(splitChar);\n}\n\nfunction isValid(key, target, options) {\n  if (typeof options.isValid === 'function') {\n    return options.isValid(key, target);\n  }\n  return true;\n}\n\nfunction isValidObject(val) {\n  return isObject(val) || Array.isArray(val) || typeof val === 'function';\n}\n","'use strict';\n\nfunction clone(value) {\n  if (typeof value === 'object' && value !== null) {\n    return _merge(Array.isArray(value) ? [] : {}, value);\n  }\n  return value;\n}\n\nfunction isObjectOrArrayOrFunction(value) {\n  return (\n    typeof value === 'function' ||\n    Array.isArray(value) ||\n    Object.prototype.toString.call(value) === '[object Object]'\n  );\n}\n\nfunction _merge(target, source) {\n  if (target === source) {\n    return target;\n  }\n\n  // eslint-disable-next-line no-restricted-syntax\n  for (var key in source) {\n    if (\n      !Object.prototype.hasOwnProperty.call(source, key) ||\n      key === '__proto__' ||\n      key === 'constructor'\n    ) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    var sourceVal = source[key];\n    var targetVal = target[key];\n\n    if (typeof targetVal !== 'undefined' && typeof sourceVal === 'undefined') {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n\n    if (\n      isObjectOrArrayOrFunction(targetVal) &&\n      isObjectOrArrayOrFunction(sourceVal)\n    ) {\n      target[key] = _merge(targetVal, sourceVal);\n    } else {\n      target[key] = clone(sourceVal);\n    }\n  }\n  return target;\n}\n\n/**\n * This method is like Object.assign, but recursively merges own and inherited\n * enumerable keyed properties of source objects into the destination object.\n *\n * NOTE: this behaves like lodash/merge, but:\n * - does mutate functions if they are a source\n * - treats non-plain objects as plain\n * - does not work for circular objects\n * - treats sparse arrays as sparse\n * - does not convert Array-like objects (Arguments, NodeLists, etc.) to arrays\n *\n * @param {Object} target The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n */\nfunction merge(target) {\n  if (!isObjectOrArrayOrFunction(target)) {\n    target = {};\n  }\n\n  for (var i = 1, l = arguments.length; i < l; i++) {\n    var source = arguments[i];\n\n    if (isObjectOrArrayOrFunction(source)) {\n      _merge(target, source);\n    }\n  }\n  return target;\n}\n\nmodule.exports = merge;\n","/*!\n * set-value <https://github.com/jonschlinkert/set-value>\n *\n * Copyright (c) 2014-2018, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nconst isPlain = require('is-plain-object');\n\nfunction set(target, path, value, options) {\n  if (!isObject(target)) {\n    return target;\n  }\n\n  let opts = options || {};\n  const isArray = Array.isArray(path);\n  if (!isArray && typeof path !== 'string') {\n    return target;\n  }\n\n  let merge = opts.merge;\n  if (merge && typeof merge !== 'function') {\n    merge = Object.assign;\n  }\n\n  const keys = (isArray ? path : split(path, opts)).filter(isValidKey);\n  const len = keys.length;\n  const orig = target;\n\n  if (!options && keys.length === 1) {\n    result(target, keys[0], value, merge);\n    return target;\n  }\n\n  for (let i = 0; i < len; i++) {\n    let prop = keys[i];\n\n    if (!isObject(target[prop])) {\n      target[prop] = {};\n    }\n\n    if (i === len - 1) {\n      result(target, prop, value, merge);\n      break;\n    }\n\n    target = target[prop];\n  }\n\n  return orig;\n}\n\nfunction result(target, path, value, merge) {\n  if (merge && isPlain(target[path]) && isPlain(value)) {\n    target[path] = merge({}, target[path], value);\n  } else {\n    target[path] = value;\n  }\n}\n\nfunction split(path, options) {\n  const id = createKey(path, options);\n  if (set.memo[id]) return set.memo[id];\n\n  const char = (options && options.separator) ? options.separator : '.';\n  let keys = [];\n  let res = [];\n\n  if (options && typeof options.split === 'function') {\n    keys = options.split(path);\n  } else {\n    keys = path.split(char);\n  }\n\n  for (let i = 0; i < keys.length; i++) {\n    let prop = keys[i];\n    while (prop && prop.slice(-1) === '\\\\' && keys[i + 1] != null) {\n      prop = prop.slice(0, -1) + char + keys[++i];\n    }\n    res.push(prop);\n  }\n  set.memo[id] = res;\n  return res;\n}\n\nfunction createKey(pattern, options) {\n  let id = pattern;\n  if (typeof options === 'undefined') {\n    return id + '';\n  }\n  const keys = Object.keys(options);\n  for (let i = 0; i < keys.length; i++) {\n    const key = keys[i];\n    id += ';' + key + '=' + String(options[key]);\n  }\n  return id;\n}\n\nfunction isValidKey(key) {\n  if (typeof key !== 'string' && typeof key !== 'number') {\n    key = String(key);\n  }\n\n  return key !== '__proto__' && key !== 'constructor' && key !== 'prototype';\n}\n\nfunction isObject(val) {\n  return val !== null && (typeof val === 'object' || typeof val === 'function');\n}\n\nset.memo = {};\nmodule.exports = set;\n","/*!\n * arr-flatten <https://github.com/jonschlinkert/arr-flatten>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nmodule.exports = function (arr) {\n  return flat(arr, []);\n};\n\nfunction flat(arr, res) {\n  var i = 0, cur;\n  var len = arr.length;\n  for (; i < len; i++) {\n    cur = arr[i];\n    Array.isArray(cur) ? flat(cur, res) : res.push(cur);\n  }\n  return res;\n}\n","'use strict';\n\nconst get = require('get-value');\nconst set = require('set-value');\n\nconst isObject = val => {\n  return val != null && typeof val === 'object' && !Array.isArray(val);\n};\n\nconst flatten = (...args) => {\n  let res = [];\n  let flat = arr => {\n    for (let ele of arr) Array.isArray(ele) ? flat(ele, res) : res.push(ele);\n  };\n  flat(args);\n  return res;\n};\n\nconst unique = arr => arr.filter((v, i) => arr.indexOf(v) === i);\nconst union = (...args) => unique(flatten(...args));\nconst first = (...args) => args.find(v => v != null);\n\nmodule.exports = (obj, prop, value) => {\n  if (!isObject(obj)) {\n    throw new TypeError('expected the first argument to be an object');\n  }\n\n  if (typeof prop !== 'string') {\n    throw new TypeError('expected the second argument to be a string');\n  }\n\n  let arr = [].concat(first(get(obj, prop), []));\n  set(obj, prop, union(arr, [].concat(first(value, []))));\n  return obj;\n};\n","'use strict';\n\nvar EventEmitter = require('@algolia/events');\n\nvar DerivedHelper = require('./DerivedHelper');\nvar escapeFacetValue = require('./functions/escapeFacetValue').escapeFacetValue;\nvar inherits = require('./functions/inherits');\nvar merge = require('./functions/merge');\nvar objectHasKeys = require('./functions/objectHasKeys');\nvar omit = require('./functions/omit');\nvar requestBuilder = require('./requestBuilder');\nvar SearchParameters = require('./SearchParameters');\nvar SearchResults = require('./SearchResults');\nvar version = require('./version');\n\n/**\n * Event triggered when a parameter is set or updated\n * @event AlgoliaSearchHelper#event:change\n * @property {object} event\n * @property {SearchParameters} event.state the current parameters with the latest changes applied\n * @property {SearchResults} event.results the previous results received from Algolia. `null` before the first request\n * @example\n * helper.on('change', function(event) {\n *   console.log('The parameters have changed');\n * });\n */\n\n/**\n * Event triggered when a main search is sent to Algolia\n * @event AlgoliaSearchHelper#event:search\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search\n * @property {SearchResults} event.results the results from the previous search. `null` if it is the first search.\n * @example\n * helper.on('search', function(event) {\n *   console.log('Search sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchForFacetValues` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchForFacetValues\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @property {string} event.facet the facet searched into\n * @property {string} event.query the query used to search in the facets\n * @example\n * helper.on('searchForFacetValues', function(event) {\n *   console.log('searchForFacetValues sent');\n * });\n */\n\n/**\n * Event triggered when a search using `searchOnce` is sent to Algolia\n * @event AlgoliaSearchHelper#event:searchOnce\n * @property {object} event\n * @property {SearchParameters} event.state the parameters used for this search it is the first search.\n * @example\n * helper.on('searchOnce', function(event) {\n *   console.log('searchOnce sent');\n * });\n */\n\n/**\n * Event triggered when the results are retrieved from Algolia\n * @event AlgoliaSearchHelper#event:result\n * @property {object} event\n * @property {SearchResults} event.results the results received from Algolia\n * @property {SearchParameters} event.state the parameters used to query Algolia. Those might be different from the one in the helper instance (for example if the network is unreliable).\n * @example\n * helper.on('result', function(event) {\n *   console.log('Search results received');\n * });\n */\n\n/**\n * Event triggered when Algolia sends back an error. For example, if an unknown parameter is\n * used, the error can be caught using this event.\n * @event AlgoliaSearchHelper#event:error\n * @property {object} event\n * @property {Error} event.error the error returned by the Algolia.\n * @example\n * helper.on('error', function(event) {\n *   console.log('Houston we got a problem.');\n * });\n */\n\n/**\n * Event triggered when the queue of queries have been depleted (with any result or outdated queries)\n * @event AlgoliaSearchHelper#event:searchQueueEmpty\n * @example\n * helper.on('searchQueueEmpty', function() {\n *   console.log('No more search pending');\n *   // This is received before the result event if we're not expecting new results\n * });\n *\n * helper.search();\n */\n\n/**\n * Initialize a new AlgoliaSearchHelper\n * @class\n * @classdesc The AlgoliaSearchHelper is a class that ease the management of the\n * search. It provides an event based interface for search callbacks:\n *  - change: when the internal search state is changed.\n *    This event contains a {@link SearchParameters} object and the\n *    {@link SearchResults} of the last result if any.\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n *  - error: when the response is an error. This event contains the error returned by the server.\n * @param  {AlgoliaSearch} client an AlgoliaSearch client\n * @param  {string} index the index name to query\n * @param  {SearchParameters | object} options an object defining the initial\n * config of the search. It doesn't have to be a {SearchParameters},\n * just an object containing the properties you need from it.\n */\nfunction AlgoliaSearchHelper(client, index, options) {\n  if (typeof client.addAlgoliaAgent === 'function') {\n    client.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n\n  this.setClient(client);\n  var opts = options || {};\n  opts.index = index;\n  this.state = SearchParameters.make(opts);\n  this.lastResults = null;\n  this._queryId = 0;\n  this._lastQueryIdReceived = -1;\n  this.derivedHelpers = [];\n  this._currentNbQueries = 0;\n}\n\ninherits(AlgoliaSearchHelper, EventEmitter);\n\n/**\n * Start the search with the parameters set in the state. When the\n * method is called, it triggers a `search` event. The results will\n * be available through the `result` event. If an error occurs, an\n * `error` will be fired instead.\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires search\n * @fires result\n * @fires error\n * @chainable\n */\nAlgoliaSearchHelper.prototype.search = function () {\n  this._search({ onlyWithDerivedHelpers: false });\n  return this;\n};\n\nAlgoliaSearchHelper.prototype.searchOnlyWithDerivedHelpers = function () {\n  this._search({ onlyWithDerivedHelpers: true });\n  return this;\n};\n\n/**\n * Gets the search query parameters that would be sent to the Algolia Client\n * for the hits\n * @return {object} Query Parameters\n */\nAlgoliaSearchHelper.prototype.getQuery = function () {\n  var state = this.state;\n  return requestBuilder._getHitsSearchParams(state);\n};\n\n/**\n * Start a search using a modified version of the current state. This method does\n * not trigger the helper lifecycle and does not modify the state kept internally\n * by the helper. This second aspect means that the next search call will be the\n * same as a search call before calling searchOnce.\n * @param {object} options can contain all the parameters that can be set to SearchParameters\n * plus the index\n * @param {function} [cb] optional callback executed when the response from the\n * server is back.\n * @return {promise|undefined} if a callback is passed the method returns undefined\n * otherwise it returns a promise containing an object with two keys :\n *  - content with a SearchResults\n *  - state with the state used for the query as a SearchParameters\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the callback API\n * var state = helper.searchOnce({hitsPerPage: 1},\n *   function(error, content, state) {\n *     // if an error occurred it will be passed in error, otherwise its value is null\n *     // content contains the results formatted as a SearchResults\n *     // state is the instance of SearchParameters used for this search\n *   });\n * @example\n * // Changing the number of records returned per page to 1\n * // This example uses the promise API\n * var state1 = helper.searchOnce({hitsPerPage: 1})\n *                 .then(promiseHandler);\n *\n * function promiseHandler(res) {\n *   // res contains\n *   // {\n *   //   content : SearchResults\n *   //   state   : SearchParameters (the one used for this specific search)\n *   // }\n * }\n */\nAlgoliaSearchHelper.prototype.searchOnce = function (options, cb) {\n  var tempState = !options\n    ? this.state\n    : this.state.setQueryParameters(options);\n  var queries = requestBuilder._getQueries(tempState.index, tempState);\n  // eslint-disable-next-line consistent-this\n  var self = this;\n\n  this._currentNbQueries++;\n\n  this.emit('searchOnce', {\n    state: tempState,\n  });\n\n  if (cb) {\n    this.client\n      .search(queries)\n      .then(function (content) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(null, new SearchResults(tempState, content.results), tempState);\n      })\n      .catch(function (err) {\n        self._currentNbQueries--;\n        if (self._currentNbQueries === 0) {\n          self.emit('searchQueueEmpty');\n        }\n\n        cb(err, null, tempState);\n      });\n\n    return undefined;\n  }\n\n  return this.client.search(queries).then(\n    function (content) {\n      self._currentNbQueries--;\n      if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n      return {\n        content: new SearchResults(tempState, content.results),\n        state: tempState,\n        _originalResponse: content,\n      };\n    },\n    function (e) {\n      self._currentNbQueries--;\n      if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n      throw e;\n    }\n  );\n};\n\n/**\n * Start the search for answers with the parameters set in the state.\n * This method returns a promise.\n * @param {Object} options - the options for answers API call\n * @param {string[]} options.attributesForPrediction - Attributes to use for predictions. If empty, `searchableAttributes` is used instead.\n * @param {string[]} options.queryLanguages - The languages in the query. Currently only supports ['en'].\n * @param {number} options.nbHits - Maximum number of answers to retrieve from the Answers Engine. Cannot be greater than 1000.\n *\n * @return {promise} the answer results\n * @deprecated answers is deprecated and will be replaced with new initiatives\n */\nAlgoliaSearchHelper.prototype.findAnswers = function (options) {\n  // eslint-disable-next-line no-console\n  console.warn('[algoliasearch-helper] answers is no longer supported');\n  var state = this.state;\n  var derivedHelper = this.derivedHelpers[0];\n  if (!derivedHelper) {\n    return Promise.resolve([]);\n  }\n  var derivedState = derivedHelper.getModifiedState(state);\n  var data = merge(\n    {\n      attributesForPrediction: options.attributesForPrediction,\n      nbHits: options.nbHits,\n    },\n    {\n      params: omit(requestBuilder._getHitsSearchParams(derivedState), [\n        'attributesToSnippet',\n        'hitsPerPage',\n        'restrictSearchableAttributes',\n        'snippetEllipsisText',\n      ]),\n    }\n  );\n\n  var errorMessage =\n    'search for answers was called, but this client does not have a function client.initIndex(index).findAnswers';\n  if (typeof this.client.initIndex !== 'function') {\n    throw new Error(errorMessage);\n  }\n  var index = this.client.initIndex(derivedState.index);\n  if (typeof index.findAnswers !== 'function') {\n    throw new Error(errorMessage);\n  }\n  return index.findAnswers(derivedState.query, options.queryLanguages, data);\n};\n\n/**\n * Structure of each result when using\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * @typedef FacetSearchHit\n * @type {object}\n * @property {string} value the facet value\n * @property {string} highlighted the facet value highlighted with the query string\n * @property {number} count number of occurrence of this facet value\n * @property {boolean} isRefined true if the value is already refined\n */\n\n/**\n * Structure of the data resolved by the\n * [`searchForFacetValues()`](reference.html#AlgoliaSearchHelper#searchForFacetValues)\n * promise.\n * @typedef FacetSearchResult\n * @type {object}\n * @property {FacetSearchHit} facetHits the results for this search for facet values\n * @property {number} processingTimeMS time taken by the query inside the engine\n */\n\n/**\n * Search for facet values based on an query and the name of a faceted attribute. This\n * triggers a search and will return a promise. On top of using the query, it also sends\n * the parameters from the state so that the search is narrowed down to only the possible values.\n *\n * See the description of [FacetSearchResult](reference.html#FacetSearchResult)\n * @param {string} facet the name of the faceted attribute\n * @param {string} query the string query for the search\n * @param {number} [maxFacetHits] the maximum number values returned. Should be > 0 and <= 100\n * @param {object} [userState] the set of custom parameters to use on top of the current state. Setting a property to `undefined` removes\n * it in the generated query.\n * @return {promise.<FacetSearchResult>} the results of the search\n */\nAlgoliaSearchHelper.prototype.searchForFacetValues = function (\n  facet,\n  query,\n  maxFacetHits,\n  userState\n) {\n  var clientHasSFFV = typeof this.client.searchForFacetValues === 'function';\n  var clientHasInitIndex = typeof this.client.initIndex === 'function';\n  if (\n    !clientHasSFFV &&\n    !clientHasInitIndex &&\n    typeof this.client.search !== 'function'\n  ) {\n    throw new Error(\n      'search for facet values (searchable) was called, but this client does not have a function client.searchForFacetValues or client.initIndex(index).searchForFacetValues'\n    );\n  }\n\n  var state = this.state.setQueryParameters(userState || {});\n  var isDisjunctive = state.isDisjunctiveFacet(facet);\n  var algoliaQuery = requestBuilder.getSearchForFacetQuery(\n    facet,\n    query,\n    maxFacetHits,\n    state\n  );\n\n  this._currentNbQueries++;\n  // eslint-disable-next-line consistent-this\n  var self = this;\n  var searchForFacetValuesPromise;\n  // newer algoliasearch ^3.27.1 - ~4.0.0\n  if (clientHasSFFV) {\n    searchForFacetValuesPromise = this.client.searchForFacetValues([\n      { indexName: state.index, params: algoliaQuery },\n    ]);\n    // algoliasearch < 3.27.1\n  } else if (clientHasInitIndex) {\n    searchForFacetValuesPromise = this.client\n      .initIndex(state.index)\n      .searchForFacetValues(algoliaQuery);\n    // algoliasearch ~5.0.0\n  } else {\n    // @MAJOR only use client.search\n    delete algoliaQuery.facetName;\n    searchForFacetValuesPromise = this.client\n      .search([\n        {\n          type: 'facet',\n          facet: facet,\n          indexName: state.index,\n          params: algoliaQuery,\n        },\n      ])\n      .then(function processResponse(response) {\n        return response.results[0];\n      });\n  }\n\n  this.emit('searchForFacetValues', {\n    state: state,\n    facet: facet,\n    query: query,\n  });\n\n  return searchForFacetValuesPromise.then(\n    function addIsRefined(content) {\n      self._currentNbQueries--;\n      if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n\n      content = Array.isArray(content) ? content[0] : content;\n\n      content.facetHits.forEach(function (f) {\n        f.escapedValue = escapeFacetValue(f.value);\n        f.isRefined = isDisjunctive\n          ? state.isDisjunctiveFacetRefined(facet, f.escapedValue)\n          : state.isFacetRefined(facet, f.escapedValue);\n      });\n\n      return content;\n    },\n    function (e) {\n      self._currentNbQueries--;\n      if (self._currentNbQueries === 0) self.emit('searchQueueEmpty');\n      throw e;\n    }\n  );\n};\n\n/**\n * Sets the text query used for the search.\n *\n * This method resets the current page to 0.\n * @param  {string} q the user query\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setQuery = function (q) {\n  this._change({\n    state: this.state.resetPage().setQuery(q),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Remove all the types of refinements except tags. A string can be provided to remove\n * only the refinements of a specific attribute. For more advanced use case, you can\n * provide a function instead. This function should follow the\n * [clearCallback definition](#SearchParameters.clearCallback).\n *\n * This method resets the current page to 0.\n * @param {string} [name] optional name of the facet / attribute on which we want to remove all refinements\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n * @example\n * // Removing all the refinements\n * helper.clearRefinements().search();\n * @example\n * // Removing all the filters on a the category attribute.\n * helper.clearRefinements('category').search();\n * @example\n * // Removing only the exclude filters on the category facet.\n * helper.clearRefinements(function(value, attribute, type) {\n *   return type === 'exclude' && attribute === 'category';\n * }).search();\n */\nAlgoliaSearchHelper.prototype.clearRefinements = function (name) {\n  this._change({\n    state: this.state.resetPage().clearRefinements(name),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Remove all the tag filters.\n *\n * This method resets the current page to 0.\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.clearTags = function () {\n  this._change({\n    state: this.state.resetPage().clearTags(),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Adds a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveFacetRefinement = function (\n  facet,\n  value\n) {\n  this._change({\n    state: this.state.resetPage().addDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addDisjunctiveRefine = function () {\n  return this.addDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a refinement on a hierarchical facet. It will throw\n * an exception if the facet is not defined or if the facet\n * is already refined.\n *\n * This method resets the current page to 0.\n * @param {string} facet the facet name\n * @param {string} path the hierarchical facet path\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @throws Error if the facet is not defined or if the facet is refined\n * @chainable\n * @fires change\n */\nAlgoliaSearchHelper.prototype.addHierarchicalFacetRefinement = function (\n  facet,\n  path\n) {\n  this._change({\n    state: this.state.resetPage().addHierarchicalFacetRefinement(facet, path),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Adds a an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} operator the operator of the filter\n * @param  {number} value the value of the filter\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addNumericRefinement = function (\n  attribute,\n  operator,\n  value\n) {\n  this._change({\n    state: this.state\n      .resetPage()\n      .addNumericRefinement(attribute, operator, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Adds a filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetRefinement = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().addFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.addRefine = function () {\n  return this.addFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds a an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value (will be converted to string)\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addFacetExclusion = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().addExcludeRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#addFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.addExclude = function () {\n  return this.addFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds a tag filter with the `tag` provided. If the\n * filter is already set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag the tag to add to the filter\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.addTag = function (tag) {\n  this._change({\n    state: this.state.resetPage().addTagRefinement(tag),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Removes an numeric filter to an attribute with the `operator` and `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * Some parameters are optional, triggering different behavior:\n *  - if the value is not provided, then all the numeric value will be removed for the\n *  specified attribute/operator couple.\n *  - if the operator is not provided either, then all the numeric filter on this attribute\n *  will be removed.\n *\n * This method resets the current page to 0.\n * @param  {string} attribute the attribute on which the numeric filter applies\n * @param  {string} [operator] the operator of the filter\n * @param  {number} [value] the value of the filter\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeNumericRefinement = function (\n  attribute,\n  operator,\n  value\n) {\n  this._change({\n    state: this.state\n      .resetPage()\n      .removeNumericRefinement(attribute, operator, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Removes a disjunctive filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveFacetRefinement = function (\n  facet,\n  value\n) {\n  this._change({\n    state: this.state\n      .resetPage()\n      .removeDisjunctiveFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeDisjunctiveFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeDisjunctiveRefine = function () {\n  return this.removeDisjunctiveFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes the refinement set on a hierarchical facet.\n * @param {string} facet the facet name\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @throws Error if the facet is not defined or if the facet is not refined\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeHierarchicalFacetRefinement = function (\n  facet\n) {\n  this._change({\n    state: this.state.resetPage().removeHierarchicalFacetRefinement(facet),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Removes a filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetRefinement = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().removeFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.removeRefine = function () {\n  return this.removeFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Removes an exclusion filter to a faceted attribute with the `value` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * If the value is omitted, then this method will remove all the filters for the\n * attribute.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} [value] the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeFacetExclusion = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().removeExcludeRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#removeFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.removeExclude = function () {\n  return this.removeFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Removes a tag filter with the `tag` provided. If the\n * filter is not set, it doesn't change the filters.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove from the filter\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.removeTag = function (tag) {\n  this._change({\n    state: this.state.resetPage().removeTagRefinement(tag),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Adds or removes an exclusion filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetExclusion = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleExcludeFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetExclusion}\n */\nAlgoliaSearchHelper.prototype.toggleExclude = function () {\n  return this.toggleFacetExclusion.apply(this, arguments);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n * @deprecated since version 2.19.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefinement = function (facet, value) {\n  return this.toggleFacetRefinement(facet, value);\n};\n\n/**\n * Adds or removes a filter to a faceted attribute with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method can be used for conjunctive, disjunctive and hierarchical filters.\n *\n * This method resets the current page to 0.\n * @param  {string} facet the facet to refine\n * @param  {string} value the associated value\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @throws Error will throw an error if the facet is not declared in the settings of the helper\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleFacetRefinement = function (facet, value) {\n  this._change({\n    state: this.state.resetPage().toggleFacetRefinement(facet, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since version 2.4.0, see {@link AlgoliaSearchHelper#toggleFacetRefinement}\n */\nAlgoliaSearchHelper.prototype.toggleRefine = function () {\n  return this.toggleFacetRefinement.apply(this, arguments);\n};\n\n/**\n * Adds or removes a tag filter with the `value` provided. If\n * the value is set then it removes it, otherwise it adds the filter.\n *\n * This method resets the current page to 0.\n * @param {string} tag tag to remove or add\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.toggleTag = function (tag) {\n  this._change({\n    state: this.state.resetPage().toggleTagRefinement(tag),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Increments the page number by one.\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n * @example\n * helper.setPage(0).nextPage().getPage();\n * // returns 1\n */\nAlgoliaSearchHelper.prototype.nextPage = function () {\n  var page = this.state.page || 0;\n  return this.setPage(page + 1);\n};\n\n/**\n * Decrements the page number by one.\n * @fires change\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @chainable\n * @example\n * helper.setPage(1).previousPage().getPage();\n * // returns 0\n */\nAlgoliaSearchHelper.prototype.previousPage = function () {\n  var page = this.state.page || 0;\n  return this.setPage(page - 1);\n};\n\n/**\n * @private\n * @param {number} page The page number\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @chainable\n * @fires change\n */\nfunction setCurrentPage(page) {\n  if (page < 0) throw new Error('Page requested below 0.');\n\n  this._change({\n    state: this.state.setPage(page),\n    isPageReset: false,\n  });\n\n  return this;\n}\n\n/**\n * Change the current page\n * @deprecated\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setCurrentPage = setCurrentPage;\n\n/**\n * Updates the current page.\n * @function\n * @param  {number} page The page number\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setPage = setCurrentPage;\n\n/**\n * Updates the name of the index that will be targeted by the query.\n *\n * This method resets the current page to 0.\n * @param {string} name the index name\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setIndex = function (name) {\n  this._change({\n    state: this.state.resetPage().setIndex(name),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Update a parameter of the search. This method reset the page\n *\n * The complete list of parameters is available on the\n * [Algolia website](https://www.algolia.com/doc/rest#query-an-index).\n * The most commonly used parameters have their own [shortcuts](#query-parameters-shortcuts)\n * or benefit from higher-level APIs (all the kind of filters and facets have their own API)\n *\n * This method resets the current page to 0.\n * @param {string} parameter name of the parameter to update\n * @param {any} value new value of the parameter\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n * @example\n * helper.setQueryParameter('hitsPerPage', 20).search();\n */\nAlgoliaSearchHelper.prototype.setQueryParameter = function (parameter, value) {\n  this._change({\n    state: this.state.resetPage().setQueryParameter(parameter, value),\n    isPageReset: true,\n  });\n\n  return this;\n};\n\n/**\n * Set the whole state (warning: will erase previous state)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @fires change\n * @chainable\n */\nAlgoliaSearchHelper.prototype.setState = function (newState) {\n  this._change({\n    state: SearchParameters.make(newState),\n    isPageReset: false,\n  });\n\n  return this;\n};\n\n/**\n * Override the current state without triggering a change event.\n * Do not use this method unless you know what you are doing. (see the example\n * for a legit use case)\n * @param {SearchParameters} newState the whole new state\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n * @example\n *  helper.on('change', function(state){\n *    // In this function you might want to find a way to store the state in the url/history\n *    updateYourURL(state)\n *  })\n *  window.onpopstate = function(event){\n *    // This is naive though as you should check if the state is really defined etc.\n *    helper.overrideStateWithoutTriggeringChangeEvent(event.state).search()\n *  }\n * @chainable\n */\nAlgoliaSearchHelper.prototype.overrideStateWithoutTriggeringChangeEvent =\n  function (newState) {\n    this.state = new SearchParameters(newState);\n    return this;\n  };\n\n/**\n * Check if an attribute has any numeric, conjunctive, disjunctive or hierarchical filters.\n * @param {string} attribute the name of the attribute\n * @return {boolean} true if the attribute is filtered by at least one value\n * @example\n * // hasRefinements works with numeric, conjunctive, disjunctive and hierarchical filters\n * helper.hasRefinements('price'); // false\n * helper.addNumericRefinement('price', '>', 100);\n * helper.hasRefinements('price'); // true\n *\n * helper.hasRefinements('color'); // false\n * helper.addFacetRefinement('color', 'blue');\n * helper.hasRefinements('color'); // true\n *\n * helper.hasRefinements('material'); // false\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * helper.hasRefinements('material'); // true\n *\n * helper.hasRefinements('categories'); // false\n * helper.toggleFacetRefinement('categories', 'kitchen > knife');\n * helper.hasRefinements('categories'); // true\n *\n */\nAlgoliaSearchHelper.prototype.hasRefinements = function (attribute) {\n  if (objectHasKeys(this.state.getNumericRefinements(attribute))) {\n    return true;\n  } else if (this.state.isConjunctiveFacet(attribute)) {\n    return this.state.isFacetRefined(attribute);\n  } else if (this.state.isDisjunctiveFacet(attribute)) {\n    return this.state.isDisjunctiveFacetRefined(attribute);\n  } else if (this.state.isHierarchicalFacet(attribute)) {\n    return this.state.isHierarchicalFacetRefined(attribute);\n  }\n\n  // there's currently no way to know that the user did call `addNumericRefinement` at some point\n  // thus we cannot distinguish if there once was a numeric refinement that was cleared\n  // so we will return false in every other situations to be consistent\n  // while what we should do here is throw because we did not find the attribute in any type\n  // of refinement\n  return false;\n};\n\n/**\n * Check if a value is excluded for a specific faceted attribute. If the value\n * is omitted then the function checks if there is any excluding refinements.\n *\n * @param  {string}  facet name of the attribute for used for faceting\n * @param  {string}  [value] optional value. If passed will test that this value\n * is filtering the given facet.\n * @return {boolean} true if refined\n * @example\n * helper.isExcludeRefined('color'); // false\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // false\n *\n * helper.addFacetExclusion('color', 'red');\n *\n * helper.isExcludeRefined('color'); // true\n * helper.isExcludeRefined('color', 'blue') // false\n * helper.isExcludeRefined('color', 'red') // true\n */\nAlgoliaSearchHelper.prototype.isExcluded = function (facet, value) {\n  return this.state.isExcludeRefined(facet, value);\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasRefinements}\n */\nAlgoliaSearchHelper.prototype.isDisjunctiveRefined = function (facet, value) {\n  return this.state.isDisjunctiveFacetRefined(facet, value);\n};\n\n/**\n * Check if the string is a currently filtering tag.\n * @param {string} tag tag to check\n * @return {boolean} true if the tag is currently refined\n */\nAlgoliaSearchHelper.prototype.hasTag = function (tag) {\n  return this.state.isTagRefined(tag);\n};\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @deprecated since 2.4.0, see {@link AlgoliaSearchHelper#hasTag}\n */\nAlgoliaSearchHelper.prototype.isTagRefined = function () {\n  return this.hasTagRefinements.apply(this, arguments);\n};\n\n/**\n * Get the name of the currently used index.\n * @return {string} name of the index\n * @example\n * helper.setIndex('highestPrice_products').getIndex();\n * // returns 'highestPrice_products'\n */\nAlgoliaSearchHelper.prototype.getIndex = function () {\n  return this.state.index;\n};\n\nfunction getCurrentPage() {\n  return this.state.page;\n}\n\n/**\n * Get the currently selected page\n * @deprecated\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getCurrentPage = getCurrentPage;\n/**\n * Get the currently selected page\n * @function\n * @return {number} the current page\n */\nAlgoliaSearchHelper.prototype.getPage = getCurrentPage;\n\n/**\n * Get all the tags currently set to filters the results.\n *\n * @return {string[]} The list of tags currently set.\n */\nAlgoliaSearchHelper.prototype.getTags = function () {\n  return this.state.tagRefinements;\n};\n\n/**\n * Get the list of refinements for a given attribute. This method works with\n * conjunctive, disjunctive, excluding and numerical filters.\n *\n * See also SearchResults#getRefinements\n *\n * @param {string} facetName attribute name used for faceting\n * @return {Array.<FacetRefinement|NumericRefinement>} All Refinement are objects that contain a value, and\n * a type. Numeric also contains an operator.\n * @example\n * helper.addNumericRefinement('price', '>', 100);\n * helper.getRefinements('price');\n * // [\n * //   {\n * //     \"value\": [\n * //       100\n * //     ],\n * //     \"operator\": \">\",\n * //     \"type\": \"numeric\"\n * //   }\n * // ]\n * @example\n * helper.addFacetRefinement('color', 'blue');\n * helper.addFacetExclusion('color', 'red');\n * helper.getRefinements('color');\n * // [\n * //   {\n * //     \"value\": \"blue\",\n * //     \"type\": \"conjunctive\"\n * //   },\n * //   {\n * //     \"value\": \"red\",\n * //     \"type\": \"exclude\"\n * //   }\n * // ]\n * @example\n * helper.addDisjunctiveFacetRefinement('material', 'plastic');\n * // [\n * //   {\n * //     \"value\": \"plastic\",\n * //     \"type\": \"disjunctive\"\n * //   }\n * // ]\n */\nAlgoliaSearchHelper.prototype.getRefinements = function (facetName) {\n  var refinements = [];\n\n  if (this.state.isConjunctiveFacet(facetName)) {\n    var conjRefinements = this.state.getConjunctiveRefinements(facetName);\n\n    conjRefinements.forEach(function (r) {\n      refinements.push({\n        value: r,\n        type: 'conjunctive',\n      });\n    });\n\n    var excludeRefinements = this.state.getExcludeRefinements(facetName);\n\n    excludeRefinements.forEach(function (r) {\n      refinements.push({\n        value: r,\n        type: 'exclude',\n      });\n    });\n  } else if (this.state.isDisjunctiveFacet(facetName)) {\n    var disjunctiveRefinements =\n      this.state.getDisjunctiveRefinements(facetName);\n\n    disjunctiveRefinements.forEach(function (r) {\n      refinements.push({\n        value: r,\n        type: 'disjunctive',\n      });\n    });\n  }\n\n  var numericRefinements = this.state.getNumericRefinements(facetName);\n\n  Object.keys(numericRefinements).forEach(function (operator) {\n    var value = numericRefinements[operator];\n\n    refinements.push({\n      value: value,\n      operator: operator,\n      type: 'numeric',\n    });\n  });\n\n  return refinements;\n};\n\n/**\n * Return the current refinement for the (attribute, operator)\n * @param {string} attribute attribute in the record\n * @param {string} operator operator applied on the refined values\n * @return {Array.<number|number[]>} refined values\n */\nAlgoliaSearchHelper.prototype.getNumericRefinement = function (\n  attribute,\n  operator\n) {\n  return this.state.getNumericRefinement(attribute, operator);\n};\n\n/**\n * Get the current breadcrumb for a hierarchical facet, as an array\n * @param  {string} facetName Hierarchical facet name\n * @return {array.<string>} the path as an array of string\n */\nAlgoliaSearchHelper.prototype.getHierarchicalFacetBreadcrumb = function (\n  facetName\n) {\n  return this.state.getHierarchicalFacetBreadcrumb(facetName);\n};\n\n// /////////// PRIVATE\n\n/**\n * Perform the underlying queries\n * @private\n * @param {object} options options for the query\n * @param {boolean} [options.onlyWithDerivedHelpers=false] if true, only the derived helpers will be queried\n * @return {undefined} does not return anything\n * @fires search\n * @fires result\n * @fires error\n */\nAlgoliaSearchHelper.prototype._search = function (options) {\n  var state = this.state;\n  var states = [];\n  var mainQueries = [];\n\n  if (!options.onlyWithDerivedHelpers) {\n    mainQueries = requestBuilder._getQueries(state.index, state);\n\n    states.push({\n      state: state,\n      queriesCount: mainQueries.length,\n      helper: this,\n    });\n\n    this.emit('search', {\n      state: state,\n      results: this.lastResults,\n    });\n  }\n\n  var derivedQueries = this.derivedHelpers.map(function (derivedHelper) {\n    var derivedState = derivedHelper.getModifiedState(state);\n    var derivedStateQueries = derivedState.index\n      ? requestBuilder._getQueries(derivedState.index, derivedState)\n      : [];\n\n    states.push({\n      state: derivedState,\n      queriesCount: derivedStateQueries.length,\n      helper: derivedHelper,\n    });\n\n    derivedHelper.emit('search', {\n      state: derivedState,\n      results: derivedHelper.lastResults,\n    });\n\n    return derivedStateQueries;\n  });\n\n  var queries = Array.prototype.concat.apply(mainQueries, derivedQueries);\n\n  var queryId = this._queryId++;\n  this._currentNbQueries++;\n\n  if (!queries.length) {\n    return Promise.resolve({ results: [] }).then(\n      this._dispatchAlgoliaResponse.bind(this, states, queryId)\n    );\n  }\n\n  try {\n    this.client\n      .search(queries)\n      .then(this._dispatchAlgoliaResponse.bind(this, states, queryId))\n      .catch(this._dispatchAlgoliaError.bind(this, queryId));\n  } catch (error) {\n    // If we reach this part, we're in an internal error state\n    this.emit('error', {\n      error: error,\n    });\n  }\n\n  return undefined;\n};\n\n/**\n * Transform the responses as sent by the server and transform them into a user\n * usable object that merge the results of all the batch requests. It will dispatch\n * over the different helper + derived helpers (when there are some).\n * @private\n * @param {array.<{SearchParameters, AlgoliaQueries, AlgoliaSearchHelper}>} states state used to generate the request\n * @param {number} queryId id of the current request\n * @param {object} content content of the response\n * @return {undefined}\n */\nAlgoliaSearchHelper.prototype._dispatchAlgoliaResponse = function (\n  states,\n  queryId,\n  content\n) {\n  // @TODO remove the number of outdated queries discarded instead of just one\n\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n\n  var results = content.results.slice();\n\n  states.forEach(function (s) {\n    var state = s.state;\n    var queriesCount = s.queriesCount;\n    var helper = s.helper;\n    var specificResults = results.splice(0, queriesCount);\n\n    if (!state.index) {\n      helper.emit('result', {\n        results: null,\n        state: state,\n      });\n      return;\n    }\n\n    helper.lastResults = new SearchResults(state, specificResults);\n\n    helper.emit('result', {\n      results: helper.lastResults,\n      state: state,\n    });\n  });\n};\n\nAlgoliaSearchHelper.prototype._dispatchAlgoliaError = function (\n  queryId,\n  error\n) {\n  if (queryId < this._lastQueryIdReceived) {\n    // Outdated answer\n    return;\n  }\n\n  this._currentNbQueries -= queryId - this._lastQueryIdReceived;\n  this._lastQueryIdReceived = queryId;\n\n  this.emit('error', {\n    error: error,\n  });\n\n  if (this._currentNbQueries === 0) this.emit('searchQueueEmpty');\n};\n\nAlgoliaSearchHelper.prototype.containsRefinement = function (\n  query,\n  facetFilters,\n  numericFilters,\n  tagFilters\n) {\n  return (\n    query ||\n    facetFilters.length !== 0 ||\n    numericFilters.length !== 0 ||\n    tagFilters.length !== 0\n  );\n};\n\n/**\n * Test if there are some disjunctive refinements on the facet\n * @private\n * @param {string} facet the attribute to test\n * @return {boolean} true if there are refinements on this attribute\n */\nAlgoliaSearchHelper.prototype._hasDisjunctiveRefinements = function (facet) {\n  return (\n    this.state.disjunctiveRefinements[facet] &&\n    this.state.disjunctiveRefinements[facet].length > 0\n  );\n};\n\nAlgoliaSearchHelper.prototype._change = function (event) {\n  var state = event.state;\n  var isPageReset = event.isPageReset;\n\n  if (state !== this.state) {\n    this.state = state;\n\n    this.emit('change', {\n      state: this.state,\n      results: this.lastResults,\n      isPageReset: isPageReset,\n    });\n  }\n};\n\n/**\n * Clears the cache of the underlying Algolia client.\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n */\nAlgoliaSearchHelper.prototype.clearCache = function () {\n  if (this.client.clearCache) this.client.clearCache();\n  return this;\n};\n\n/**\n * Updates the internal client instance. If the reference of the clients\n * are equal then no update is actually done.\n * @param  {AlgoliaSearch} newClient an AlgoliaSearch client\n * @return {AlgoliaSearchHelper} Method is chainable, it returns itself\n */\nAlgoliaSearchHelper.prototype.setClient = function (newClient) {\n  if (this.client === newClient) return this;\n\n  if (typeof newClient.addAlgoliaAgent === 'function') {\n    newClient.addAlgoliaAgent('JS Helper (' + version + ')');\n  }\n  this.client = newClient;\n\n  return this;\n};\n\n/**\n * Gets the instance of the currently used client.\n * @return {AlgoliaSearch} the currently used client\n */\nAlgoliaSearchHelper.prototype.getClient = function () {\n  return this.client;\n};\n\n/**\n * Creates an derived instance of the Helper. A derived helper\n * is a way to request other indices synchronised with the lifecycle\n * of the main Helper. This mechanism uses the multiqueries feature\n * of Algolia to aggregate all the requests in a single network call.\n *\n * This method takes a function that is used to create a new SearchParameter\n * that will be used to create requests to Algolia. Those new requests\n * are created just before the `search` event. The signature of the function\n * is `SearchParameters -> SearchParameters`.\n *\n * This method returns a new DerivedHelper which is an EventEmitter\n * that fires the same `search`, `result` and `error` events. Those\n * events, however, will receive data specific to this DerivedHelper\n * and the SearchParameters that is returned by the call of the\n * parameter function.\n * @param {function} fn SearchParameters -> SearchParameters\n * @return {DerivedHelper} a new DerivedHelper\n */\nAlgoliaSearchHelper.prototype.derive = function (fn) {\n  var derivedHelper = new DerivedHelper(this, fn);\n  this.derivedHelpers.push(derivedHelper);\n  return derivedHelper;\n};\n\n/**\n * This method detaches a derived Helper from the main one. Prefer using the one from the\n * derived helper itself, to remove the event listeners too.\n * @private\n * @param  {DerivedHelper} derivedHelper the derived helper to detach\n * @return {undefined} nothing is returned\n * @throws Error\n */\nAlgoliaSearchHelper.prototype.detachDerivedHelper = function (derivedHelper) {\n  var pos = this.derivedHelpers.indexOf(derivedHelper);\n  if (pos === -1) throw new Error('Derived helper already detached');\n  this.derivedHelpers.splice(pos, 1);\n};\n\n/**\n * This method returns true if there is currently at least one on-going search.\n * @return {boolean} true if there is a search pending\n */\nAlgoliaSearchHelper.prototype.hasPendingRequests = function () {\n  return this._currentNbQueries > 0;\n};\n\n/**\n * @typedef AlgoliaSearchHelper.NumericRefinement\n * @type {object}\n * @property {number[]} value the numbers that are used for filtering this attribute with\n * the operator specified.\n * @property {string} operator the faceting data: value, number of entries\n * @property {string} type will be 'numeric'\n */\n\n/**\n * @typedef AlgoliaSearchHelper.FacetRefinement\n * @type {object}\n * @property {string} value the string use to filter the attribute\n * @property {string} type the type of filter: 'conjunctive', 'disjunctive', 'exclude'\n */\n\nmodule.exports = AlgoliaSearchHelper;\n","// Copyright Joyent, Inc. and other Node contributors.\n//\n// Permission is hereby granted, free of charge, to any person obtaining a\n// copy of this software and associated documentation files (the\n// \"Software\"), to deal in the Software without restriction, including\n// without limitation the rights to use, copy, modify, merge, publish,\n// distribute, sublicense, and/or sell copies of the Software, and to permit\n// persons to whom the Software is furnished to do so, subject to the\n// following conditions:\n//\n// The above copyright notice and this permission notice shall be included\n// in all copies or substantial portions of the Software.\n//\n// THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND, EXPRESS\n// OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n// MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN\n// NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM,\n// DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR\n// OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE\n// USE OR OTHER DEALINGS IN THE SOFTWARE.\n\nfunction EventEmitter() {\n  this._events = this._events || {};\n  this._maxListeners = this._maxListeners || undefined;\n}\nmodule.exports = EventEmitter;\n\n// Backwards-compat with node 0.10.x\n// EventEmitter.EventEmitter = EventEmitter;\n\nEventEmitter.prototype._events = undefined;\nEventEmitter.prototype._maxListeners = undefined;\n\n// By default EventEmitters will print a warning if more than 10 listeners are\n// added to it. This is a useful default which helps finding memory leaks.\nEventEmitter.defaultMaxListeners = 10;\n\n// Obviously not all Emitters should be limited to 10. This function allows\n// that to be increased. Set to zero for unlimited.\nEventEmitter.prototype.setMaxListeners = function(n) {\n  if (!isNumber(n) || n < 0 || isNaN(n))\n    throw TypeError('n must be a positive number');\n  this._maxListeners = n;\n  return this;\n};\n\nEventEmitter.prototype.emit = function(type) {\n  var er, handler, len, args, i, listeners;\n\n  if (!this._events)\n    this._events = {};\n\n  // If there is no 'error' event listener then throw.\n  if (type === 'error') {\n    if (!this._events.error ||\n        (isObject(this._events.error) && !this._events.error.length)) {\n      er = arguments[1];\n      if (er instanceof Error) {\n        throw er; // Unhandled 'error' event\n      } else {\n        // At least give some kind of context to the user\n        var err = new Error('Uncaught, unspecified \"error\" event. (' + er + ')');\n        err.context = er;\n        throw err;\n      }\n    }\n  }\n\n  handler = this._events[type];\n\n  if (isUndefined(handler))\n    return false;\n\n  if (isFunction(handler)) {\n    switch (arguments.length) {\n      // fast cases\n      case 1:\n        handler.call(this);\n        break;\n      case 2:\n        handler.call(this, arguments[1]);\n        break;\n      case 3:\n        handler.call(this, arguments[1], arguments[2]);\n        break;\n      // slower\n      default:\n        args = Array.prototype.slice.call(arguments, 1);\n        handler.apply(this, args);\n    }\n  } else if (isObject(handler)) {\n    args = Array.prototype.slice.call(arguments, 1);\n    listeners = handler.slice();\n    len = listeners.length;\n    for (i = 0; i < len; i++)\n      listeners[i].apply(this, args);\n  }\n\n  return true;\n};\n\nEventEmitter.prototype.addListener = function(type, listener) {\n  var m;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events)\n    this._events = {};\n\n  // To avoid recursion in the case that type === \"newListener\"! Before\n  // adding it to the listeners, first emit \"newListener\".\n  if (this._events.newListener)\n    this.emit('newListener', type,\n              isFunction(listener.listener) ?\n              listener.listener : listener);\n\n  if (!this._events[type])\n    // Optimize the case of one listener. Don't need the extra array object.\n    this._events[type] = listener;\n  else if (isObject(this._events[type]))\n    // If we've already got an array, just append.\n    this._events[type].push(listener);\n  else\n    // Adding the second element, need to change to array.\n    this._events[type] = [this._events[type], listener];\n\n  // Check for listener leak\n  if (isObject(this._events[type]) && !this._events[type].warned) {\n    if (!isUndefined(this._maxListeners)) {\n      m = this._maxListeners;\n    } else {\n      m = EventEmitter.defaultMaxListeners;\n    }\n\n    if (m && m > 0 && this._events[type].length > m) {\n      this._events[type].warned = true;\n      console.error('(node) warning: possible EventEmitter memory ' +\n                    'leak detected. %d listeners added. ' +\n                    'Use emitter.setMaxListeners() to increase limit.',\n                    this._events[type].length);\n      if (typeof console.trace === 'function') {\n        // not supported in IE 10\n        console.trace();\n      }\n    }\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.on = EventEmitter.prototype.addListener;\n\nEventEmitter.prototype.once = function(type, listener) {\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  var fired = false;\n\n  function g() {\n    this.removeListener(type, g);\n\n    if (!fired) {\n      fired = true;\n      listener.apply(this, arguments);\n    }\n  }\n\n  g.listener = listener;\n  this.on(type, g);\n\n  return this;\n};\n\n// emits a 'removeListener' event iff the listener was removed\nEventEmitter.prototype.removeListener = function(type, listener) {\n  var list, position, length, i;\n\n  if (!isFunction(listener))\n    throw TypeError('listener must be a function');\n\n  if (!this._events || !this._events[type])\n    return this;\n\n  list = this._events[type];\n  length = list.length;\n  position = -1;\n\n  if (list === listener ||\n      (isFunction(list.listener) && list.listener === listener)) {\n    delete this._events[type];\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n\n  } else if (isObject(list)) {\n    for (i = length; i-- > 0;) {\n      if (list[i] === listener ||\n          (list[i].listener && list[i].listener === listener)) {\n        position = i;\n        break;\n      }\n    }\n\n    if (position < 0)\n      return this;\n\n    if (list.length === 1) {\n      list.length = 0;\n      delete this._events[type];\n    } else {\n      list.splice(position, 1);\n    }\n\n    if (this._events.removeListener)\n      this.emit('removeListener', type, listener);\n  }\n\n  return this;\n};\n\nEventEmitter.prototype.removeAllListeners = function(type) {\n  var key, listeners;\n\n  if (!this._events)\n    return this;\n\n  // not listening for removeListener, no need to emit\n  if (!this._events.removeListener) {\n    if (arguments.length === 0)\n      this._events = {};\n    else if (this._events[type])\n      delete this._events[type];\n    return this;\n  }\n\n  // emit removeListener for all listeners on all events\n  if (arguments.length === 0) {\n    for (key in this._events) {\n      if (key === 'removeListener') continue;\n      this.removeAllListeners(key);\n    }\n    this.removeAllListeners('removeListener');\n    this._events = {};\n    return this;\n  }\n\n  listeners = this._events[type];\n\n  if (isFunction(listeners)) {\n    this.removeListener(type, listeners);\n  } else if (listeners) {\n    // LIFO order\n    while (listeners.length)\n      this.removeListener(type, listeners[listeners.length - 1]);\n  }\n  delete this._events[type];\n\n  return this;\n};\n\nEventEmitter.prototype.listeners = function(type) {\n  var ret;\n  if (!this._events || !this._events[type])\n    ret = [];\n  else if (isFunction(this._events[type]))\n    ret = [this._events[type]];\n  else\n    ret = this._events[type].slice();\n  return ret;\n};\n\nEventEmitter.prototype.listenerCount = function(type) {\n  if (this._events) {\n    var evlistener = this._events[type];\n\n    if (isFunction(evlistener))\n      return 1;\n    else if (evlistener)\n      return evlistener.length;\n  }\n  return 0;\n};\n\nEventEmitter.listenerCount = function(emitter, type) {\n  return emitter.listenerCount(type);\n};\n\nfunction isFunction(arg) {\n  return typeof arg === 'function';\n}\n\nfunction isNumber(arg) {\n  return typeof arg === 'number';\n}\n\nfunction isObject(arg) {\n  return typeof arg === 'object' && arg !== null;\n}\n\nfunction isUndefined(arg) {\n  return arg === void 0;\n}\n","var toString = Object.prototype.toString;\n\nmodule.exports = function kindOf(val) {\n  if (val === void 0) return 'undefined';\n  if (val === null) return 'null';\n\n  var type = typeof val;\n  if (type === 'boolean') return 'boolean';\n  if (type === 'string') return 'string';\n  if (type === 'number') return 'number';\n  if (type === 'symbol') return 'symbol';\n  if (type === 'function') {\n    return isGeneratorFn(val) ? 'generatorfunction' : 'function';\n  }\n\n  if (isArray(val)) return 'array';\n  if (isBuffer(val)) return 'buffer';\n  if (isArguments(val)) return 'arguments';\n  if (isDate(val)) return 'date';\n  if (isError(val)) return 'error';\n  if (isRegexp(val)) return 'regexp';\n\n  switch (ctorName(val)) {\n    case 'Symbol': return 'symbol';\n    case 'Promise': return 'promise';\n\n    // Set, Map, WeakSet, WeakMap\n    case 'WeakMap': return 'weakmap';\n    case 'WeakSet': return 'weakset';\n    case 'Map': return 'map';\n    case 'Set': return 'set';\n\n    // 8-bit typed arrays\n    case 'Int8Array': return 'int8array';\n    case 'Uint8Array': return 'uint8array';\n    case 'Uint8ClampedArray': return 'uint8clampedarray';\n\n    // 16-bit typed arrays\n    case 'Int16Array': return 'int16array';\n    case 'Uint16Array': return 'uint16array';\n\n    // 32-bit typed arrays\n    case 'Int32Array': return 'int32array';\n    case 'Uint32Array': return 'uint32array';\n    case 'Float32Array': return 'float32array';\n    case 'Float64Array': return 'float64array';\n  }\n\n  if (isGeneratorObj(val)) {\n    return 'generator';\n  }\n\n  // Non-plain objects\n  type = toString.call(val);\n  switch (type) {\n    case '[object Object]': return 'object';\n    // iterators\n    case '[object Map Iterator]': return 'mapiterator';\n    case '[object Set Iterator]': return 'setiterator';\n    case '[object String Iterator]': return 'stringiterator';\n    case '[object Array Iterator]': return 'arrayiterator';\n  }\n\n  // other\n  return type.slice(8, -1).toLowerCase().replace(/\\s/g, '');\n};\n\nfunction ctorName(val) {\n  return typeof val.constructor === 'function' ? val.constructor.name : null;\n}\n\nfunction isArray(val) {\n  if (Array.isArray) return Array.isArray(val);\n  return val instanceof Array;\n}\n\nfunction isError(val) {\n  return val instanceof Error || (typeof val.message === 'string' && val.constructor && typeof val.constructor.stackTraceLimit === 'number');\n}\n\nfunction isDate(val) {\n  if (val instanceof Date) return true;\n  return typeof val.toDateString === 'function'\n    && typeof val.getDate === 'function'\n    && typeof val.setDate === 'function';\n}\n\nfunction isRegexp(val) {\n  if (val instanceof RegExp) return true;\n  return typeof val.flags === 'string'\n    && typeof val.ignoreCase === 'boolean'\n    && typeof val.multiline === 'boolean'\n    && typeof val.global === 'boolean';\n}\n\nfunction isGeneratorFn(name, val) {\n  return ctorName(name) === 'GeneratorFunction';\n}\n\nfunction isGeneratorObj(val) {\n  return typeof val.throw === 'function'\n    && typeof val.return === 'function'\n    && typeof val.next === 'function';\n}\n\nfunction isArguments(val) {\n  try {\n    if (typeof val.length === 'number' && typeof val.callee === 'function') {\n      return true;\n    }\n  } catch (err) {\n    if (err.message.indexOf('callee') !== -1) {\n      return true;\n    }\n  }\n  return false;\n}\n\n/**\n * If you need to support Safari 5-7 (8-10 yr-old browser),\n * take a look at https://github.com/feross/is-buffer\n */\n\nfunction isBuffer(val) {\n  if (val.constructor && typeof val.constructor.isBuffer === 'function') {\n    return val.constructor.isBuffer(val);\n  }\n  return false;\n}\n","'use strict';\n\n// @MAJOR can be replaced by native Array#find when we change support\nmodule.exports = function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n\n  return undefined;\n};\n","import { createContext } from 'react';\nexport var instantSearchContext = /*#__PURE__*/createContext({\n  onInternalStateUpdate: function onInternalStateUpdate() {\n    return undefined;\n  },\n  createHrefForState: function createHrefForState() {\n    return '#';\n  },\n  onSearchForFacetValues: function onSearchForFacetValues() {\n    return undefined;\n  },\n  onSearchStateChange: function onSearchStateChange() {\n    return undefined;\n  },\n  onSearchParameters: function onSearchParameters() {\n    return undefined;\n  },\n  store: {},\n  widgetsManager: {},\n  mainTargetedIndex: ''\n});\nvar InstantSearchConsumer = instantSearchContext.Consumer,\n  InstantSearchProvider = instantSearchContext.Provider;\nexport { InstantSearchConsumer, InstantSearchProvider };\nvar _createContext = /*#__PURE__*/createContext(undefined),\n  IndexConsumer = _createContext.Consumer,\n  IndexProvider = _createContext.Provider;\nexport { IndexConsumer, IndexProvider };","function ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\n// eslint-disable-next-line @typescript-eslint/unbound-method\nvar hasOwn = Object.prototype.hasOwnProperty;\n\n// From https://github.com/reactjs/react-redux/blob/master/src/utils/shallowEqual.js\nexport var shallowEqual = function shallowEqual(objA, objB) {\n  if (objA === objB) {\n    return true;\n  }\n  var keysA = Object.keys(objA);\n  var keysB = Object.keys(objB);\n  if (keysA.length !== keysB.length) {\n    return false;\n  }\n\n  // Test for A's keys different from B.\n  for (var i = 0; i < keysA.length; i++) {\n    if (!hasOwn.call(objB, keysA[i]) || objA[keysA[i]] !== objB[keysA[i]]) {\n      return false;\n    }\n  }\n  return true;\n};\nexport var getDisplayName = function getDisplayName(Component) {\n  return Component.displayName || Component.name || 'UnknownComponent';\n};\nvar resolved = Promise.resolve();\nexport var defer = function defer(f) {\n  resolved.then(f);\n};\nvar isPlainObject = function isPlainObject(value) {\n  return _typeof(value) === 'object' && value !== null && !Array.isArray(value);\n};\nexport var removeEmptyKey = function removeEmptyKey(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n    if (!isPlainObject(value)) {\n      return;\n    }\n    if (!objectHasKeys(value)) {\n      delete obj[key];\n    } else {\n      removeEmptyKey(value);\n    }\n  });\n  return obj;\n};\nexport var removeEmptyArraysFromObject = function removeEmptyArraysFromObject(obj) {\n  Object.keys(obj).forEach(function (key) {\n    var value = obj[key];\n    if (Array.isArray(value) && value.length === 0) {\n      delete obj[key];\n    }\n  });\n  return obj;\n};\nexport function addAbsolutePositions(hits, hitsPerPage, page) {\n  return hits.map(function (hit, index) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __position: hitsPerPage * page + index + 1\n    });\n  });\n}\nexport function addQueryID(hits, queryID) {\n  if (!queryID) {\n    return hits;\n  }\n  return hits.map(function (hit) {\n    return _objectSpread(_objectSpread({}, hit), {}, {\n      __queryID: queryID\n    });\n  });\n}\nexport function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n  return undefined;\n}\nexport function objectHasKeys(object) {\n  return object && Object.keys(object).length > 0;\n}\n\n// https://github.com/babel/babel/blob/3aaafae053fa75febb3aa45d45b6f00646e30ba4/packages/babel-helpers/src/helpers.js#L604-L620\nexport function omit(source, excluded) {\n  if (source === null || source === undefined) {\n    return {};\n  }\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  for (var i = 0; i < sourceKeys.length; i++) {\n    var key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) {\n      // eslint-disable-next-line no-continue\n      continue;\n    }\n    target[key] = source[key];\n  }\n  return target;\n}\n\n/**\n * Retrieve the value at a path of the object:\n *\n * @example\n * getPropertyByPath(\n *   { test: { this: { function: [{ now: { everyone: true } }] } } },\n *   'test.this.function[0].now.everyone'\n * ); // true\n *\n * getPropertyByPath(\n *   { test: { this: { function: [{ now: { everyone: true } }] } } },\n *   ['test', 'this', 'function', 0, 'now', 'everyone']\n * ); // true\n *\n * @param object Source object to query\n * @param path either an array of properties, or a string form of the properties, separated by .\n */\nexport var getPropertyByPath = function getPropertyByPath(object, path) {\n  return (Array.isArray(path) ? path : path.replace(/\\[(\\d+)]/g, '.$1').split('.')).reduce(function (current, key) {\n    return current ? current[key] : undefined;\n  }, object);\n};\nexport function getObjectType(object) {\n  return Object.prototype.toString.call(object).slice(8, -1);\n}\nexport function unescapeFacetValue(value) {\n  return value.replace(/^\\\\-/, '-');\n}","import { defer } from \"./utils.js\";\nexport default function createWidgetsManager(onWidgetsUpdate) {\n  var widgets = [];\n  // Is an update scheduled?\n  var scheduled = false;\n\n  // The state manager's updates need to be batched since more than one\n  // component can register or unregister widgets during the same tick.\n  function scheduleUpdate() {\n    if (scheduled) {\n      return;\n    }\n    scheduled = true;\n    defer(function () {\n      scheduled = false;\n      onWidgetsUpdate();\n    });\n  }\n  return {\n    registerWidget: function registerWidget(widget) {\n      widgets.push(widget);\n      scheduleUpdate();\n      return function unregisterWidget() {\n        widgets.splice(widgets.indexOf(widget), 1);\n        scheduleUpdate();\n      };\n    },\n    update: scheduleUpdate,\n    getWidgets: function getWidgets() {\n      return widgets;\n    }\n  };\n}","import { getPropertyByPath } from \"./utils.js\";\nexport var HIGHLIGHT_TAGS = {\n  highlightPreTag: \"<ais-highlight-0000000000>\",\n  highlightPostTag: \"</ais-highlight-0000000000>\"\n};\n\n/**\n * Parses an highlighted attribute into an array of objects with the string value, and\n * a boolean that indicated if this part is highlighted.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightedValue - highlighted attribute as returned by Algolia highlight feature\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\nfunction parseHighlightedAttribute(_ref) {\n  var preTag = _ref.preTag,\n    postTag = _ref.postTag,\n    _ref$highlightedValue = _ref.highlightedValue,\n    highlightedValue = _ref$highlightedValue === void 0 ? '' : _ref$highlightedValue;\n  var splitByPreTag = highlightedValue.split(preTag);\n  var firstValue = splitByPreTag.shift();\n  var elements = firstValue === '' ? [] : [{\n    value: firstValue,\n    isHighlighted: false\n  }];\n  if (postTag === preTag) {\n    var isHighlighted = true;\n    splitByPreTag.forEach(function (split) {\n      elements.push({\n        value: split,\n        isHighlighted: isHighlighted\n      });\n      isHighlighted = !isHighlighted;\n    });\n  } else {\n    splitByPreTag.forEach(function (split) {\n      var splitByPostTag = split.split(postTag);\n      elements.push({\n        value: splitByPostTag[0],\n        isHighlighted: true\n      });\n      if (splitByPostTag[1] !== '') {\n        elements.push({\n          value: splitByPostTag[1],\n          isHighlighted: false\n        });\n      }\n    });\n  }\n  return elements;\n}\n\n/**\n * Find an highlighted attribute given an `attribute` and an `highlightProperty`, parses it,\n * and provided an array of objects with the string value and a boolean if this\n * value is highlighted.\n *\n * In order to use this feature, highlight must be activated in the configuration of\n * the index. The `preTag` and `postTag` attributes are respectively highlightPreTag and\n * highlightPostTag in Algolia configuration.\n *\n * @param {string} preTag - string used to identify the start of an highlighted value\n * @param {string} postTag - string used to identify the end of an highlighted value\n * @param {string} highlightProperty - the property that contains the highlight structure in the results\n * @param {string} attribute - the highlighted attribute to look for\n * @param {object} hit - the actual hit returned by Algolia.\n * @return {object[]} - An array of {value: string, isHighlighted: boolean}.\n */\nexport function parseAlgoliaHit(_ref2) {\n  var _ref2$preTag = _ref2.preTag,\n    preTag = _ref2$preTag === void 0 ? '<em>' : _ref2$preTag,\n    _ref2$postTag = _ref2.postTag,\n    postTag = _ref2$postTag === void 0 ? '</em>' : _ref2$postTag,\n    highlightProperty = _ref2.highlightProperty,\n    attribute = _ref2.attribute,\n    hit = _ref2.hit;\n  if (!hit) throw new Error('`hit`, the matching record, must be provided');\n  var highlightObject = getPropertyByPath(hit[highlightProperty], attribute) || {};\n  if (Array.isArray(highlightObject)) {\n    return highlightObject.map(function (item) {\n      return parseHighlightedAttribute({\n        preTag: preTag,\n        postTag: postTag,\n        highlightedValue: item.value\n      });\n    });\n  }\n  return parseHighlightedAttribute({\n    preTag: preTag,\n    postTag: postTag,\n    highlightedValue: highlightObject.value\n  });\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport { omit } from \"./utils.js\";\nexport function getIndexId(context) {\n  return hasMultipleIndices(context) ? context.multiIndexContext.targetedIndex : context.ais.mainTargetedIndex;\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * @returns {import('algoliasearch-helper').SearchResults} results\n */\nexport function getResults(searchResults, context) {\n  if (searchResults.results) {\n    if (searchResults.results.hits) {\n      return searchResults.results;\n    }\n    var indexId = getIndexId(context);\n    if (searchResults.results[indexId]) {\n      return searchResults.results[indexId];\n    }\n  }\n  return null;\n}\nexport function hasMultipleIndices(context) {\n  return context && context.multiIndexContext;\n}\nexport function refineValue(searchState, nextRefinement, context, resetPage, namespace) {\n  if (hasMultipleIndices(context)) {\n    var indexId = getIndexId(context);\n    return namespace ? refineMultiIndexWithNamespace(searchState, nextRefinement, indexId, resetPage, namespace) : refineMultiIndex(searchState, nextRefinement, indexId, resetPage);\n  } else {\n    // When we have a multi index page with shared widgets we should also\n    // reset their page to 1 if the resetPage is provided. Otherwise the\n    // indices will always be reset\n    // see: https://github.com/algolia/react-instantsearch/issues/310\n    // see: https://github.com/algolia/react-instantsearch/issues/637\n    if (searchState.indices && resetPage) {\n      Object.keys(searchState.indices).forEach(function (targetedIndex) {\n        searchState = refineValue(searchState, {\n          page: 1\n        }, {\n          multiIndexContext: {\n            targetedIndex: targetedIndex\n          }\n        }, true, namespace);\n      });\n    }\n    return namespace ? refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) : refineSingleIndex(searchState, nextRefinement, resetPage);\n  }\n}\nfunction refineMultiIndex(searchState, nextRefinement, indexId, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var state = searchState.indices && searchState.indices[indexId] ? _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread(_objectSpread({}, searchState.indices[indexId]), nextRefinement), page))) : _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread({}, nextRefinement), page)));\n  return _objectSpread(_objectSpread({}, searchState), {}, {\n    indices: state\n  });\n}\nfunction refineSingleIndex(searchState, nextRefinement, resetPage) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _objectSpread(_objectSpread(_objectSpread({}, searchState), nextRefinement), page);\n}\nfunction refineMultiIndexWithNamespace(searchState, nextRefinement, indexId, resetPage, namespace) {\n  var _objectSpread4;\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  var state = searchState.indices && searchState.indices[indexId] ? _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread({}, searchState.indices[indexId]), {}, (_objectSpread4 = {}, _defineProperty(_objectSpread4, namespace, _objectSpread(_objectSpread({}, searchState.indices[indexId][namespace]), nextRefinement)), _defineProperty(_objectSpread4, \"page\", 1), _objectSpread4)))) : _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, _objectSpread(_defineProperty({}, namespace, nextRefinement), page)));\n  return _objectSpread(_objectSpread({}, searchState), {}, {\n    indices: state\n  });\n}\nfunction refineSingleIndexWithNamespace(searchState, nextRefinement, resetPage, namespace) {\n  var page = resetPage ? {\n    page: 1\n  } : undefined;\n  return _objectSpread(_objectSpread({}, searchState), {}, _defineProperty({}, namespace, _objectSpread(_objectSpread({}, searchState[namespace]), nextRefinement)), page);\n}\nfunction getNamespaceAndAttributeName(id) {\n  var parts = id.match(/^([^.]*)\\.(.*)/);\n  var namespace = parts && parts[1];\n  var attributeName = parts && parts[2];\n  return {\n    namespace: namespace,\n    attributeName: attributeName\n  };\n}\nfunction hasRefinements(_ref) {\n  var multiIndex = _ref.multiIndex,\n    indexId = _ref.indexId,\n    namespace = _ref.namespace,\n    attributeName = _ref.attributeName,\n    id = _ref.id,\n    searchState = _ref.searchState;\n  if (multiIndex && namespace) {\n    return searchState.indices && searchState.indices[indexId] && searchState.indices[indexId][namespace] && Object.hasOwnProperty.call(searchState.indices[indexId][namespace], attributeName);\n  }\n  if (multiIndex) {\n    return searchState.indices && searchState.indices[indexId] && Object.hasOwnProperty.call(searchState.indices[indexId], id);\n  }\n  if (namespace) {\n    return searchState[namespace] && Object.hasOwnProperty.call(searchState[namespace], attributeName);\n  }\n  return Object.hasOwnProperty.call(searchState, id);\n}\nfunction getRefinements(_ref2) {\n  var multiIndex = _ref2.multiIndex,\n    indexId = _ref2.indexId,\n    namespace = _ref2.namespace,\n    attributeName = _ref2.attributeName,\n    id = _ref2.id,\n    searchState = _ref2.searchState;\n  if (multiIndex && namespace) {\n    return searchState.indices[indexId][namespace][attributeName];\n  }\n  if (multiIndex) {\n    return searchState.indices[indexId][id];\n  }\n  if (namespace) {\n    return searchState[namespace][attributeName];\n  }\n  return searchState[id];\n}\nexport function getCurrentRefinementValue(props, searchState, context, id, defaultValue) {\n  var indexId = getIndexId(context);\n  var _getNamespaceAndAttri = getNamespaceAndAttributeName(id),\n    namespace = _getNamespaceAndAttri.namespace,\n    attributeName = _getNamespaceAndAttri.attributeName;\n  var multiIndex = hasMultipleIndices(context);\n  var args = {\n    multiIndex: multiIndex,\n    indexId: indexId,\n    namespace: namespace,\n    attributeName: attributeName,\n    id: id,\n    searchState: searchState\n  };\n  var hasRefinementsValue = hasRefinements(args);\n  if (hasRefinementsValue) {\n    return getRefinements(args);\n  }\n  if (props.defaultRefinement) {\n    return props.defaultRefinement;\n  }\n  return defaultValue;\n}\nexport function cleanUpValue(searchState, context, id) {\n  var indexId = getIndexId(context);\n  var _getNamespaceAndAttri2 = getNamespaceAndAttributeName(id),\n    namespace = _getNamespaceAndAttri2.namespace,\n    attributeName = _getNamespaceAndAttri2.attributeName;\n  if (hasMultipleIndices(context) && Boolean(searchState.indices)) {\n    return cleanUpValueWithMultiIndex({\n      attribute: attributeName,\n      searchState: searchState,\n      indexId: indexId,\n      id: id,\n      namespace: namespace\n    });\n  }\n  return cleanUpValueWithSingleIndex({\n    attribute: attributeName,\n    searchState: searchState,\n    id: id,\n    namespace: namespace\n  });\n}\nfunction cleanUpValueWithSingleIndex(_ref3) {\n  var searchState = _ref3.searchState,\n    id = _ref3.id,\n    namespace = _ref3.namespace,\n    attribute = _ref3.attribute;\n  if (namespace) {\n    return _objectSpread(_objectSpread({}, searchState), {}, _defineProperty({}, namespace, omit(searchState[namespace], [attribute])));\n  }\n  return omit(searchState, [id]);\n}\nfunction cleanUpValueWithMultiIndex(_ref4) {\n  var searchState = _ref4.searchState,\n    indexId = _ref4.indexId,\n    id = _ref4.id,\n    namespace = _ref4.namespace,\n    attribute = _ref4.attribute;\n  var indexSearchState = searchState.indices[indexId];\n  if (namespace && indexSearchState) {\n    return _objectSpread(_objectSpread({}, searchState), {}, {\n      indices: _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, _objectSpread(_objectSpread({}, indexSearchState), {}, _defineProperty({}, namespace, omit(indexSearchState[namespace], [attribute])))))\n    });\n  }\n  if (indexSearchState) {\n    return _objectSpread(_objectSpread({}, searchState), {}, {\n      indices: _objectSpread(_objectSpread({}, searchState.indices), {}, _defineProperty({}, indexId, omit(indexSearchState, [id])))\n    });\n  }\n  return searchState;\n}","export default '6.40.4';","var _excluded = [\"resultsFacetValues\"],\n  _excluded2 = [\"resultsFacetValues\"],\n  _excluded3 = [\"resultsFacetValues\"];\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport algoliasearchHelper from 'algoliasearch-helper';\nimport { version as ReactVersion } from 'react';\nimport createStore from \"./createStore.js\";\nimport createWidgetsManager from \"./createWidgetsManager.js\";\nimport { HIGHLIGHT_TAGS } from \"./highlight.js\";\nimport { hasMultipleIndices } from \"./indexUtils.js\";\nimport version from \"./version.js\";\nfunction addAlgoliaAgents(searchClient) {\n  if (typeof searchClient.addAlgoliaAgent === 'function') {\n    searchClient.addAlgoliaAgent(\"react (\".concat(ReactVersion, \")\"));\n    searchClient.addAlgoliaAgent(\"react-instantsearch (\".concat(version, \")\"));\n  }\n}\nvar isMultiIndexContext = function isMultiIndexContext(widget) {\n  return hasMultipleIndices({\n    ais: widget.props.contextValue,\n    multiIndexContext: widget.props.indexContextValue\n  });\n};\nvar isTargetedIndexEqualIndex = function isTargetedIndexEqualIndex(widget, indexId) {\n  return widget.props.indexContextValue.targetedIndex === indexId;\n};\n\n// Relying on the `indexId` is a bit brittle to detect the `Index` widget.\n// Since it's a class we could rely on `instanceof` or similar. We never\n// had an issue though. Works for now.\nvar isIndexWidget = function isIndexWidget(widget) {\n  return Boolean(widget.props.indexId);\n};\nvar isIndexWidgetEqualIndex = function isIndexWidgetEqualIndex(widget, indexId) {\n  return widget.props.indexId === indexId;\n};\nvar sortIndexWidgetsFirst = function sortIndexWidgetsFirst(firstWidget, secondWidget) {\n  var isFirstWidgetIndex = isIndexWidget(firstWidget);\n  var isSecondWidgetIndex = isIndexWidget(secondWidget);\n  if (isFirstWidgetIndex && !isSecondWidgetIndex) {\n    return -1;\n  }\n  if (!isFirstWidgetIndex && isSecondWidgetIndex) {\n    return 1;\n  }\n  return 0;\n};\n\n// This function is copied from the algoliasearch v4 API Client. If modified,\n// consider updating it also in `serializeQueryParameters` from `@algolia/transporter`.\nfunction serializeQueryParameters(parameters) {\n  var isObjectOrArray = function isObjectOrArray(value) {\n    return Object.prototype.toString.call(value) === '[object Object]' || Object.prototype.toString.call(value) === '[object Array]';\n  };\n  var encode = function encode(format) {\n    for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n      args[_key - 1] = arguments[_key];\n    }\n    var i = 0;\n    return format.replace(/%s/g, function () {\n      return encodeURIComponent(args[i++]);\n    });\n  };\n  return Object.keys(parameters).map(function (key) {\n    return encode('%s=%s', key, isObjectOrArray(parameters[key]) ? JSON.stringify(parameters[key]) : parameters[key]);\n  }).join('&');\n}\n\n/**\n * Creates a new instance of the InstantSearchManager which controls the widgets and\n * trigger the search when the widgets are updated.\n * @param {string} indexName - the main index name\n * @param {object} initialState - initial widget state\n * @param {object} SearchParameters - optional additional parameters to send to the algolia API\n * @param {number} stalledSearchDelay - time (in ms) after the search is stalled\n * @return {InstantSearchManager} a new instance of InstantSearchManager\n */\nexport default function createInstantSearchManager(_ref) {\n  var indexName = _ref.indexName,\n    _ref$initialState = _ref.initialState,\n    initialState = _ref$initialState === void 0 ? {} : _ref$initialState,\n    searchClient = _ref.searchClient,\n    resultsState = _ref.resultsState,\n    stalledSearchDelay = _ref.stalledSearchDelay;\n  var helper = algoliasearchHelper(searchClient, indexName, _objectSpread({}, HIGHLIGHT_TAGS));\n  addAlgoliaAgents(searchClient);\n  helper.on('search', handleNewSearch).on('result', handleSearchSuccess({\n    indexId: indexName\n  })).on('error', handleSearchError);\n  var skip = false;\n  var stalledSearchTimer = null;\n  var initialSearchParameters = helper.state;\n  var searchCounter;\n  var widgetsManager = createWidgetsManager(onWidgetsUpdate);\n  hydrateSearchClient(searchClient, resultsState);\n  var store = createStore({\n    widgets: initialState,\n    metadata: hydrateMetadata(resultsState),\n    results: hydrateResultsState(resultsState),\n    error: null,\n    searching: false,\n    isSearchStalled: true,\n    searchingForFacetValues: false\n  });\n  function skipSearch() {\n    skip = true;\n  }\n  function updateClient(client) {\n    addAlgoliaAgents(client);\n    helper.setClient(client);\n    search();\n  }\n  function clearCache() {\n    helper.clearCache();\n    search();\n  }\n  function getMetadata(state) {\n    return widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getMetadata);\n    }).map(function (widget) {\n      return widget.getMetadata(state);\n    });\n  }\n  function getSearchParameters() {\n    var sharedParameters = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      return !isMultiIndexContext(widget) && !isIndexWidget(widget);\n    }).reduce(function (res, widget) {\n      return widget.getSearchParameters(res);\n    }, initialSearchParameters);\n    var mainParameters = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      var targetedIndexEqualMainIndex = isMultiIndexContext(widget) && isTargetedIndexEqualIndex(widget, indexName);\n      var subIndexEqualMainIndex = isIndexWidget(widget) && isIndexWidgetEqualIndex(widget, indexName);\n      return targetedIndexEqualMainIndex || subIndexEqualMainIndex;\n    })\n    // We have to sort the `Index` widgets first so the `index` parameter\n    // is correctly set in the `reduce` function for the following widgets\n    .sort(sortIndexWidgetsFirst).reduce(function (res, widget) {\n      return widget.getSearchParameters(res);\n    }, sharedParameters);\n    var derivedIndices = widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.getSearchParameters);\n    }).filter(function (widget) {\n      var targetedIndexNotEqualMainIndex = isMultiIndexContext(widget) && !isTargetedIndexEqualIndex(widget, indexName);\n      var subIndexNotEqualMainIndex = isIndexWidget(widget) && !isIndexWidgetEqualIndex(widget, indexName);\n      return targetedIndexNotEqualMainIndex || subIndexNotEqualMainIndex;\n    })\n    // We have to sort the `Index` widgets first so the `index` parameter\n    // is correctly set in the `reduce` function for the following widgets\n    .sort(sortIndexWidgetsFirst).reduce(function (indices, widget) {\n      var indexId = isMultiIndexContext(widget) ? widget.props.indexContextValue.targetedIndex : widget.props.indexId;\n      var widgets = indices[indexId] || [];\n      return _objectSpread(_objectSpread({}, indices), {}, _defineProperty({}, indexId, widgets.concat(widget)));\n    }, {});\n    var derivedParameters = Object.keys(derivedIndices).map(function (indexId) {\n      return {\n        parameters: derivedIndices[indexId].reduce(function (res, widget) {\n          return widget.getSearchParameters(res);\n        }, sharedParameters),\n        indexId: indexId\n      };\n    });\n    return {\n      mainParameters: mainParameters,\n      derivedParameters: derivedParameters\n    };\n  }\n  function search() {\n    if (!skip) {\n      var _getSearchParameters = getSearchParameters(helper.state),\n        mainParameters = _getSearchParameters.mainParameters,\n        derivedParameters = _getSearchParameters.derivedParameters;\n      searchCounter = derivedParameters.length + 1;\n\n      // We have to call `slice` because the method `detach` on the derived\n      // helpers mutates the value `derivedHelpers`. The `forEach` loop does\n      // not iterate on each value and we're not able to correctly clear the\n      // previous derived helpers (memory leak + useless requests).\n      helper.derivedHelpers.slice().forEach(function (derivedHelper) {\n        // Since we detach the derived helpers on **every** new search they\n        // won't receive intermediate results in case of a stalled search.\n        // Only the last result is dispatched by the derived helper because\n        // they are not detached yet:\n        //\n        // - a -> main helper receives results\n        // - ap -> main helper receives results\n        // - app -> main helper + derived helpers receive results\n        //\n        // The quick fix is to avoid to detach them on search but only once they\n        // received the results. But it means that in case of a stalled search\n        // all the derived helpers not detached yet register a new search inside\n        // the helper. The number grows fast in case of a bad network and it's\n        // not deterministic.\n        derivedHelper.detach();\n      });\n      derivedParameters.forEach(function (_ref2) {\n        var indexId = _ref2.indexId,\n          parameters = _ref2.parameters;\n        var derivedHelper = helper.derive(function () {\n          return parameters;\n        });\n        derivedHelper.on('result', handleSearchSuccess({\n          indexId: indexId\n        })).on('error', handleSearchError);\n      });\n      helper.setState(mainParameters);\n      helper.search();\n    }\n  }\n  function handleSearchSuccess(_ref3) {\n    var indexId = _ref3.indexId;\n    return function (event) {\n      searchCounter--;\n      var state = store.getState();\n      var isDerivedHelpersEmpty = !helper.derivedHelpers.length;\n      var results = state.results ? state.results : {};\n\n      // Switching from mono index to multi index and vice versa must reset the\n      // results to an empty object, otherwise we keep reference of stalled and\n      // unused results.\n      results = !isDerivedHelpersEmpty && results.getFacetByName ? {} : results;\n      if (!isDerivedHelpersEmpty) {\n        results = _objectSpread(_objectSpread({}, results), {}, _defineProperty({}, indexId, event.results));\n      } else {\n        results = event.results;\n      }\n      var currentState = store.getState();\n      var nextIsSearchStalled = currentState.isSearchStalled;\n      if (!helper.hasPendingRequests()) {\n        clearTimeout(stalledSearchTimer);\n        stalledSearchTimer = null;\n        nextIsSearchStalled = false;\n      }\n      var resultsFacetValues = currentState.resultsFacetValues,\n        partialState = _objectWithoutProperties(currentState, _excluded);\n      store.setState(_objectSpread(_objectSpread({}, partialState), {}, {\n        results: results,\n        isSearchStalled: nextIsSearchStalled,\n        searching: searchCounter > 0,\n        error: null\n      }));\n    };\n  }\n  function handleSearchError(_ref4) {\n    var error = _ref4.error;\n    var currentState = store.getState();\n    var nextIsSearchStalled = currentState.isSearchStalled;\n    if (!helper.hasPendingRequests()) {\n      clearTimeout(stalledSearchTimer);\n      nextIsSearchStalled = false;\n    }\n    var resultsFacetValues = currentState.resultsFacetValues,\n      partialState = _objectWithoutProperties(currentState, _excluded2);\n    store.setState(_objectSpread(_objectSpread({}, partialState), {}, {\n      isSearchStalled: nextIsSearchStalled,\n      error: error,\n      searching: false\n    }));\n  }\n  function handleNewSearch() {\n    if (!stalledSearchTimer) {\n      stalledSearchTimer = setTimeout(function () {\n        var _store$getState = store.getState(),\n          resultsFacetValues = _store$getState.resultsFacetValues,\n          partialState = _objectWithoutProperties(_store$getState, _excluded3);\n        store.setState(_objectSpread(_objectSpread({}, partialState), {}, {\n          isSearchStalled: true\n        }));\n      }, stalledSearchDelay);\n    }\n  }\n  function hydrateSearchClient(client, results) {\n    if (!results) {\n      return;\n    }\n\n    // Disable cache hydration on:\n    // - Algoliasearch API Client < v4 with cache disabled\n    // - Third party clients (detected by the `addAlgoliaAgent` function missing)\n\n    if ((!client.transporter || client._cacheHydrated) && (!client._useCache || typeof client.addAlgoliaAgent !== 'function')) {\n      return;\n    }\n\n    // Algoliasearch API Client >= v4\n    // To hydrate the client we need to populate the cache with the data from\n    // the server (done in `hydrateSearchClientWithMultiIndexRequest` or\n    // `hydrateSearchClientWithSingleIndexRequest`). But since there is no way\n    // for us to compute the key the same way as `algoliasearch-client` we need\n    // to populate it on a custom key and override the `search` method to\n    // search on it first.\n    if (client.transporter && !client._cacheHydrated) {\n      client._cacheHydrated = true;\n      var baseMethod = client.search;\n      client.search = function (requests) {\n        for (var _len2 = arguments.length, methodArgs = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n          methodArgs[_key2 - 1] = arguments[_key2];\n        }\n        var requestsWithSerializedParams = requests.map(function (request) {\n          return _objectSpread(_objectSpread({}, request), {}, {\n            params: serializeQueryParameters(request.params)\n          });\n        });\n        return client.transporter.responsesCache.get({\n          method: 'search',\n          args: [requestsWithSerializedParams].concat(methodArgs)\n        }, function () {\n          return baseMethod.apply(void 0, [requests].concat(methodArgs));\n        });\n      };\n    }\n    if (Array.isArray(results.results)) {\n      hydrateSearchClientWithMultiIndexRequest(client, results.results);\n      return;\n    }\n    hydrateSearchClientWithSingleIndexRequest(client, results);\n  }\n  function hydrateSearchClientWithMultiIndexRequest(client, results) {\n    // Algoliasearch API Client >= v4\n    // Populate the cache with the data from the server\n    if (client.transporter) {\n      client.transporter.responsesCache.set({\n        method: 'search',\n        args: [results.reduce(function (acc, result) {\n          return acc.concat(result.rawResults.map(function (request) {\n            return {\n              indexName: request.index,\n              params: request.params\n            };\n          }));\n        }, [])]\n      }, {\n        results: results.reduce(function (acc, result) {\n          return acc.concat(result.rawResults);\n        }, [])\n      });\n      return;\n    }\n\n    // Algoliasearch API Client < v4\n    // Prior to client v4 we didn't have a proper API to hydrate the client\n    // cache from the outside. The following code populates the cache with\n    // a single-index result. You can find more information about the\n    // computation of the key inside the client (see link below).\n    // https://github.com/algolia/algoliasearch-client-javascript/blob/c27e89ff92b2a854ae6f40dc524bffe0f0cbc169/src/AlgoliaSearchCore.js#L232-L240\n    var key = \"/1/indexes/*/queries_body_\".concat(JSON.stringify({\n      requests: results.reduce(function (acc, result) {\n        return acc.concat(result.rawResults.map(function (request) {\n          return {\n            indexName: request.index,\n            params: request.params\n          };\n        }));\n      }, [])\n    }));\n    client.cache = _objectSpread(_objectSpread({}, client.cache), {}, _defineProperty({}, key, JSON.stringify({\n      results: results.reduce(function (acc, result) {\n        return acc.concat(result.rawResults);\n      }, [])\n    })));\n  }\n  function hydrateSearchClientWithSingleIndexRequest(client, results) {\n    // Algoliasearch API Client >= v4\n    // Populate the cache with the data from the server\n    if (client.transporter) {\n      client.transporter.responsesCache.set({\n        method: 'search',\n        args: [results.rawResults.map(function (request) {\n          return {\n            indexName: request.index,\n            params: request.params\n          };\n        })]\n      }, {\n        results: results.rawResults\n      });\n      return;\n    }\n    // Algoliasearch API Client < v4\n    // Prior to client v4 we didn't have a proper API to hydrate the client\n    // cache from the outside. The following code populates the cache with\n    // a single-index result. You can find more information about the\n    // computation of the key inside the client (see link below).\n    // https://github.com/algolia/algoliasearch-client-javascript/blob/c27e89ff92b2a854ae6f40dc524bffe0f0cbc169/src/AlgoliaSearchCore.js#L232-L240\n    var key = \"/1/indexes/*/queries_body_\".concat(JSON.stringify({\n      requests: results.rawResults.map(function (request) {\n        return {\n          indexName: request.index,\n          params: request.params\n        };\n      })\n    }));\n    client.cache = _objectSpread(_objectSpread({}, client.cache), {}, _defineProperty({}, key, JSON.stringify({\n      results: results.rawResults\n    })));\n  }\n  function hydrateResultsState(results) {\n    if (!results) {\n      return null;\n    }\n    if (Array.isArray(results.results)) {\n      return results.results.reduce(function (acc, result) {\n        return _objectSpread(_objectSpread({}, acc), {}, _defineProperty({}, result._internalIndexId, new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(result.state), result.rawResults)));\n      }, {});\n    }\n    return new algoliasearchHelper.SearchResults(new algoliasearchHelper.SearchParameters(results.state), results.rawResults);\n  }\n\n  // Called whenever a widget has been rendered with new props.\n  function onWidgetsUpdate() {\n    var metadata = getMetadata(store.getState().widgets);\n    store.setState(_objectSpread(_objectSpread({}, store.getState()), {}, {\n      metadata: metadata,\n      searching: true\n    }));\n\n    // Since the `getSearchParameters` method of widgets also depends on props,\n    // the result search parameters might have changed.\n    search();\n  }\n  function transitionState(nextSearchState) {\n    var searchState = store.getState().widgets;\n    return widgetsManager.getWidgets().filter(function (widget) {\n      return Boolean(widget.transitionState);\n    }).reduce(function (res, widget) {\n      return widget.transitionState(searchState, res);\n    }, nextSearchState);\n  }\n  function onExternalStateUpdate(nextSearchState) {\n    var metadata = getMetadata(nextSearchState);\n    store.setState(_objectSpread(_objectSpread({}, store.getState()), {}, {\n      widgets: nextSearchState,\n      metadata: metadata,\n      searching: true\n    }));\n    search();\n  }\n  function onSearchForFacetValues(_ref5) {\n    var facetName = _ref5.facetName,\n      query = _ref5.query,\n      _ref5$maxFacetHits = _ref5.maxFacetHits,\n      maxFacetHits = _ref5$maxFacetHits === void 0 ? 10 : _ref5$maxFacetHits;\n    // The values 1, 100 are the min / max values that the engine accepts.\n    // see: https://www.algolia.com/doc/api-reference/api-parameters/maxFacetHits\n    var maxFacetHitsWithinRange = Math.max(1, Math.min(maxFacetHits, 100));\n    store.setState(_objectSpread(_objectSpread({}, store.getState()), {}, {\n      searchingForFacetValues: true\n    }));\n    helper.searchForFacetValues(facetName, query, maxFacetHitsWithinRange).then(function (content) {\n      var _objectSpread7;\n      store.setState(_objectSpread(_objectSpread({}, store.getState()), {}, {\n        error: null,\n        searchingForFacetValues: false,\n        resultsFacetValues: _objectSpread(_objectSpread({}, store.getState().resultsFacetValues), {}, (_objectSpread7 = {}, _defineProperty(_objectSpread7, facetName, content.facetHits), _defineProperty(_objectSpread7, \"query\", query), _objectSpread7))\n      }));\n    }, function (error) {\n      store.setState(_objectSpread(_objectSpread({}, store.getState()), {}, {\n        searchingForFacetValues: false,\n        error: error\n      }));\n    }).catch(function (error) {\n      // Since setState is synchronous, any error that occurs in the render of a\n      // component will be swallowed by this promise.\n      // This is a trick to make the error show up correctly in the console.\n      // See http://stackoverflow.com/a/30741722/969302\n      setTimeout(function () {\n        throw error;\n      });\n    });\n  }\n  function updateIndex(newIndex) {\n    initialSearchParameters = initialSearchParameters.setIndex(newIndex);\n    // No need to trigger a new search here as the widgets will also update and trigger it if needed.\n  }\n\n  function getWidgetsIds() {\n    return store.getState().metadata.reduce(function (res, meta) {\n      return typeof meta.id !== 'undefined' ? res.concat(meta.id) : res;\n    }, []);\n  }\n  return {\n    store: store,\n    widgetsManager: widgetsManager,\n    getWidgetsIds: getWidgetsIds,\n    getSearchParameters: getSearchParameters,\n    onSearchForFacetValues: onSearchForFacetValues,\n    onExternalStateUpdate: onExternalStateUpdate,\n    transitionState: transitionState,\n    updateClient: updateClient,\n    updateIndex: updateIndex,\n    clearCache: clearCache,\n    skipSearch: skipSearch\n  };\n}\nfunction hydrateMetadata(resultsState) {\n  if (!resultsState) {\n    return [];\n  }\n\n  // add a value noop, which gets replaced once the widgets are mounted\n  return resultsState.metadata.map(function (datum) {\n    return _objectSpread(_objectSpread({\n      value: function value() {\n        return {};\n      }\n    }, datum), {}, {\n      items: datum.items && datum.items.map(function (item) {\n        return _objectSpread(_objectSpread({\n          value: function value() {\n            return {};\n          }\n        }, item), {}, {\n          items: item.items && item.items.map(function (nestedItem) {\n            return _objectSpread({\n              value: function value() {\n                return {};\n              }\n            }, nestedItem);\n          })\n        });\n      })\n    });\n  });\n}","export default function createStore(initialState) {\n  var state = initialState;\n  var listeners = [];\n  return {\n    getState: function getState() {\n      return state;\n    },\n    setState: function setState(nextState) {\n      state = nextState;\n      listeners.forEach(function (listener) {\n        return listener();\n      });\n    },\n    subscribe: function subscribe(listener) {\n      listeners.push(listener);\n      return function unsubscribe() {\n        listeners.splice(listeners.indexOf(listener), 1);\n      };\n    }\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nexport function isMetadataEnabled() {\n  return (typeof window === \"undefined\" ? \"undefined\" : _typeof(window)) === 'object' && _typeof(window.navigator) === 'object' && typeof window.navigator.userAgent === 'string' && window.navigator.userAgent.includes('Algolia Crawler') && _typeof(window.document) === 'object';\n}\nexport function getMetadataPayload(widgets, searchClient) {\n  var internalProps = ['contextValue', 'indexContextValue'];\n  var widgetsPayload = widgets.map(function (_ref) {\n    var props = _ref.props,\n      constructor = _ref.constructor;\n    var _ref2 = constructor._connectorDesc || {},\n      _ref2$defaultProps = _ref2.defaultProps,\n      defaultProps = _ref2$defaultProps === void 0 ? {} : _ref2$defaultProps,\n      _ref2$displayName = _ref2.displayName,\n      displayName = _ref2$displayName === void 0 ? constructor.displayName : _ref2$displayName;\n    return {\n      displayName: displayName,\n      $$type: constructor.$$type,\n      $$widgetType: constructor.$$widgetType,\n      params: Object.keys(props).filter(function (prop) {\n        return !internalProps.includes(prop) && defaultProps[prop] !== props[prop] && props[prop] !== undefined;\n      })\n    };\n  });\n  var client = searchClient;\n  var ua = client.transporter && client.transporter.userAgent ? client.transporter.userAgent.value : client._ua;\n  return {\n    ua: ua,\n    widgets: widgetsPayload\n  };\n}\nexport function injectMetadata(widgets, searchClient) {\n  var payloadContainer = document.createElement('meta');\n  var refNode = document.querySelector('head');\n  payloadContainer.name = 'algolia:metadata';\n  var payload = getMetadataPayload(widgets, searchClient);\n  payloadContainer.content = JSON.stringify(payload);\n  refNode.appendChild(payloadContainer);\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport PropTypes from 'prop-types';\nimport React, { Component, Children } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { InstantSearchProvider } from \"../core/context.js\";\nimport createInstantSearchManager from \"../core/createInstantSearchManager.js\";\nimport { isMetadataEnabled, injectMetadata } from \"../core/metadata.js\";\nfunction isControlled(props) {\n  return Boolean(props.searchState);\n}\n\n/**\n * @description\n * `<InstantSearch>` is the root component of all React InstantSearch implementations.\n * It provides all the connected components (aka widgets) a means to interact\n * with the searchState.\n * @kind widget\n * @name <InstantSearch>\n * @requirements You will need to have an Algolia account to be able to use this widget.\n * [Create one now](https://www.algolia.com/users/sign_up).\n * @propType {string} indexName - Main index in which to search.\n * @propType {boolean} [refresh=false] - Flag to activate when the cache needs to be cleared so that the front-end is updated when a change occurs in the index.\n * @propType {object} [searchClient] - Provide a custom search client.\n * @propType {func} [onSearchStateChange] - Function to be called everytime a new search is done. Useful for [URL Routing](guide/Routing.html).\n * @propType {object} [searchState] - Object to inject some search state. Switches the InstantSearch component in controlled mode. Useful for [URL Routing](guide/Routing.html).\n * @propType {func} [createURL] - Function to call when creating links, useful for [URL Routing](guide/Routing.html).\n * @propType {SearchResults|SearchResults[]} [resultsState] - Use this to inject the results that will be used at first rendering. Those results are found by using the `findResultsState` function. Useful for [Server Side Rendering](guide/Server-side_rendering.html).\n * @propType {number} [stalledSearchDelay=200] - The amount of time before considering that the search takes too much time. The time is expressed in milliseconds.\n * @propType {{ Root: string|function, props: object }} [root] - Use this to customize the root element. Default value: `{ Root: 'div' }`\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\nvar InstantSearch = /*#__PURE__*/function (_Component) {\n  _inherits(InstantSearch, _Component);\n  var _super = _createSuper(InstantSearch);\n  function InstantSearch(props) {\n    var _this;\n    _classCallCheck(this, InstantSearch);\n    _this = _super.call(this, props);\n    _defineProperty(_assertThisInitialized(_this), \"cleanupTimerRef\", null);\n    _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n    var instantSearchManager = createInstantSearchManager({\n      indexName: _this.props.indexName,\n      searchClient: _this.props.searchClient,\n      initialState: _this.props.searchState || {},\n      resultsState: _this.props.resultsState,\n      stalledSearchDelay: _this.props.stalledSearchDelay\n    });\n    var contextValue = {\n      store: instantSearchManager.store,\n      widgetsManager: instantSearchManager.widgetsManager,\n      mainTargetedIndex: _this.props.indexName,\n      onInternalStateUpdate: _this.onWidgetsInternalStateUpdate.bind(_assertThisInitialized(_this)),\n      createHrefForState: _this.createHrefForState.bind(_assertThisInitialized(_this)),\n      onSearchForFacetValues: _this.onSearchForFacetValues.bind(_assertThisInitialized(_this)),\n      onSearchStateChange: _this.onSearchStateChange.bind(_assertThisInitialized(_this)),\n      onSearchParameters: _this.onSearchParameters.bind(_assertThisInitialized(_this))\n    };\n    _this.state = {\n      isControlled: isControlled(_this.props),\n      instantSearchManager: instantSearchManager,\n      contextValue: contextValue\n    };\n    return _this;\n  }\n  _createClass(InstantSearch, [{\n    key: \"componentDidUpdate\",\n    value: function componentDidUpdate(prevProps) {\n      var prevIsControlled = isControlled(prevProps);\n      if (prevIsControlled && !this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being controlled to uncontrolled\");\n      }\n      if (!prevIsControlled && this.state.isControlled) {\n        throw new Error(\"You can't switch <InstantSearch> from being uncontrolled to controlled\");\n      }\n      if (this.props.refresh !== prevProps.refresh && this.props.refresh) {\n        this.state.instantSearchManager.clearCache();\n      }\n      if (prevProps.indexName !== this.props.indexName) {\n        this.state.instantSearchManager.updateIndex(this.props.indexName);\n      }\n      if (prevProps.searchClient !== this.props.searchClient) {\n        this.state.instantSearchManager.updateClient(this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentDidMount\",\n    value: function componentDidMount() {\n      if (this.cleanupTimerRef) {\n        clearTimeout(this.cleanupTimerRef);\n        this.cleanupTimerRef = null;\n      }\n      if (isMetadataEnabled()) {\n        injectMetadata(this.state.instantSearchManager.widgetsManager.getWidgets(), this.props.searchClient);\n      }\n    }\n  }, {\n    key: \"componentWillUnmount\",\n    value: function componentWillUnmount() {\n      var _this2 = this;\n      this.cleanupTimerRef = setTimeout(function () {\n        _this2.isUnmounting = true;\n        _this2.state.instantSearchManager.skipSearch();\n      });\n    }\n  }, {\n    key: \"createHrefForState\",\n    value: function createHrefForState(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      return this.state.isControlled && this.props.createURL ? this.props.createURL(searchState, this.getKnownKeys()) : '#';\n    }\n  }, {\n    key: \"onWidgetsInternalStateUpdate\",\n    value: function onWidgetsInternalStateUpdate(searchState) {\n      searchState = this.state.instantSearchManager.transitionState(searchState);\n      this.onSearchStateChange(searchState);\n      if (!this.state.isControlled) {\n        this.state.instantSearchManager.onExternalStateUpdate(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchStateChange\",\n    value: function onSearchStateChange(searchState) {\n      if (this.props.onSearchStateChange && !this.isUnmounting) {\n        this.props.onSearchStateChange(searchState);\n      }\n    }\n  }, {\n    key: \"onSearchParameters\",\n    value: function onSearchParameters(getSearchParameters, context, props, getMetadata, displayName) {\n      if (this.props.onSearchParameters) {\n        var _searchState = this.props.searchState ? this.props.searchState : {};\n        this.props.onSearchParameters(getSearchParameters, context, props, _searchState);\n      }\n      if (this.props.widgetsCollector) {\n        var _searchState2 = this.props.searchState ? this.props.searchState : {};\n        this.props.widgetsCollector({\n          getSearchParameters: getSearchParameters,\n          getMetadata: getMetadata,\n          context: context,\n          props: props,\n          searchState: _searchState2,\n          displayName: displayName\n        });\n      }\n    }\n  }, {\n    key: \"onSearchForFacetValues\",\n    value: function onSearchForFacetValues(searchState) {\n      this.state.instantSearchManager.onSearchForFacetValues(searchState);\n    }\n  }, {\n    key: \"getKnownKeys\",\n    value: function getKnownKeys() {\n      return this.state.instantSearchManager.getWidgetsIds();\n    }\n  }, {\n    key: \"render\",\n    value: function render() {\n      if (Children.count(this.props.children) === 0) {\n        return null;\n      }\n      return /*#__PURE__*/React.createElement(InstantSearchProvider, {\n        value: this.state.contextValue\n      }, this.props.children);\n    }\n  }], [{\n    key: \"getDerivedStateFromProps\",\n    value: function getDerivedStateFromProps(nextProps, prevState) {\n      var nextIsControlled = isControlled(nextProps);\n      var previousSearchState = prevState.instantSearchManager.store.getState().widgets;\n      var nextSearchState = nextProps.searchState;\n      if (nextIsControlled && !isEqual(previousSearchState, nextSearchState)) {\n        prevState.instantSearchManager.onExternalStateUpdate(nextProps.searchState);\n      }\n      return {\n        isControlled: nextIsControlled,\n        contextValue: _objectSpread(_objectSpread({}, prevState.contextValue), {}, {\n          mainTargetedIndex: nextProps.indexName\n        })\n      };\n    }\n  }]);\n  return InstantSearch;\n}(Component);\n_defineProperty(InstantSearch, \"defaultProps\", {\n  stalledSearchDelay: 200,\n  refresh: false\n});\n_defineProperty(InstantSearch, \"propTypes\", {\n  // @TODO: These props are currently constant.\n  indexName: PropTypes.string.isRequired,\n  searchClient: PropTypes.shape({\n    search: PropTypes.func.isRequired,\n    searchForFacetValues: PropTypes.func,\n    addAlgoliaAgent: PropTypes.func,\n    clearCache: PropTypes.func\n  }).isRequired,\n  createURL: PropTypes.func,\n  refresh: PropTypes.bool,\n  searchState: PropTypes.object,\n  onSearchStateChange: PropTypes.func,\n  onSearchParameters: PropTypes.func,\n  widgetsCollector: PropTypes.func,\n  resultsState: PropTypes.oneOfType([PropTypes.object, PropTypes.array]),\n  children: PropTypes.node,\n  stalledSearchDelay: PropTypes.number\n});\nexport default InstantSearch;","var _excluded = [\"contextValue\"];\nfunction _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { Component } from 'react';\nimport isEqual from 'react-fast-compare';\nimport { InstantSearchConsumer, IndexConsumer } from \"./context.js\";\nimport { shallowEqual, getDisplayName, removeEmptyKey } from \"./utils.js\";\n/**\n * Connectors are the HOC used to transform React components\n * into InstantSearch widgets.\n * In order to simplify the construction of such connectors\n * `createConnector` takes a description and transform it into\n * a connector.\n * @param {ConnectorDescription} connectorDesc the description of the connector\n * @return {Connector} a function that wraps a component into\n * an instantsearch connected one.\n */\nexport function createConnectorWithoutContext(connectorDesc) {\n  if (!connectorDesc.displayName) {\n    throw new Error('`createConnector` requires you to provide a `displayName` property.');\n  }\n  var isWidget = typeof connectorDesc.getSearchParameters === 'function' || typeof connectorDesc.getMetadata === 'function' || typeof connectorDesc.transitionState === 'function';\n  return function (Composed) {\n    var additionalWidgetProperties = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    var Connector = /*#__PURE__*/function (_Component) {\n      _inherits(Connector, _Component);\n      var _super = _createSuper(Connector);\n      function Connector(props) {\n        var _this;\n        _classCallCheck(this, Connector);\n        _this = _super.call(this, props);\n        _defineProperty(_assertThisInitialized(_this), \"unsubscribe\", void 0);\n        _defineProperty(_assertThisInitialized(_this), \"unregisterWidget\", void 0);\n        _defineProperty(_assertThisInitialized(_this), \"cleanupTimerRef\", null);\n        _defineProperty(_assertThisInitialized(_this), \"isUnmounting\", false);\n        _defineProperty(_assertThisInitialized(_this), \"state\", {\n          providedProps: _this.getProvidedProps(_this.props)\n        });\n        _defineProperty(_assertThisInitialized(_this), \"refine\", function () {\n          var _ref;\n          for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n            args[_key] = arguments[_key];\n          }\n          _this.props.contextValue.onInternalStateUpdate(\n          // refine will always be defined here because the prop is only given conditionally\n          (_ref = connectorDesc.refine).call.apply(_ref, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n        _defineProperty(_assertThisInitialized(_this), \"createURL\", function () {\n          var _ref2;\n          for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n            args[_key2] = arguments[_key2];\n          }\n          return _this.props.contextValue.createHrefForState(\n          // refine will always be defined here because the prop is only given conditionally\n          (_ref2 = connectorDesc.refine).call.apply(_ref2, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n        _defineProperty(_assertThisInitialized(_this), \"searchForFacetValues\", function () {\n          var _ref3;\n          for (var _len3 = arguments.length, args = new Array(_len3), _key3 = 0; _key3 < _len3; _key3++) {\n            args[_key3] = arguments[_key3];\n          }\n          _this.props.contextValue.onSearchForFacetValues(\n          // searchForFacetValues will always be defined here because the prop is only given conditionally\n          (_ref3 = connectorDesc.searchForFacetValues).call.apply(_ref3, [_assertThisInitialized(_this), _this.props, _this.props.contextValue.store.getState().widgets].concat(args)));\n        });\n        if (connectorDesc.getSearchParameters) {\n          _this.props.contextValue.onSearchParameters(connectorDesc.getSearchParameters.bind(_assertThisInitialized(_this)), {\n            ais: _this.props.contextValue,\n            multiIndexContext: _this.props.indexContextValue\n          }, _this.props, connectorDesc.getMetadata && connectorDesc.getMetadata.bind(_assertThisInitialized(_this)), connectorDesc.displayName);\n        }\n        return _this;\n      }\n      _createClass(Connector, [{\n        key: \"componentDidMount\",\n        value: function componentDidMount() {\n          var _this2 = this;\n          if (this.cleanupTimerRef) {\n            clearTimeout(this.cleanupTimerRef);\n            this.cleanupTimerRef = null;\n          }\n          this.unsubscribe = this.props.contextValue.store.subscribe(function () {\n            if (!_this2.isUnmounting) {\n              _this2.setState({\n                providedProps: _this2.getProvidedProps(_this2.props)\n              });\n            }\n          });\n          if (isWidget) {\n            this.unregisterWidget = this.props.contextValue.widgetsManager.registerWidget(this);\n          }\n        }\n      }, {\n        key: \"shouldComponentUpdate\",\n        value: function shouldComponentUpdate(nextProps, nextState) {\n          if (typeof connectorDesc.shouldComponentUpdate === 'function') {\n            return connectorDesc.shouldComponentUpdate.call(this, this.props, nextProps, this.state, nextState);\n          }\n          var propsEqual = shallowEqual(this.props, nextProps);\n          if (this.state.providedProps === null || nextState.providedProps === null) {\n            if (this.state.providedProps === nextState.providedProps) {\n              return !propsEqual;\n            }\n            return true;\n          }\n          return !propsEqual || !shallowEqual(this.state.providedProps, nextState.providedProps);\n        }\n      }, {\n        key: \"componentDidUpdate\",\n        value: function componentDidUpdate(prevProps) {\n          if (!isEqual(prevProps, this.props)) {\n            this.setState({\n              providedProps: this.getProvidedProps(this.props)\n            });\n            if (isWidget) {\n              this.props.contextValue.widgetsManager.update();\n              if (typeof connectorDesc.transitionState === 'function') {\n                this.props.contextValue.onSearchStateChange(connectorDesc.transitionState.call(this, this.props, this.props.contextValue.store.getState().widgets, this.props.contextValue.store.getState().widgets));\n              }\n            }\n          }\n        }\n      }, {\n        key: \"componentWillUnmount\",\n        value: function componentWillUnmount() {\n          var _this3 = this;\n          this.cleanupTimerRef = setTimeout(function () {\n            _this3.isUnmounting = true;\n            if (_this3.unsubscribe) {\n              _this3.unsubscribe();\n            }\n            if (_this3.unregisterWidget) {\n              _this3.unregisterWidget();\n              if (typeof connectorDesc.cleanUp === 'function') {\n                var nextState = connectorDesc.cleanUp.call(_this3, _this3.props, _this3.props.contextValue.store.getState().widgets);\n                _this3.props.contextValue.store.setState(_objectSpread(_objectSpread({}, _this3.props.contextValue.store.getState()), {}, {\n                  widgets: nextState\n                }));\n                _this3.props.contextValue.onSearchStateChange(removeEmptyKey(nextState));\n              }\n            }\n          });\n        }\n      }, {\n        key: \"getProvidedProps\",\n        value: function getProvidedProps(props) {\n          var _this$props$contextVa = this.props.contextValue.store.getState(),\n            widgets = _this$props$contextVa.widgets,\n            results = _this$props$contextVa.results,\n            resultsFacetValues = _this$props$contextVa.resultsFacetValues,\n            searching = _this$props$contextVa.searching,\n            searchingForFacetValues = _this$props$contextVa.searchingForFacetValues,\n            isSearchStalled = _this$props$contextVa.isSearchStalled,\n            metadata = _this$props$contextVa.metadata,\n            error = _this$props$contextVa.error;\n          var searchResults = {\n            results: results,\n            searching: searching,\n            searchingForFacetValues: searchingForFacetValues,\n            isSearchStalled: isSearchStalled,\n            error: error\n          };\n          return connectorDesc.getProvidedProps.call(this, props, widgets, searchResults, metadata,\n          // @MAJOR: move this attribute on the `searchResults` it doesn't\n          // makes sense to have it into a separate argument. The search\n          // flags are on the object why not the results?\n          resultsFacetValues);\n        }\n      }, {\n        key: \"getSearchParameters\",\n        value: function getSearchParameters(searchParameters) {\n          if (typeof connectorDesc.getSearchParameters === 'function') {\n            return connectorDesc.getSearchParameters.call(this, searchParameters, this.props, this.props.contextValue.store.getState().widgets);\n          }\n          return null;\n        }\n      }, {\n        key: \"getMetadata\",\n        value: function getMetadata(nextWidgetsState) {\n          if (typeof connectorDesc.getMetadata === 'function') {\n            return connectorDesc.getMetadata.call(this, this.props, nextWidgetsState);\n          }\n          return {};\n        }\n      }, {\n        key: \"transitionState\",\n        value: function transitionState(prevWidgetsState, nextWidgetsState) {\n          if (typeof connectorDesc.transitionState === 'function') {\n            return connectorDesc.transitionState.call(this, this.props, prevWidgetsState, nextWidgetsState);\n          }\n          return nextWidgetsState;\n        }\n      }, {\n        key: \"render\",\n        value: function render() {\n          var _this$props = this.props,\n            contextValue = _this$props.contextValue,\n            props = _objectWithoutProperties(_this$props, _excluded);\n          var providedProps = this.state.providedProps;\n          if (providedProps === null) {\n            return null;\n          }\n          var refineProps = typeof connectorDesc.refine === 'function' ? {\n            refine: this.refine,\n            createURL: this.createURL\n          } : {};\n          var searchForFacetValuesProps = typeof connectorDesc.searchForFacetValues === 'function' ? {\n            searchForItems: this.searchForFacetValues\n          } : {};\n          return /*#__PURE__*/React.createElement(Composed, _extends({}, props, providedProps, refineProps, searchForFacetValuesProps));\n        }\n      }]);\n      return Connector;\n    }(Component);\n    _defineProperty(Connector, \"displayName\", \"\".concat(connectorDesc.displayName, \"(\").concat(getDisplayName(Composed), \")\"));\n    _defineProperty(Connector, \"$$type\", connectorDesc.$$type);\n    _defineProperty(Connector, \"$$widgetType\", additionalWidgetProperties.$$widgetType);\n    _defineProperty(Connector, \"propTypes\", connectorDesc.propTypes);\n    _defineProperty(Connector, \"defaultProps\", connectorDesc.defaultProps);\n    _defineProperty(Connector, \"_connectorDesc\", connectorDesc);\n    return Connector;\n  };\n}\nvar createConnectorWithContext = function createConnectorWithContext(connectorDesc) {\n  return function (Composed, additionalWidgetProperties) {\n    var Connector = createConnectorWithoutContext(connectorDesc)(Composed, additionalWidgetProperties);\n    var ConnectorWrapper = function ConnectorWrapper(props) {\n      return /*#__PURE__*/React.createElement(InstantSearchConsumer, null, function (contextValue) {\n        return /*#__PURE__*/React.createElement(IndexConsumer, null, function (indexContextValue) {\n          return /*#__PURE__*/React.createElement(Connector, _extends({\n            contextValue: contextValue,\n            indexContextValue: indexContextValue\n          }, props));\n        });\n      });\n    };\n    return ConnectorWrapper;\n  };\n};\nexport default createConnectorWithContext;","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nvar _excluded = [\"children\", \"contextValue\", \"indexContextValue\"],\n  _excluded2 = [\"children\", \"contextValue\", \"indexContextValue\"];\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); enumerableOnly && (symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; })), keys.push.apply(keys, symbols); } return keys; }\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = null != arguments[i] ? arguments[i] : {}; i % 2 ? ownKeys(Object(source), !0).forEach(function (key) { _defineProperty(target, key, source[key]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)) : ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } return target; }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nfunction _objectWithoutProperties(source, excluded) { if (source == null) return {}; var target = _objectWithoutPropertiesLoose(source, excluded); var key, i; if (Object.getOwnPropertySymbols) { var sourceSymbolKeys = Object.getOwnPropertySymbols(source); for (i = 0; i < sourceSymbolKeys.length; i++) { key = sourceSymbolKeys[i]; if (excluded.indexOf(key) >= 0) continue; if (!Object.prototype.propertyIsEnumerable.call(source, key)) continue; target[key] = source[key]; } } return target; }\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\nimport createConnector from \"../core/createConnector.js\";\nimport { refineValue, getIndexId, hasMultipleIndices } from \"../core/indexUtils.js\";\nimport { omit } from \"../core/utils.js\";\nfunction getId() {\n  return 'configure';\n}\nexport default createConnector({\n  displayName: 'AlgoliaConfigure',\n  $$type: 'ais.configure',\n  getProvidedProps: function getProvidedProps() {\n    return {};\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props) {\n    var children = props.children,\n      contextValue = props.contextValue,\n      indexContextValue = props.indexContextValue,\n      items = _objectWithoutProperties(props, _excluded);\n    return searchParameters.setQueryParameters(items);\n  },\n  transitionState: function transitionState(props, prevSearchState, nextSearchState) {\n    var id = getId();\n    var children = props.children,\n      contextValue = props.contextValue,\n      indexContextValue = props.indexContextValue,\n      items = _objectWithoutProperties(props, _excluded2);\n    var propKeys = Object.keys(props);\n    var nonPresentKeys = this._props ? Object.keys(this._props).filter(function (prop) {\n      return propKeys.indexOf(prop) === -1;\n    }) : [];\n    this._props = props;\n    var nextValue = _defineProperty({}, id, _objectSpread(_objectSpread({}, omit(nextSearchState[id], nonPresentKeys)), items));\n    return refineValue(nextSearchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    var id = getId();\n    var indexId = getIndexId({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    var subState = hasMultipleIndices({\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }) && searchState.indices ? searchState.indices[indexId] : searchState;\n    var configureKeys = subState && subState[id] ? Object.keys(subState[id]) : [];\n    var configureState = configureKeys.reduce(function (acc, item) {\n      if (!props[item]) {\n        acc[item] = subState[id][item];\n      }\n      return acc;\n    }, {});\n    var nextValue = _defineProperty({}, id, configureState);\n    return refineValue(searchState, nextValue, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  }\n});","import connectConfigure from \"../connectors/connectConfigure.js\";\n\n/**\n * Configure is a widget that lets you provide raw search parameters\n * to the Algolia API.\n *\n * Any of the props added to this widget will be forwarded to Algolia. For more information\n * on the different parameters that can be set, have a look at the\n * [reference](https://www.algolia.com/doc/api-client/javascript/search#search-parameters).\n *\n * This widget can be used either with react-dom and react-native. It will not render anything\n * on screen, only configure some parameters.\n *\n * Read more in the [Search parameters](guide/Search_parameters.html) guide.\n * @name Configure\n * @kind widget\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, Configure, Hits } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <Configure hitsPerPage={5} />\n *     <Hits />\n *   </InstantSearch>\n * );\n */\n\nexport default connectConfigure(function Configure() {\n  return null;\n}, {\n  $$widgetType: 'ais.configure'\n});","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport PropTypes from 'prop-types';\nimport createConnector from \"../core/createConnector.js\";\nimport { cleanUpValue, refineValue, getCurrentRefinementValue, getIndexId } from \"../core/indexUtils.js\";\nfunction getId() {\n  return 'query';\n}\nfunction getCurrentRefinement(props, searchState, context) {\n  var id = getId(props);\n  var currentRefinement = getCurrentRefinementValue(props, searchState, context, id, '');\n  if (currentRefinement) {\n    return currentRefinement;\n  }\n  return '';\n}\nfunction _refine(props, searchState, nextRefinement, context) {\n  var id = getId();\n  var nextValue = _defineProperty({}, id, nextRefinement);\n  var resetPage = true;\n  return refineValue(searchState, nextValue, context, resetPage);\n}\nfunction _cleanUp(props, searchState, context) {\n  return cleanUpValue(searchState, context, getId());\n}\n\n/**\n * connectSearchBox connector provides the logic to build a widget that will\n * let the user search for a query\n * @name connectSearchBox\n * @kind connector\n * @propType {string} [defaultRefinement] - Provide a default value for the query\n * @providedPropType {function} refine - a function to change the current query\n * @providedPropType {string} currentRefinement - the current query used\n * @providedPropType {boolean} isSearchStalled - a flag that indicates if InstantSearch has detected that searches are stalled\n */\nexport default createConnector({\n  displayName: 'AlgoliaSearchBox',\n  $$type: 'ais.searchBox',\n  propTypes: {\n    defaultRefinement: PropTypes.string\n  },\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    return {\n      currentRefinement: getCurrentRefinement(props, searchState, {\n        ais: props.contextValue,\n        multiIndexContext: props.indexContextValue\n      }),\n      isSearchStalled: searchResults.isSearchStalled\n    };\n  },\n  refine: function refine(props, searchState, nextRefinement) {\n    return _refine(props, searchState, nextRefinement, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  cleanUp: function cleanUp(props, searchState) {\n    return _cleanUp(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n  },\n  getSearchParameters: function getSearchParameters(searchParameters, props, searchState) {\n    return searchParameters.setQuery(getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    }));\n  },\n  getMetadata: function getMetadata(props, searchState) {\n    var id = getId(props);\n    var currentRefinement = getCurrentRefinement(props, searchState, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    return {\n      id: id,\n      index: getIndexId({\n        ais: props.contextValue,\n        multiIndexContext: props.indexContextValue\n      }),\n      items: currentRefinement === null ? [] : [{\n        label: \"\".concat(id, \": \").concat(currentRefinement),\n        value: function value(nextState) {\n          return _refine(props, nextState, '', {\n            ais: props.contextValue,\n            multiIndexContext: props.indexContextValue\n          });\n        },\n        currentRefinement: currentRefinement\n      }]\n    };\n  }\n});","import { useEffect, useState } from 'react'\n\nconst useDebounce = (value, delay) => {\n  const [debouncedValue, setDebouncedValue] = useState(value)\n\n  useEffect(() => {\n    // Update debounced value after delay\n    const handler = setTimeout(() => {\n      setDebouncedValue(value)\n    }, delay)\n\n    return () => {\n      clearTimeout(handler)\n    }\n  }, [value, delay])\n\n  return debouncedValue\n}\n\nexport default useDebounce\n","import React, { useEffect, useState, useCallback } from 'react'\nimport { connectSearchBox } from 'react-instantsearch-dom'\nimport useDebounce from '@components/useDebounce'\nimport SearchInput from './Search.Input'\n\nconst SearchBox = ({\n  refine,\n  delay,\n  focus,\n  handleFocus,\n  handleClose,\n  ...rest\n}) => {\n  const [searchTerm, setSearchTerm] = useState('')\n  const debouncedSearchTerm = useDebounce(searchTerm, 500)\n\n  const searchCharacters = useCallback(\n    searchTerm => {\n      refine(searchTerm)\n    },\n    [refine]\n  )\n\n  // Effect for API call\n  useEffect(() => {\n    if (debouncedSearchTerm) {\n      searchCharacters(debouncedSearchTerm)\n    }\n  }, [debouncedSearchTerm, searchCharacters])\n\n  const handleEsc = e => {\n    //close on esc keypress\n    if (e.keyCode === 27) {\n      e.currentTarget.blur()\n      handleClose()\n    }\n  }\n  return (\n    <>\n      <SearchInput\n        focus={focus}\n        onFocus={handleFocus}\n        onChange={e => setSearchTerm(e.target.value)}\n        onKeyDown={handleEsc}\n        isLoaded\n        {...rest}\n      />\n    </>\n  )\n}\n\nexport default connectSearchBox(SearchBox)\n","import createConnector from \"../core/createConnector.js\";\nimport { HIGHLIGHT_TAGS, parseAlgoliaHit } from \"../core/highlight.js\";\nvar highlight = function highlight(_ref) {\n  var attribute = _ref.attribute,\n    hit = _ref.hit,\n    highlightProperty = _ref.highlightProperty,\n    _ref$preTag = _ref.preTag,\n    preTag = _ref$preTag === void 0 ? HIGHLIGHT_TAGS.highlightPreTag : _ref$preTag,\n    _ref$postTag = _ref.postTag,\n    postTag = _ref$postTag === void 0 ? HIGHLIGHT_TAGS.highlightPostTag : _ref$postTag;\n  return parseAlgoliaHit({\n    attribute: attribute,\n    highlightProperty: highlightProperty,\n    hit: hit,\n    preTag: preTag,\n    postTag: postTag\n  });\n};\n\n/**\n * connectHighlight connector provides the logic to create an highlighter\n * component that will retrieve, parse and render an highlighted attribute\n * from an Algolia hit.\n * @name connectHighlight\n * @kind connector\n * @category connector\n * @providedPropType {function} highlight - function to retrieve and parse an attribute from a hit. It takes a configuration object with 3 attributes: `highlightProperty` which is the property that contains the highlight structure from the records, `attribute` which is the name of the attribute (it can be either a string or an array of strings) to look for and `hit` which is the hit from Algolia. It returns an array of objects `{value: string, isHighlighted: boolean}`. If the element that corresponds to the attribute is an array of strings, it will return a nested array of objects.\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, connectHighlight } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const CustomHighlight = connectHighlight(\n *   ({ highlight, attribute, hit, highlightProperty }) => {\n *     const highlights = highlight({\n *       highlightProperty: '_highlightResult',\n *       attribute,\n *       hit\n *     });\n *\n *     return highlights.map(part => part.isHighlighted ? (\n *       <mark>{part.value}</mark>\n *     ) : (\n *       <span>{part.value}</span>\n *     ));\n *   }\n * );\n *\n * const Hit = ({ hit }) => (\n *   <p>\n *     <CustomHighlight attribute=\"name\" hit={hit} />\n *   </p>\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox defaultRefinement=\"pho\" />\n *     <Hits hitComponent={Hit} />\n *   </InstantSearch>\n * );\n */\nexport default createConnector({\n  displayName: 'AlgoliaHighlighter',\n  $$type: 'ais.highlighter',\n  propTypes: {},\n  getProvidedProps: function getProvidedProps() {\n    return {\n      highlight: highlight\n    };\n  }\n});","function _toConsumableArray(arr) { return _arrayWithoutHoles(arr) || _iterableToArray(arr) || _unsupportedIterableToArray(arr) || _nonIterableSpread(); }\nfunction _nonIterableSpread() { throw new TypeError(\"Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\"); }\nfunction _unsupportedIterableToArray(o, minLen) { if (!o) return; if (typeof o === \"string\") return _arrayLikeToArray(o, minLen); var n = Object.prototype.toString.call(o).slice(8, -1); if (n === \"Object\" && o.constructor) n = o.constructor.name; if (n === \"Map\" || n === \"Set\") return Array.from(o); if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return _arrayLikeToArray(o, minLen); }\nfunction _iterableToArray(iter) { if (typeof Symbol !== \"undefined\" && iter[Symbol.iterator] != null || iter[\"@@iterator\"] != null) return Array.from(iter); }\nfunction _arrayWithoutHoles(arr) { if (Array.isArray(arr)) return _arrayLikeToArray(arr); }\nfunction _arrayLikeToArray(arr, len) { if (len == null || len > arr.length) len = arr.length; for (var i = 0, arr2 = new Array(len); i < len; i++) arr2[i] = arr[i]; return arr2; }\nimport cx from 'classnames';\nexport var createClassNames = function createClassNames(block) {\n  var prefix = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'ais';\n  return function () {\n    for (var _len = arguments.length, elements = new Array(_len), _key = 0; _key < _len; _key++) {\n      elements[_key] = arguments[_key];\n    }\n    var suitElements = elements.filter(function (element) {\n      return element || element === '';\n    }).map(function (element) {\n      var baseClassName = \"\".concat(prefix, \"-\").concat(block);\n      return element ? \"\".concat(baseClassName, \"-\").concat(element) : baseClassName;\n    });\n    return cx(suitElements);\n  };\n};\nexport var isSpecialClick = function isSpecialClick(event) {\n  var isMiddleClick = event.button === 1;\n  return Boolean(isMiddleClick || event.altKey || event.ctrlKey || event.metaKey || event.shiftKey);\n};\nexport var capitalize = function capitalize(key) {\n  return key.length === 0 ? '' : \"\".concat(key[0].toUpperCase()).concat(key.slice(1));\n};\n// taken from InstantSearch.js/utils\nexport function range(_ref) {\n  var _ref$start = _ref.start,\n    start = _ref$start === void 0 ? 0 : _ref$start,\n    end = _ref.end,\n    _ref$step = _ref.step,\n    step = _ref$step === void 0 ? 1 : _ref$step;\n  // We can't divide by 0 so we re-assign the step to 1 if it happens.\n  var limitStep = step === 0 ? 1 : step;\n\n  // In some cases the array to create has a decimal length.\n  // We therefore need to round the value.\n  // Example:\n  //   { start: 1, end: 5000, step: 500 }\n  //   => Array length = (5000 - 1) / 500 = 9.998\n  var arrayLength = Math.round((end - start) / limitStep);\n  return _toConsumableArray(Array(arrayLength)).map(function (_, current) {\n    return (start + current) * limitStep;\n  });\n}\nexport function find(array, comparator) {\n  if (!Array.isArray(array)) {\n    return undefined;\n  }\n  for (var i = 0; i < array.length; i++) {\n    if (comparator(array[i])) {\n      return array[i];\n    }\n  }\n  return undefined;\n}","import classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React from 'react';\nexport var Highlight = function Highlight(_ref) {\n  var cx = _ref.cx,\n    value = _ref.value,\n    highlightedTagName = _ref.highlightedTagName,\n    isHighlighted = _ref.isHighlighted,\n    nonHighlightedTagName = _ref.nonHighlightedTagName;\n  var TagName = isHighlighted ? highlightedTagName : nonHighlightedTagName;\n  var className = isHighlighted ? 'highlighted' : 'nonHighlighted';\n  return /*#__PURE__*/React.createElement(TagName, {\n    className: cx(className)\n  }, value);\n};\nHighlight.propTypes = {\n  cx: PropTypes.func.isRequired,\n  value: PropTypes.string.isRequired,\n  isHighlighted: PropTypes.bool.isRequired,\n  highlightedTagName: PropTypes.string.isRequired,\n  nonHighlightedTagName: PropTypes.string.isRequired\n};\nvar Highlighter = function Highlighter(_ref2) {\n  var cx = _ref2.cx,\n    hit = _ref2.hit,\n    attribute = _ref2.attribute,\n    highlight = _ref2.highlight,\n    highlightProperty = _ref2.highlightProperty,\n    tagName = _ref2.tagName,\n    nonHighlightedTagName = _ref2.nonHighlightedTagName,\n    separator = _ref2.separator,\n    className = _ref2.className;\n  var parsedHighlightedValue = highlight({\n    hit: hit,\n    attribute: attribute,\n    highlightProperty: highlightProperty\n  });\n  return /*#__PURE__*/React.createElement(\"span\", {\n    className: classNames(cx(''), className)\n  }, parsedHighlightedValue.map(function (item, i) {\n    if (Array.isArray(item)) {\n      var isLast = i === parsedHighlightedValue.length - 1;\n      return /*#__PURE__*/React.createElement(\"span\", {\n        key: i\n      }, item.map(function (element, index) {\n        return /*#__PURE__*/React.createElement(Highlight, {\n          cx: cx,\n          key: index,\n          value: element.value,\n          highlightedTagName: tagName,\n          nonHighlightedTagName: nonHighlightedTagName,\n          isHighlighted: element.isHighlighted\n        });\n      }), !isLast && /*#__PURE__*/React.createElement(\"span\", {\n        className: cx('separator')\n      }, separator));\n    }\n    return /*#__PURE__*/React.createElement(Highlight, {\n      cx: cx,\n      key: i,\n      value: item.value,\n      highlightedTagName: tagName,\n      nonHighlightedTagName: nonHighlightedTagName,\n      isHighlighted: item.isHighlighted\n    });\n  }));\n};\nHighlighter.propTypes = {\n  cx: PropTypes.func.isRequired,\n  hit: PropTypes.object.isRequired,\n  attribute: PropTypes.oneOfType([PropTypes.arrayOf(PropTypes.string), PropTypes.string]).isRequired,\n  highlight: PropTypes.func.isRequired,\n  highlightProperty: PropTypes.string.isRequired,\n  tagName: PropTypes.string,\n  nonHighlightedTagName: PropTypes.string,\n  className: PropTypes.string,\n  separator: PropTypes.node\n};\nHighlighter.defaultProps = {\n  tagName: 'em',\n  nonHighlightedTagName: 'span',\n  className: '',\n  separator: ', '\n};\nexport default Highlighter;","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport { createClassNames } from \"../core/utils.js\";\nimport Highlighter from \"./Highlighter.js\";\nvar cx = createClassNames('Highlight');\nvar Highlight = function Highlight(props) {\n  return /*#__PURE__*/React.createElement(Highlighter, _extends({}, props, {\n    highlightProperty: \"_highlightResult\",\n    cx: cx\n  }));\n};\nexport default Highlight;","import { connectHighlight } from 'react-instantsearch-core';\nimport Highlight from \"../components/Highlight.js\";\n\n/**\n * Renders any attribute from a hit into its highlighted form when relevant.\n *\n * Read more about it in the [Highlighting results](guide/Highlighting_results.html) guide.\n * @name Highlight\n * @kind widget\n * @propType {string} attribute - location of the highlighted attribute in the hit (the corresponding element can be either a string or an array of strings)\n * @propType {object} hit - hit object containing the highlighted attribute\n * @propType {string} [tagName='em'] - tag to be used for highlighted parts of the hit\n * @propType {string} [nonHighlightedTagName='span'] - tag to be used for the parts of the hit that are not highlighted\n * @propType {node} [separator=',<space>'] - symbol used to separate the elements of the array in case the attribute points to an array of strings.\n * @themeKey ais-Highlight - root of the component\n * @themeKey ais-Highlight-highlighted - part of the text which is highlighted\n * @themeKey ais-Highlight-nonHighlighted - part of the text that is not highlighted\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, Highlight } from 'react-instantsearch-dom';\n *\n * const Hit = ({ hit }) => (\n *   <div>\n *     <Highlight attribute=\"name\" hit={hit} />\n *   </div>\n * );\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox defaultRefinement=\"Pho\" />\n *     <Hits hitComponent={Hit} />\n *   </InstantSearch>\n * );\n */\n\nexport default connectHighlight(Highlight, {\n  $$widgetType: 'ais.highlight'\n});","function _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nimport React from 'react';\nimport { createClassNames } from \"../core/utils.js\";\nimport Highlighter from \"./Highlighter.js\";\nvar cx = createClassNames('Snippet');\nvar Snippet = function Snippet(props) {\n  return /*#__PURE__*/React.createElement(Highlighter, _extends({}, props, {\n    highlightProperty: \"_snippetResult\",\n    cx: cx\n  }));\n};\nexport default Snippet;","import { connectHighlight } from 'react-instantsearch-core';\nimport Snippet from \"../components/Snippet.js\";\n\n/**\n * Renders any attribute from an hit into its highlighted snippet form when relevant.\n *\n * Read more about it in the [Highlighting results](guide/Highlighting_results.html) guide.\n * @name Snippet\n * @kind widget\n * @requirements To use this widget, the attribute name passed to the `attribute` prop must be\n * present in \"Attributes to snippet\" on the Algolia dashboard or configured as `attributesToSnippet`\n * via a set settings call to the Algolia API.\n * @propType {string} attribute - location of the highlighted snippet attribute in the hit (the corresponding element can be either a string or an array of strings)\n * @propType {object} hit - hit object containing the highlighted snippet attribute\n * @propType {string} [tagName='em'] - tag to be used for highlighted parts of the attribute\n * @propType {string} [nonHighlightedTagName='span'] - tag to be used for the parts of the hit that are not highlighted\n * @propType {node} [separator=',<space>'] - symbol used to separate the elements of the array in case the attribute points to an array of strings.\n * @themeKey ais-Snippet - the root span of the widget\n * @themeKey ais-Snippet-highlighted - the highlighted text\n * @themeKey ais-Snippet-nonHighlighted - the normal text\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, Snippet } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const Hit = ({ hit }) => (\n *   <div>\n *     <Snippet attribute=\"description\" hit={hit} />\n *   </div>\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <SearchBox defaultRefinement=\"adjustable\" />\n *     <Hits hitComponent={Hit} />\n *   </InstantSearch>\n * );\n */\n\nexport default connectHighlight(Snippet, {\n  $$widgetType: 'ais.snippet'\n});","import createConnector from \"../core/createConnector.js\";\nimport { getResults } from \"../core/indexUtils.js\";\n\n/**\n * The `connectStateResults` connector provides a way to access the `searchState` and the `searchResults`\n * of InstantSearch.\n * For instance this connector allows you to create results/noResults or query/noQuery pages.\n * @name connectStateResults\n * @kind connector\n * @providedPropType {object} searchState - The search state of the instant search component. <br/><br/> See: [Search state structure](https://community.algolia.com/react-instantsearch/guide/Search_state.html)\n * @providedPropType {object} searchResults - The search results. <br/><br/> In case of multiple indices: if used under `<Index>`, results will be those of the corresponding index otherwise it'll be those of the root index  See: [Search results structure](https://community.algolia.com/algoliasearch-helper-js/reference.html#searchresults)\n * @providedPropType {object} allSearchResults - In case of multiple indices you can retrieve all the results\n * @providedPropType {string} error - If the search failed, the error will be logged here.\n * @providedPropType {boolean} searching - If there is a search in progress.\n * @providedPropType {boolean} isSearchStalled - Flag that indicates if React InstantSearch has detected that searches are stalled.\n * @providedPropType {boolean} searchingForFacetValues - If there is a search in a list in progress.\n * @providedPropType {object} props - component props.\n * @example\n * import React from 'react';\n * import algoliasearch from 'algoliasearch/lite';\n * import { InstantSearch, SearchBox, Hits, connectStateResults } from 'react-instantsearch-dom';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const Content = connectStateResults(({ searchState, searchResults }) => {\n *   const hasResults = searchResults && searchResults.nbHits !== 0;\n *\n *    return (\n *      <div>\n *        <div hidden={!hasResults}>\n *          <Hits />\n *        </div>\n *        <div hidden={hasResults}>\n *          <div>No results has been found for {searchState.query}</div>\n *        </div>\n *      </div>\n *    );\n * });\n *\n * const App = () => (\n *   <InstantSearch\n *      searchClient={searchClient}\n *      indexName=\"instant_search\"\n *    >\n *      <SearchBox />\n *      <Content />\n *    </InstantSearch>\n * );\n */\nexport default createConnector({\n  displayName: 'AlgoliaStateResults',\n  $$type: 'ais.stateResults',\n  getProvidedProps: function getProvidedProps(props, searchState, searchResults) {\n    var results = getResults(searchResults, {\n      ais: props.contextValue,\n      multiIndexContext: props.indexContextValue\n    });\n    return {\n      searchState: searchState,\n      searchResults: results,\n      allSearchResults: searchResults.results,\n      searching: searchResults.searching,\n      isSearchStalled: searchResults.isSearchStalled,\n      error: searchResults.error,\n      searchingForFacetValues: searchResults.searchingForFacetValues,\n      props: props\n    };\n  }\n});","import createConnector from \"../core/createConnector.js\";\n\n/**\n * connectPoweredBy connector provides the logic to build a widget that\n * will display a link to algolia.\n * @name connectPoweredBy\n * @kind connector\n * @providedPropType {string} url - the url to redirect to algolia\n */\nexport default createConnector({\n  displayName: 'AlgoliaPoweredBy',\n  $$type: 'ais.poweredBy',\n  getProvidedProps: function getProvidedProps() {\n    var hostname = typeof window === 'undefined' || typeof window.location === 'undefined' ? '' : window.location.hostname;\n    var url = 'https://www.algolia.com/?' + 'utm_source=react-instantsearch&' + 'utm_medium=website&' + \"utm_content=\".concat(hostname, \"&\") + 'utm_campaign=poweredby';\n    return {\n      url: url\n    };\n  }\n});","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _extends() { _extends = Object.assign ? Object.assign.bind() : function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport React, { Component } from 'react';\nvar withKeysPropType = function withKeysPropType(keys) {\n  return function (props, propName, componentName) {\n    var prop = props[propName];\n    if (prop) {\n      // eslint-disable-next-line no-restricted-syntax\n      for (var _i = 0, _Object$keys = Object.keys(prop); _i < _Object$keys.length; _i++) {\n        var key = _Object$keys[_i];\n        if (keys.indexOf(key) === -1) {\n          return new Error(\"Unknown `\".concat(propName, \"` key `\").concat(key, \"`. Check the render method \") + \"of `\".concat(componentName, \"`.\"));\n        }\n      }\n    }\n    return undefined;\n  };\n};\nexport default function translatable(defaultTranslations) {\n  return function (Composed) {\n    var Translatable = /*#__PURE__*/function (_Component) {\n      _inherits(Translatable, _Component);\n      var _super = _createSuper(Translatable);\n      function Translatable() {\n        var _this;\n        _classCallCheck(this, Translatable);\n        for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n          args[_key] = arguments[_key];\n        }\n        _this = _super.call.apply(_super, [this].concat(args));\n        _defineProperty(_assertThisInitialized(_this), \"translate\", function (key) {\n          var translations = _this.props.translations;\n          var translation = translations && translations.hasOwnProperty(key) ? translations[key] : defaultTranslations[key];\n          if (typeof translation === 'function') {\n            for (var _len2 = arguments.length, params = new Array(_len2 > 1 ? _len2 - 1 : 0), _key2 = 1; _key2 < _len2; _key2++) {\n              params[_key2 - 1] = arguments[_key2];\n            }\n            return translation.apply(void 0, params);\n          }\n          return translation;\n        });\n        return _this;\n      }\n      _createClass(Translatable, [{\n        key: \"render\",\n        value: function render() {\n          return /*#__PURE__*/React.createElement(Composed, _extends({\n            translate: this.translate\n          }, this.props));\n        }\n      }]);\n      return Translatable;\n    }(Component);\n    var name = Composed.displayName || Composed.name || 'UnknownComponent';\n    Translatable.displayName = \"Translatable(\".concat(name, \")\");\n    Translatable.propTypes = {\n      translations: withKeysPropType(Object.keys(defaultTranslations))\n    };\n    return Translatable;\n  };\n}","function _typeof(obj) { \"@babel/helpers - typeof\"; return _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (obj) { return typeof obj; } : function (obj) { return obj && \"function\" == typeof Symbol && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; }, _typeof(obj); }\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, _toPropertyKey(descriptor.key), descriptor); } }\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function\"); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, writable: true, configurable: true } }); Object.defineProperty(subClass, \"prototype\", { writable: false }); if (superClass) _setPrototypeOf(subClass, superClass); }\nfunction _setPrototypeOf(o, p) { _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function _setPrototypeOf(o, p) { o.__proto__ = p; return o; }; return _setPrototypeOf(o, p); }\nfunction _createSuper(Derived) { var hasNativeReflectConstruct = _isNativeReflectConstruct(); return function _createSuperInternal() { var Super = _getPrototypeOf(Derived), result; if (hasNativeReflectConstruct) { var NewTarget = _getPrototypeOf(this).constructor; result = Reflect.construct(Super, arguments, NewTarget); } else { result = Super.apply(this, arguments); } return _possibleConstructorReturn(this, result); }; }\nfunction _possibleConstructorReturn(self, call) { if (call && (_typeof(call) === \"object\" || typeof call === \"function\")) { return call; } else if (call !== void 0) { throw new TypeError(\"Derived constructors may only return object or undefined\"); } return _assertThisInitialized(self); }\nfunction _assertThisInitialized(self) { if (self === void 0) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return self; }\nfunction _isNativeReflectConstruct() { if (typeof Reflect === \"undefined\" || !Reflect.construct) return false; if (Reflect.construct.sham) return false; if (typeof Proxy === \"function\") return true; try { Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {})); return true; } catch (e) { return false; } }\nfunction _getPrototypeOf(o) { _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function _getPrototypeOf(o) { return o.__proto__ || Object.getPrototypeOf(o); }; return _getPrototypeOf(o); }\nfunction _defineProperty(obj, key, value) { key = _toPropertyKey(key); if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\nfunction _toPropertyKey(arg) { var key = _toPrimitive(arg, \"string\"); return _typeof(key) === \"symbol\" ? key : String(key); }\nfunction _toPrimitive(input, hint) { if (_typeof(input) !== \"object\" || input === null) return input; var prim = input[Symbol.toPrimitive]; if (prim !== undefined) { var res = prim.call(input, hint || \"default\"); if (_typeof(res) !== \"object\") return res; throw new TypeError(\"@@toPrimitive must return a primitive value.\"); } return (hint === \"string\" ? String : Number)(input); }\nimport classNames from 'classnames';\nimport PropTypes from 'prop-types';\nimport React, { Component } from 'react';\nimport { translatable } from 'react-instantsearch-core';\nimport { createClassNames } from \"../core/utils.js\";\nvar cx = createClassNames('PoweredBy');\nvar _ref = /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"#003DFF\",\n  d: \"M249.5 64.2V1.4c0-.9-.7-1.5-1.6-1.4L236.2 2a1.4 1.4 0 0 0-1.2 1.3V67c0 3 0 21.6 22.4 22.3a1.4 1.4 0 0 0 1.5-1.4v-9.5c0-.7-.6-1.3-1.2-1.4-8.2-.9-8.2-11-8.2-12.7ZM443.5 24.4h-11.8c-.8 0-1.4.6-1.4 1.4v62c0 .8.6 1.4 1.4 1.4h11.8c.8 0 1.4-.6 1.4-1.4v-62c0-.8-.6-1.4-1.4-1.4ZM431.7 16.6h11.8c.8 0 1.4-.6 1.4-1.3v-14c0-.8-.7-1.4-1.6-1.3L431.5 2a1.4 1.4 0 0 0-1.2 1.3v12c0 .8.6 1.4 1.4 1.4Zm-20.5 47.6V1.4c0-.9-.7-1.5-1.5-1.4L397.9 2a1.4 1.4 0 0 0-1.2 1.3V67c0 3 0 21.6 22.4 22.3a1.4 1.4 0 0 0 1.5-1.4v-9.5c0-.7-.5-1.3-1.2-1.4-8.2-.9-8.2-11-8.2-12.7Zm-30.7-31c-2.6-2.8-5.8-5-9.6-6.5a31.7 31.7 0 0 0-12-2.3c-4.5 0-8.5.7-12.2 2.3A27.9 27.9 0 0 0 331 43.5a39.6 39.6 0 0 0 0 26.3c1.5 4 3.6 7.5 6.2 10.3 2.6 2.9 5.8 5 9.5 6.7a38 38 0 0 0 12.2 2.4c2.8 0 8.6-.9 12.3-2.4a27 27 0 0 0 9.5-6.7 35.1 35.1 0 0 0 8.3-23c0-4.9-.8-9.6-2.4-13.6-1.5-4-3.5-7.4-6.1-10.2ZM370 71.5a13.1 13.1 0 0 1-11.2 5.6 13 13 0 0 1-11.2-5.6c-2.7-3.6-4-7.9-4-14.2 0-6.3 1.3-11.5 4-15.1a13 13 0 0 1 11.1-5.5 13 13 0 0 1 11.3 5.5c2.6 3.6 4 8.8 4 15 0 6.4-1.3 10.6-4 14.3Zm-161.6-47H197a32 32 0 0 0-27 15 33.8 33.8 0 0 0 8.9 45.9 18.8 18.8 0 0 0 11.2 3.1H191.2l.6-.2h.2a21 21 0 0 0 16.5-14.6V87c0 .8.6 1.4 1.4 1.4h11.7c.8 0 1.4-.6 1.4-1.4V25.8c0-.8-.6-1.4-1.4-1.4h-13Zm0 48.3a17.8 17.8 0 0 1-10.4 3.5h-.2a12.5 12.5 0 0 1-.7 0A18.4 18.4 0 0 1 180.4 51c2.7-6.8 9-11.6 16.6-11.6h11.5v33.3Zm289-48.3H486a32 32 0 0 0-27 15 33.8 33.8 0 0 0 8.8 45.9 18.8 18.8 0 0 0 11.3 3.1h1.1l.6-.2h.2a21 21 0 0 0 16.5-14.6V87c0 .8.6 1.4 1.4 1.4h11.7c.8 0 1.4-.6 1.4-1.4V25.8c0-.8-.6-1.4-1.4-1.4h-13.1Zm0 48.3a17.8 17.8 0 0 1-10.5 3.5h-.9A18.4 18.4 0 0 1 469.4 51c2.6-6.8 9-11.6 16.6-11.6h11.5v33.3ZM306.3 24.4h-11.5a32 32 0 0 0-27 15 33.7 33.7 0 0 0-5.1 14.6 34.6 34.6 0 0 0 0 7.6c1 8.9 5.4 16.7 11.8 22a19.5 19.5 0 0 0 2.2 1.7 18.8 18.8 0 0 0 21.6-.6c3.8-2.7 6.7-6.7 8-11.1V87.9c0 5-1.3 8.9-4 11.5-2.7 2.6-7.3 3.9-13.6 3.9-2.6 0-6.7-.2-10.9-.6a1.4 1.4 0 0 0-1.4 1l-3 10a1.4 1.4 0 0 0 1.1 1.8c5 .7 10 1 12.8 1 11.4 0 19.8-2.4 25.3-7.4 5-4.6 7.8-11.4 8.2-20.7V25.8c0-.8-.6-1.4-1.3-1.4h-13.2Zm0 15s.2 32.4 0 33.4a17.5 17.5 0 0 1-10 3.4h-.2a13.6 13.6 0 0 1-1.7 0A18.7 18.7 0 0 1 278.3 51c2.6-6.8 9-11.6 16.5-11.6h11.5ZM58.2 0A58.3 58.3 0 1 0 86 109.5c.9-.5 1-1.6.3-2.2l-5.5-4.9a3.8 3.8 0 0 0-4-.6A47 47 0 0 1 11 57.5 47.3 47.3 0 0 1 58.2 11h47.3v84L78.7 71.2a2 2 0 0 0-3 .3 22 22 0 1 1 4.4-15.2 4 4 0 0 0 1.3 2.6l7 6.2c.8.7 2 .3 2.3-.8a33 33 0 0 0-30.4-39 33 33 0 0 0-35 32 33.3 33.3 0 0 0 32.2 33.9 32.8 32.8 0 0 0 20-6.3l35.1 31c1.5 1.4 3.9.3 3.9-1.7V2.2a2.2 2.2 0 0 0-2.2-2.2h-56Z\"\n});\nvar AlgoliaLogo = function AlgoliaLogo() {\n  return /*#__PURE__*/React.createElement(\"svg\", {\n    viewBox: \"0 0 512 117\",\n    width: \"118\",\n    height: \"27\",\n    className: cx('logo')\n  }, _ref);\n};\nvar _ref2 = /*#__PURE__*/React.createElement(AlgoliaLogo, null);\nvar PoweredBy = /*#__PURE__*/function (_Component) {\n  _inherits(PoweredBy, _Component);\n  var _super = _createSuper(PoweredBy);\n  function PoweredBy() {\n    _classCallCheck(this, PoweredBy);\n    return _super.apply(this, arguments);\n  }\n  _createClass(PoweredBy, [{\n    key: \"render\",\n    value: function render() {\n      var _this$props = this.props,\n        url = _this$props.url,\n        translate = _this$props.translate,\n        className = _this$props.className;\n      return /*#__PURE__*/React.createElement(\"div\", {\n        className: classNames(cx(''), className)\n      }, /*#__PURE__*/React.createElement(\"span\", {\n        className: cx('text')\n      }, translate('searchBy')), ' ', /*#__PURE__*/React.createElement(\"a\", {\n        href: url,\n        target: \"_blank\",\n        className: cx('link'),\n        \"aria-label\": \"Algolia\",\n        rel: \"noopener noreferrer\"\n      }, _ref2));\n    }\n  }]);\n  return PoweredBy;\n}(Component);\n_defineProperty(PoweredBy, \"propTypes\", {\n  url: PropTypes.string.isRequired,\n  translate: PropTypes.func.isRequired,\n  className: PropTypes.string\n});\nexport default translatable({\n  searchBy: 'Search by'\n})(PoweredBy);","import { connectPoweredBy } from 'react-instantsearch-core';\nimport PoweredBy from \"../components/PoweredBy.js\";\n\n/**\n * PoweredBy displays an Algolia logo.\n *\n * Algolia requires that you use this widget if you are on a [community or free plan](https://www.algolia.com/pricing).\n * @name PoweredBy\n * @kind widget\n * @themeKey ais-PoweredBy - the root div of the widget\n * @themeKey ais-PoweredBy-text - the text of the widget\n * @themeKey ais-PoweredBy-link - the link of the logo\n * @themeKey ais-PoweredBy-logo - the logo of the widget\n * @translationKey searchBy - Label value for the powered by\n * @example\n * import React from 'react';\n * import { InstantSearch, PoweredBy } from 'react-instantsearch-dom';\n * import algoliasearch from 'algoliasearch/lite';\n *\n * const searchClient = algoliasearch(\n *   'latency',\n *   '6be0576ff61c053d5f9a3225e2a90f76'\n * );\n *\n * const App = () => (\n *   <InstantSearch\n *     searchClient={searchClient}\n *     indexName=\"instant_search\"\n *   >\n *     <PoweredBy />\n *   </InstantSearch>\n * );\n */\nexport default connectPoweredBy(PoweredBy, {\n  $$widgetType: 'ais.poweredBy'\n});","import { useLayoutEffect } from 'react'\n\nconst useScrollDisabler = () =>\n  useLayoutEffect(() => {\n    const originalStyle = window.getComputedStyle(document.body).overflow\n    // Prevent scrolling on mount\n    document.body.style.overflow = 'hidden'\n    // Re-enable scrolling when component unmounts\n    return () => (document.body.style.overflow = originalStyle)\n  }, [])\n\nexport default useScrollDisabler\n","import React from 'react'\nimport groupArray from 'group-array'\nimport {\n  Highlight,\n  Snippet,\n  connectStateResults,\n  PoweredBy\n} from 'react-instantsearch-dom'\nimport { Heading, Box, Spinner } from 'theme-ui'\nimport Card from '@components/Card'\nimport useScrollDisabler from '@components/useScrollDisabler'\nimport styles from './Search.styles'\n\nconst Hits = ({ searchState, searchResults }) => {\n  useScrollDisabler()\n\n  if (!searchResults || !searchState.query) {\n    return 'What are you looking for?'\n  }\n\n  if (searchResults.query !== searchState.query) {\n    //Waiting for search request to return results from server\n    return <Spinner strokeWidth={2} duration={700} sx={styles.spinner} />\n  }\n\n  if (searchResults && searchResults.nbHits < 1) {\n    return `No results for '${searchResults.query}'`\n  } else {\n    const hitsByCategory = groupArray(searchResults.hits, 'category.name')\n    const categories = Object.keys(hitsByCategory)\n\n    return categories.map(name => (\n      <Box\n        variant='lists.cards.fixed.search'\n        sx={styles.hitGroup}\n        key={`search-${name}`}\n      >\n        <Heading variant='h4'>{name}</Heading>\n        {hitsByCategory[name].map(hit => {\n          const node = {\n            ...hit,\n            key: hit.objectID,\n            title: <Highlight hit={hit} tagName='mark' attribute='title' />,\n            excerpt: <Snippet hit={hit} tagName='mark' attribute='excerpt' />\n          }\n          return (\n            <Card\n              variant='search'\n              {...node}\n              omitCategory\n              omitFooter\n              omitMedia\n            />\n          )\n        })}\n      </Box>\n    ))\n  }\n}\n\nconst ConnectedHits = connectStateResults(Hits)\n\nconst Results = () => (\n  <Box sx={styles.resultsWrapper}>\n    <Box sx={styles.hitsWrapper}>\n      <ConnectedHits />\n    </Box>\n    <Box sx={styles.poweredBy}>\n      <PoweredBy />\n    </Box>\n  </Box>\n)\n\nexport default Results\n","import React, { useState, useEffect } from 'react'\nimport { InstantSearch, Configure } from 'react-instantsearch-dom'\nimport algoliasearch from 'algoliasearch/lite'\nimport { Box, IconButton } from 'theme-ui'\nimport { FaTimes } from 'react-icons/fa'\nimport SearchBox from './Search.Box'\nimport Results from './Search.Results'\nimport styles from './Search.styles'\n\nconst indexName = process.env.GATSBY_ALGOLIA_INDEX_NAME || 'Posts'\nconst searchDistinctLimit = 4\n\nconst Overlay = ({ onClick }) => (\n  <>\n    <Box sx={styles.overlay} onClick={onClick} />\n    <Box sx={styles.close}>\n      <IconButton onClick={onClick}>\n        <FaTimes />\n      </IconButton>\n      <Box sx={styles.esc}>ESC</Box>\n    </Box>\n  </>\n)\n\nconst Search = ({ isFocused = false }) => {\n  const [focus, setFocus] = useState(isFocused)\n\n  const algoliaClient = algoliasearch(\n    process.env.GATSBY_ALGOLIA_APP_ID,\n    process.env.GATSBY_ALGOLIA_SEARCH_KEY\n  )\n\n  const searchClient = {\n    search(requests) {\n      const shouldSearch = requests.some(\n        ({ params: { query } }) => query !== ''\n      )\n      if (focus && shouldSearch) {\n        return algoliaClient.search(requests)\n      }\n      return Promise.resolve({\n        results: [{ hits: [] }]\n      })\n    }\n  }\n\n  const handleClose = () => setFocus(false)\n  const handleFocus = () => !focus && setFocus(true)\n\n  return (\n    <Box>\n      <InstantSearch indexName={indexName} searchClient={searchClient}>\n        <Configure distinct={searchDistinctLimit} />\n        <SearchBox\n          focus={focus}\n          handleFocus={handleFocus}\n          handleClose={handleClose}\n        />\n        {focus && <Results />}\n      </InstantSearch>\n      {focus && (\n        <>\n          <Overlay onClick={handleClose} />\n        </>\n      )}\n    </Box>\n  )\n}\n\nexport default Search\n","/*!\n * is-plain-object <https://github.com/jonschlinkert/is-plain-object>\n *\n * Copyright (c) 2014-2017, Jon Schlinkert.\n * Released under the MIT License.\n */\n\n'use strict';\n\nvar isObject = require('isobject');\n\nfunction isObjectObject(o) {\n  return isObject(o) === true\n    && Object.prototype.toString.call(o) === '[object Object]';\n}\n\nmodule.exports = function isPlainObject(o) {\n  var ctor,prot;\n\n  if (isObjectObject(o) === false) return false;\n\n  // If has modified constructor\n  ctor = o.constructor;\n  if (typeof ctor !== 'function') return false;\n\n  // If has modified prototype\n  prot = ctor.prototype;\n  if (isObjectObject(prot) === false) return false;\n\n  // If constructor does not have an Object-specific method\n  if (prot.hasOwnProperty('isPrototypeOf') === false) {\n    return false;\n  }\n\n  // Most likely a plain Object\n  return true;\n};\n","'use strict';\n\nvar EventEmitter = require('@algolia/events');\n\nvar inherits = require('../functions/inherits');\n\n/**\n * A DerivedHelper is a way to create sub requests to\n * Algolia from a main helper.\n * @class\n * @classdesc The DerivedHelper provides an event based interface for search callbacks:\n *  - search: when a search is triggered using the `search()` method.\n *  - result: when the response is retrieved from Algolia and is processed.\n *    This event contains a {@link SearchResults} object and the\n *    {@link SearchParameters} corresponding to this answer.\n * @param {AlgoliaSearchHelper} mainHelper the main helper\n * @param {function} fn the function to create the derived state\n */\nfunction DerivedHelper(mainHelper, fn) {\n  this.main = mainHelper;\n  this.fn = fn;\n  this.lastResults = null;\n}\n\ninherits(DerivedHelper, EventEmitter);\n\n/**\n * Detach this helper from the main helper\n * @return {undefined}\n * @throws Error if the derived helper is already detached\n */\nDerivedHelper.prototype.detach = function () {\n  this.removeAllListeners();\n  this.main.detachDerivedHelper(this);\n};\n\nDerivedHelper.prototype.getModifiedState = function (parameters) {\n  return this.fn(parameters);\n};\n\nmodule.exports = DerivedHelper;\n","'use strict';\n\nfunction inherits(ctor, superCtor) {\n  ctor.prototype = Object.create(superCtor.prototype, {\n    constructor: {\n      value: ctor,\n      enumerable: false,\n      writable: true,\n      configurable: true,\n    },\n  });\n}\n\nmodule.exports = inherits;\n","'use strict';\n\n// NOTE: this behaves like lodash/defaults, but doesn't mutate the target\n// it also preserve keys order\nmodule.exports = function defaultsPure() {\n  var sources = Array.prototype.slice.call(arguments);\n\n  return sources.reduceRight(function (acc, source) {\n    Object.keys(Object(source)).forEach(function (key) {\n      if (source[key] === undefined) {\n        return;\n      }\n      if (acc[key] !== undefined) {\n        // remove if already added, so that we can add it in correct order\n        delete acc[key];\n      }\n      acc[key] = source[key];\n    });\n    return acc;\n  }, {});\n};\n","'use strict';\n\nvar defaultsPure = require('../functions/defaultsPure');\nvar find = require('../functions/find');\nvar intersection = require('../functions/intersection');\nvar merge = require('../functions/merge');\nvar objectHasKeys = require('../functions/objectHasKeys');\nvar omit = require('../functions/omit');\nvar valToNumber = require('../functions/valToNumber');\nvar isValidUserToken = require('../utils/isValidUserToken');\n\nvar RefinementList = require('./RefinementList');\n\n/**\n * isEqual, but only for numeric refinement values, possible values:\n * - 5\n * - [5]\n * - [[5]]\n * - [[5,5],[4]]\n * @param {any} a numeric refinement value\n * @param {any} b numeric refinement value\n * @return {boolean} true if the values are equal\n */\nfunction isEqualNumericRefinement(a, b) {\n  if (Array.isArray(a) && Array.isArray(b)) {\n    return (\n      a.length === b.length &&\n      a.every(function (el, i) {\n        return isEqualNumericRefinement(b[i], el);\n      })\n    );\n  }\n  return a === b;\n}\n\n/**\n * like _.find but using deep equality to be able to use it\n * to find arrays.\n * @private\n * @param {any[]} array array to search into (elements are base or array of base)\n * @param {any} searchedValue the value we're looking for (base or array of base)\n * @return {any} the searched value or undefined\n */\nfunction findArray(array, searchedValue) {\n  return find(array, function (currentValue) {\n    return isEqualNumericRefinement(currentValue, searchedValue);\n  });\n}\n\n/**\n * The facet list is the structure used to store the list of values used to\n * filter a single attribute.\n * @typedef {string[]} SearchParameters.FacetList\n */\n\n/**\n * Structure to store numeric filters with the operator as the key. The supported operators\n * are `=`, `>`, `<`, `>=`, `<=` and `!=`.\n * @typedef {Object.<string, Array.<number|number[]>>} SearchParameters.OperatorList\n */\n\n/**\n * SearchParameters is the data structure that contains all the information\n * usable for making a search to Algolia API. It doesn't do the search itself,\n * nor does it contains logic about the parameters.\n * It is an immutable object, therefore it has been created in a way that each\n * changes does not change the object itself but returns a copy with the\n * modification.\n * This object should probably not be instantiated outside of the helper. It will\n * be provided when needed. This object is documented for reference as you'll\n * get it from events generated by the {@link AlgoliaSearchHelper}.\n * If need be, instantiate the Helper from the factory function {@link SearchParameters.make}\n * @constructor\n * @classdesc contains all the parameters of a search\n * @param {object|SearchParameters} newParameters existing parameters or partial object\n * for the properties of a new SearchParameters\n * @see SearchParameters.make\n * @example <caption>SearchParameters of the first query in\n *   <a href=\"http://demos.algolia.com/instant-search-demo/\">the instant search demo</a></caption>\n{\n   \"query\": \"\",\n   \"disjunctiveFacets\": [\n      \"customerReviewCount\",\n      \"category\",\n      \"salePrice_range\",\n      \"manufacturer\"\n  ],\n   \"maxValuesPerFacet\": 30,\n   \"page\": 0,\n   \"hitsPerPage\": 10,\n   \"facets\": [\n      \"type\",\n      \"shipping\"\n  ]\n}\n */\nfunction SearchParameters(newParameters) {\n  var params = newParameters\n    ? SearchParameters._parseNumbers(newParameters)\n    : {};\n\n  if (params.userToken !== undefined && !isValidUserToken(params.userToken)) {\n    // eslint-disable-next-line no-console\n    console.warn(\n      '[algoliasearch-helper] The `userToken` parameter is invalid. This can lead to wrong analytics.\\n  - Format: [a-zA-Z0-9_-]{1,64}'\n    );\n  }\n  /**\n   * This attribute contains the list of all the conjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.facets = params.facets || [];\n  /**\n   * This attribute contains the list of all the disjunctive facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * @member {string[]}\n   */\n  this.disjunctiveFacets = params.disjunctiveFacets || [];\n  /**\n   * This attribute contains the list of all the hierarchical facets\n   * used. This list will be added to requested facets in the\n   * [facets attribute](https://www.algolia.com/doc/rest-api/search#param-facets) sent to algolia.\n   * Hierarchical facets are a sub type of disjunctive facets that\n   * let you filter faceted attributes hierarchically.\n   * @member {string[]|object[]}\n   */\n  this.hierarchicalFacets = params.hierarchicalFacets || [];\n\n  // Refinements\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsRefinements = params.facetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * excluded from the conjunctive facets. Each facet must be properly\n   * defined in the `facets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters excluded for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.facetsExcludes = params.facetsExcludes || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the disjunctive facets. Each facet must be properly\n   * defined in the `disjunctiveFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.disjunctiveFacetsRefinements = params.disjunctiveFacetsRefinements || {};\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the numeric attributes.\n   *\n   * The key is the name of the attribute, and the value is the\n   * filters to apply to this attribute.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `numericFilters` attribute.\n   * @member {Object.<string, SearchParameters.OperatorList>}\n   */\n  this.numericRefinements = params.numericRefinements || {};\n  /**\n   * This attribute contains all the tags used to refine the query.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `tagFilters` attribute.\n   * @member {string[]}\n   */\n  this.tagRefinements = params.tagRefinements || [];\n  /**\n   * This attribute contains all the filters that need to be\n   * applied on the hierarchical facets. Each facet must be properly\n   * defined in the `hierarchicalFacets` attribute.\n   *\n   * The key is the name of the facet, and the `FacetList` contains all\n   * filters selected for the associated facet name. The FacetList values\n   * are structured as a string that contain the values for each level\n   * separated by the configured separator.\n   *\n   * When querying algolia, the values stored in this attribute will\n   * be translated into the `facetFilters` attribute.\n   * @member {Object.<string, SearchParameters.FacetList>}\n   */\n  this.hierarchicalFacetsRefinements =\n    params.hierarchicalFacetsRefinements || {};\n\n  // eslint-disable-next-line consistent-this\n  var self = this;\n  Object.keys(params).forEach(function (paramName) {\n    var isKeyKnown = SearchParameters.PARAMETERS.indexOf(paramName) !== -1;\n    var isValueDefined = params[paramName] !== undefined;\n\n    if (!isKeyKnown && isValueDefined) {\n      self[paramName] = params[paramName];\n    }\n  });\n}\n\n/**\n * List all the properties in SearchParameters and therefore all the known Algolia properties\n * This doesn't contain any beta/hidden features.\n * @private\n */\nSearchParameters.PARAMETERS = Object.keys(new SearchParameters());\n\n/**\n * @private\n * @param {object} partialState full or part of a state\n * @return {object} a new object with the number keys as number\n */\nSearchParameters._parseNumbers = function (partialState) {\n  // Do not parse numbers again in SearchParameters, they ought to be parsed already\n  if (partialState instanceof SearchParameters) return partialState;\n\n  var numbers = {};\n\n  var numberKeys = [\n    'aroundPrecision',\n    'aroundRadius',\n    'getRankingInfo',\n    'minWordSizefor2Typos',\n    'minWordSizefor1Typo',\n    'page',\n    'maxValuesPerFacet',\n    'distinct',\n    'minimumAroundRadius',\n    'hitsPerPage',\n    'minProximity',\n  ];\n\n  numberKeys.forEach(function (k) {\n    var value = partialState[k];\n    if (typeof value === 'string') {\n      var parsedValue = parseFloat(value);\n      // global isNaN is ok to use here, value is only number or NaN\n      numbers[k] = isNaN(parsedValue) ? value : parsedValue;\n    }\n  });\n\n  // there's two formats of insideBoundingBox, we need to parse\n  // the one which is an array of float geo rectangles\n  if (Array.isArray(partialState.insideBoundingBox)) {\n    numbers.insideBoundingBox = partialState.insideBoundingBox.map(function (\n      geoRect\n    ) {\n      if (Array.isArray(geoRect)) {\n        return geoRect.map(function (value) {\n          return parseFloat(value);\n        });\n      }\n      return geoRect;\n    });\n  }\n\n  if (partialState.numericRefinements) {\n    var numericRefinements = {};\n    Object.keys(partialState.numericRefinements).forEach(function (attribute) {\n      var operators = partialState.numericRefinements[attribute] || {};\n      numericRefinements[attribute] = {};\n      Object.keys(operators).forEach(function (operator) {\n        var values = operators[operator];\n        var parsedValues = values.map(function (v) {\n          if (Array.isArray(v)) {\n            return v.map(function (vPrime) {\n              if (typeof vPrime === 'string') {\n                return parseFloat(vPrime);\n              }\n              return vPrime;\n            });\n          } else if (typeof v === 'string') {\n            return parseFloat(v);\n          }\n          return v;\n        });\n        numericRefinements[attribute][operator] = parsedValues;\n      });\n    });\n    numbers.numericRefinements = numericRefinements;\n  }\n\n  return merge({}, partialState, numbers);\n};\n\n/**\n * Factory for SearchParameters\n * @param {object|SearchParameters} newParameters existing parameters or partial\n * object for the properties of a new SearchParameters\n * @return {SearchParameters} frozen instance of SearchParameters\n */\nSearchParameters.make = function makeSearchParameters(newParameters) {\n  var instance = new SearchParameters(newParameters);\n\n  var hierarchicalFacets = newParameters.hierarchicalFacets || [];\n  hierarchicalFacets.forEach(function (facet) {\n    if (facet.rootPath) {\n      var currentRefinement = instance.getHierarchicalRefinement(facet.name);\n\n      if (\n        currentRefinement.length > 0 &&\n        currentRefinement[0].indexOf(facet.rootPath) !== 0\n      ) {\n        instance = instance.clearRefinements(facet.name);\n      }\n\n      // get it again in case it has been cleared\n      currentRefinement = instance.getHierarchicalRefinement(facet.name);\n      if (currentRefinement.length === 0) {\n        instance = instance.toggleHierarchicalFacetRefinement(\n          facet.name,\n          facet.rootPath\n        );\n      }\n    }\n  });\n\n  return instance;\n};\n\n/**\n * Validates the new parameters based on the previous state\n * @param {SearchParameters} currentState the current state\n * @param {object|SearchParameters} parameters the new parameters to set\n * @return {Error|null} Error if the modification is invalid, null otherwise\n */\nSearchParameters.validate = function (currentState, parameters) {\n  var params = parameters || {};\n\n  if (\n    currentState.tagFilters &&\n    params.tagRefinements &&\n    params.tagRefinements.length > 0\n  ) {\n    return new Error(\n      '[Tags] Cannot switch from the managed tag API to the advanced API. It is probably ' +\n        'an error, if it is really what you want, you should first clear the tags with clearTags method.'\n    );\n  }\n\n  if (currentState.tagRefinements.length > 0 && params.tagFilters) {\n    return new Error(\n      '[Tags] Cannot switch from the advanced tag API to the managed API. It is probably ' +\n        'an error, if it is not, you should first clear the tags with clearTags method.'\n    );\n  }\n\n  if (\n    currentState.numericFilters &&\n    params.numericRefinements &&\n    objectHasKeys(params.numericRefinements)\n  ) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the advanced to the managed API. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  if (objectHasKeys(currentState.numericRefinements) && params.numericFilters) {\n    return new Error(\n      \"[Numeric filters] Can't switch from the managed API to the advanced. It\" +\n        ' is probably an error, if this is really what you want, you have to first' +\n        ' clear the numeric filters.'\n    );\n  }\n\n  return null;\n};\n\nSearchParameters.prototype = {\n  constructor: SearchParameters,\n\n  /**\n   * Remove all refinements (disjunctive + conjunctive + excludes + numeric filters)\n   * @method\n   * @param {undefined|string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {SearchParameters} new instance with filters cleared\n   */\n  clearRefinements: function clearRefinements(attribute) {\n    var patch = {\n      numericRefinements: this._clearNumericRefinements(attribute),\n      facetsRefinements: RefinementList.clearRefinement(\n        this.facetsRefinements,\n        attribute,\n        'conjunctiveFacet'\n      ),\n      facetsExcludes: RefinementList.clearRefinement(\n        this.facetsExcludes,\n        attribute,\n        'exclude'\n      ),\n      disjunctiveFacetsRefinements: RefinementList.clearRefinement(\n        this.disjunctiveFacetsRefinements,\n        attribute,\n        'disjunctiveFacet'\n      ),\n      hierarchicalFacetsRefinements: RefinementList.clearRefinement(\n        this.hierarchicalFacetsRefinements,\n        attribute,\n        'hierarchicalFacet'\n      ),\n    };\n    if (\n      patch.numericRefinements === this.numericRefinements &&\n      patch.facetsRefinements === this.facetsRefinements &&\n      patch.facetsExcludes === this.facetsExcludes &&\n      patch.disjunctiveFacetsRefinements ===\n        this.disjunctiveFacetsRefinements &&\n      patch.hierarchicalFacetsRefinements === this.hierarchicalFacetsRefinements\n    ) {\n      return this;\n    }\n    return this.setQueryParameters(patch);\n  },\n  /**\n   * Remove all the refined tags from the SearchParameters\n   * @method\n   * @return {SearchParameters} new instance with tags cleared\n   */\n  clearTags: function clearTags() {\n    if (this.tagFilters === undefined && this.tagRefinements.length === 0)\n      return this;\n\n    return this.setQueryParameters({\n      tagFilters: undefined,\n      tagRefinements: [],\n    });\n  },\n  /**\n   * Set the index.\n   * @method\n   * @param {string} index the index name\n   * @return {SearchParameters} new instance\n   */\n  setIndex: function setIndex(index) {\n    if (index === this.index) return this;\n\n    return this.setQueryParameters({\n      index: index,\n    });\n  },\n  /**\n   * Query setter\n   * @method\n   * @param {string} newQuery value for the new query\n   * @return {SearchParameters} new instance\n   */\n  setQuery: function setQuery(newQuery) {\n    if (newQuery === this.query) return this;\n\n    return this.setQueryParameters({\n      query: newQuery,\n    });\n  },\n  /**\n   * Page setter\n   * @method\n   * @param {number} newPage new page number\n   * @return {SearchParameters} new instance\n   */\n  setPage: function setPage(newPage) {\n    if (newPage === this.page) return this;\n\n    return this.setQueryParameters({\n      page: newPage,\n    });\n  },\n  /**\n   * Facets setter\n   * The facets are the simple facets, used for conjunctive (and) faceting.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for conjunctive faceting\n   * @return {SearchParameters} new instance\n   */\n  setFacets: function setFacets(facets) {\n    return this.setQueryParameters({\n      facets: facets,\n    });\n  },\n  /**\n   * Disjunctive facets setter\n   * Change the list of disjunctive (or) facets the helper chan handle.\n   * @method\n   * @param {string[]} facets all the attributes of the algolia records used for disjunctive faceting\n   * @return {SearchParameters} new instance\n   */\n  setDisjunctiveFacets: function setDisjunctiveFacets(facets) {\n    return this.setQueryParameters({\n      disjunctiveFacets: facets,\n    });\n  },\n  /**\n   * HitsPerPage setter\n   * Hits per page represents the number of hits retrieved for this query\n   * @method\n   * @param {number} n number of hits retrieved per page of results\n   * @return {SearchParameters} new instance\n   */\n  setHitsPerPage: function setHitsPerPage(n) {\n    if (this.hitsPerPage === n) return this;\n\n    return this.setQueryParameters({\n      hitsPerPage: n,\n    });\n  },\n  /**\n   * typoTolerance setter\n   * Set the value of typoTolerance\n   * @method\n   * @param {string} typoTolerance new value of typoTolerance (\"true\", \"false\", \"min\" or \"strict\")\n   * @return {SearchParameters} new instance\n   */\n  setTypoTolerance: function setTypoTolerance(typoTolerance) {\n    if (this.typoTolerance === typoTolerance) return this;\n\n    return this.setQueryParameters({\n      typoTolerance: typoTolerance,\n    });\n  },\n  /**\n   * Add a numeric filter for a given attribute\n   * When value is an array, they are combined with OR\n   * When value is a single value, it will combined with AND\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} operator operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number | number[]} value value of the filter\n   * @return {SearchParameters} new instance\n   * @example\n   * // for price = 50 or 40\n   * state.addNumericRefinement('price', '=', [50, 40]);\n   * @example\n   * // for size = 38 and 40\n   * state.addNumericRefinement('size', '=', 38);\n   * state.addNumericRefinement('size', '=', 40);\n   */\n  addNumericRefinement: function (attribute, operator, value) {\n    var val = valToNumber(value);\n\n    if (this.isNumericRefined(attribute, operator, val)) return this;\n\n    var mod = merge({}, this.numericRefinements);\n\n    mod[attribute] = merge({}, mod[attribute]);\n\n    if (mod[attribute][operator]) {\n      // Array copy\n      mod[attribute][operator] = mod[attribute][operator].slice();\n      // Add the element. Concat can't be used here because value can be an array.\n      mod[attribute][operator].push(val);\n    } else {\n      mod[attribute][operator] = [val];\n    }\n\n    return this.setQueryParameters({\n      numericRefinements: mod,\n    });\n  },\n  /**\n   * Get the list of conjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getConjunctiveRefinements: function (facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of disjunctive refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getDisjunctiveRefinements: function (facetName) {\n    if (!this.isDisjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.disjunctiveFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of hierarchical refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getHierarchicalRefinement: function (facetName) {\n    // we send an array but we currently do not support multiple\n    // hierarchicalRefinements for a hierarchicalFacet\n    return this.hierarchicalFacetsRefinements[facetName] || [];\n  },\n  /**\n   * Get the list of exclude refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {string[]} list of refinements\n   */\n  getExcludeRefinements: function (facetName) {\n    if (!this.isConjunctiveFacet(facetName)) {\n      return [];\n    }\n    return this.facetsExcludes[facetName] || [];\n  },\n\n  /**\n   * Remove all the numeric filter for a given (attribute, operator)\n   * @method\n   * @param {string} attribute attribute to set the filter on\n   * @param {string} [operator] operator of the filter (possible values: =, >, >=, <, <=, !=)\n   * @param {number} [number] the value to be removed\n   * @return {SearchParameters} new instance\n   */\n  removeNumericRefinement: function (attribute, operator, number) {\n    var paramValue = number;\n    if (paramValue !== undefined) {\n      if (!this.isNumericRefined(attribute, operator, paramValue)) {\n        return this;\n      }\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function (\n          value,\n          key\n        ) {\n          return (\n            key === attribute &&\n            value.op === operator &&\n            isEqualNumericRefinement(value.val, valToNumber(paramValue))\n          );\n        }),\n      });\n    } else if (operator !== undefined) {\n      if (!this.isNumericRefined(attribute, operator)) return this;\n      return this.setQueryParameters({\n        numericRefinements: this._clearNumericRefinements(function (\n          value,\n          key\n        ) {\n          return key === attribute && value.op === operator;\n        }),\n      });\n    }\n\n    if (!this.isNumericRefined(attribute)) return this;\n    return this.setQueryParameters({\n      numericRefinements: this._clearNumericRefinements(function (value, key) {\n        return key === attribute;\n      }),\n    });\n  },\n  /**\n   * Get the list of numeric refinements for a single facet\n   * @param {string} facetName name of the attribute used for faceting\n   * @return {SearchParameters.OperatorList} list of refinements\n   */\n  getNumericRefinements: function (facetName) {\n    return this.numericRefinements[facetName] || {};\n  },\n  /**\n   * Return the current refinement for the (attribute, operator)\n   * @param {string} attribute attribute in the record\n   * @param {string} operator operator applied on the refined values\n   * @return {Array.<number|number[]>} refined values\n   */\n  getNumericRefinement: function (attribute, operator) {\n    return (\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator]\n    );\n  },\n  /**\n   * Clear numeric filters.\n   * @method\n   * @private\n   * @param {string|SearchParameters.clearCallback} [attribute] optional string or function\n   * - If not given, means to clear all the filters.\n   * - If `string`, means to clear all refinements for the `attribute` named filter.\n   * - If `function`, means to clear all the refinements that return truthy values.\n   * @return {Object.<string, OperatorList>} new numeric refinements\n   */\n  _clearNumericRefinements: function _clearNumericRefinements(attribute) {\n    if (attribute === undefined) {\n      if (!objectHasKeys(this.numericRefinements)) {\n        return this.numericRefinements;\n      }\n      return {};\n    } else if (typeof attribute === 'string') {\n      return omit(this.numericRefinements, [attribute]);\n    } else if (typeof attribute === 'function') {\n      var hasChanged = false;\n      var numericRefinements = this.numericRefinements;\n      var newNumericRefinements = Object.keys(numericRefinements).reduce(\n        function (memo, key) {\n          var operators = numericRefinements[key];\n          var operatorList = {};\n\n          operators = operators || {};\n          Object.keys(operators).forEach(function (operator) {\n            var values = operators[operator] || [];\n            var outValues = [];\n            values.forEach(function (value) {\n              var predicateResult = attribute(\n                { val: value, op: operator },\n                key,\n                'numeric'\n              );\n              if (!predicateResult) outValues.push(value);\n            });\n            if (outValues.length !== values.length) {\n              hasChanged = true;\n            }\n            operatorList[operator] = outValues;\n          });\n\n          memo[key] = operatorList;\n\n          return memo;\n        },\n        {}\n      );\n\n      if (hasChanged) return newNumericRefinements;\n      return this.numericRefinements;\n    }\n\n    // We return nothing if the attribute is not undefined, a string or a function,\n    // as it is not a valid value for a refinement\n    return undefined;\n  },\n  /**\n   * Add a facet to the facets attribute of the helper configuration, if it\n   * isn't already present.\n   * @method\n   * @param {string} facet facet name to add\n   * @return {SearchParameters} new instance\n   */\n  addFacet: function addFacet(facet) {\n    if (this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      facets: this.facets.concat([facet]),\n    });\n  },\n  /**\n   * Add a disjunctive facet to the disjunctiveFacets attribute of the helper\n   * configuration, if it isn't already present.\n   * @method\n   * @param {string} facet disjunctive facet name to add\n   * @return {SearchParameters} new instance\n   */\n  addDisjunctiveFacet: function addDisjunctiveFacet(facet) {\n    if (this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.concat([facet]),\n    });\n  },\n  /**\n   * Add a hierarchical facet to the hierarchicalFacets attribute of the helper\n   * configuration.\n   * @method\n   * @param {object} hierarchicalFacet hierarchical facet to add\n   * @return {SearchParameters} new instance\n   * @throws will throw an error if a hierarchical facet with the same name was already declared\n   */\n  addHierarchicalFacet: function addHierarchicalFacet(hierarchicalFacet) {\n    if (this.isHierarchicalFacet(hierarchicalFacet.name)) {\n      throw new Error(\n        'Cannot declare two hierarchical facets with the same name: `' +\n          hierarchicalFacet.name +\n          '`'\n      );\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.concat([hierarchicalFacet]),\n    });\n  },\n  /**\n   * Add a refinement on a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters} new instance\n   */\n  addFacetRefinement: function addFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n    if (RefinementList.isRefined(this.facetsRefinements, facet, value))\n      return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.addRefinement(\n        this.facetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Exclude a value from a \"normal\" facet\n   * @method\n   * @param {string} facet attribute to apply the exclusion on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters} new instance\n   */\n  addExcludeRefinement: function addExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n    if (RefinementList.isRefined(this.facetsExcludes, facet, value))\n      return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.addRefinement(\n        this.facetsExcludes,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Adds a refinement on a disjunctive facet.\n   * @method\n   * @param {string} facet attribute to apply the faceting on\n   * @param {string} value value of the attribute (will be converted to string)\n   * @return {SearchParameters} new instance\n   */\n  addDisjunctiveFacetRefinement: function addDisjunctiveFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the disjunctiveFacets attribute of the helper configuration'\n      );\n    }\n\n    if (\n      RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)\n    )\n      return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.addRefinement(\n        this.disjunctiveFacetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * addTagRefinement adds a tag to the list used to filter the results\n   * @param {string} tag tag to be added\n   * @return {SearchParameters} new instance\n   */\n  addTagRefinement: function addTagRefinement(tag) {\n    if (this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.concat(tag),\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Remove a facet from the facets attribute of the helper configuration, if it\n   * is present.\n   * @method\n   * @param {string} facet facet name to remove\n   * @return {SearchParameters} new instance\n   */\n  removeFacet: function removeFacet(facet) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      facets: this.facets.filter(function (f) {\n        return f !== facet;\n      }),\n    });\n  },\n  /**\n   * Remove a disjunctive facet from the disjunctiveFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet disjunctive facet name to remove\n   * @return {SearchParameters} new instance\n   */\n  removeDisjunctiveFacet: function removeDisjunctiveFacet(facet) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      disjunctiveFacets: this.disjunctiveFacets.filter(function (f) {\n        return f !== facet;\n      }),\n    });\n  },\n  /**\n   * Remove a hierarchical facet from the hierarchicalFacets attribute of the\n   * helper configuration, if it is present.\n   * @method\n   * @param {string} facet hierarchical facet name to remove\n   * @return {SearchParameters} new instance\n   */\n  removeHierarchicalFacet: function removeHierarchicalFacet(facet) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return this;\n    }\n\n    return this.clearRefinements(facet).setQueryParameters({\n      hierarchicalFacets: this.hierarchicalFacets.filter(function (f) {\n        return f.name !== facet;\n      }),\n    });\n  },\n  /**\n   * Remove a refinement set on facet. If a value is provided, it will clear the\n   * refinement for the given value, otherwise it will clear all the refinement\n   * values for the faceted attribute.\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} [value] value used to filter\n   * @return {SearchParameters} new instance\n   */\n  removeFacetRefinement: function removeFacetRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n    if (!RefinementList.isRefined(this.facetsRefinements, facet, value))\n      return this;\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.removeRefinement(\n        this.facetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Remove a negative refinement on a facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters} new instance\n   */\n  removeExcludeRefinement: function removeExcludeRefinement(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n    if (!RefinementList.isRefined(this.facetsExcludes, facet, value))\n      return this;\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.removeRefinement(\n        this.facetsExcludes,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Remove a refinement on a disjunctive facet\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {string} value value used to filter\n   * @return {SearchParameters} new instance\n   */\n  removeDisjunctiveFacetRefinement: function removeDisjunctiveFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the disjunctiveFacets attribute of the helper configuration'\n      );\n    }\n    if (\n      !RefinementList.isRefined(this.disjunctiveFacetsRefinements, facet, value)\n    )\n      return this;\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.removeRefinement(\n        this.disjunctiveFacetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Remove a tag from the list of tag refinements\n   * @method\n   * @param {string} tag the tag to remove\n   * @return {SearchParameters} new instance\n   */\n  removeTagRefinement: function removeTagRefinement(tag) {\n    if (!this.isTagRefined(tag)) return this;\n\n    var modification = {\n      tagRefinements: this.tagRefinements.filter(function (t) {\n        return t !== tag;\n      }),\n    };\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters} new instance\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   * @deprecated since version 2.19.0, see {@link SearchParameters#toggleFacetRefinement}\n   */\n  toggleRefinement: function toggleRefinement(facet, value) {\n    return this.toggleFacetRefinement(facet, value);\n  },\n  /**\n   * Generic toggle refinement method to use with facet, disjunctive facets\n   * and hierarchical facets\n   * @param  {string} facet the facet to refine\n   * @param  {string} value the associated value\n   * @return {SearchParameters} new instance\n   * @throws will throw an error if the facet is not declared in the settings of the helper\n   */\n  toggleFacetRefinement: function toggleFacetRefinement(facet, value) {\n    if (this.isHierarchicalFacet(facet)) {\n      return this.toggleHierarchicalFacetRefinement(facet, value);\n    } else if (this.isConjunctiveFacet(facet)) {\n      return this.toggleConjunctiveFacetRefinement(facet, value);\n    } else if (this.isDisjunctiveFacet(facet)) {\n      return this.toggleDisjunctiveFacetRefinement(facet, value);\n    }\n\n    throw new Error(\n      'Cannot refine the undeclared facet ' +\n        facet +\n        '; it should be added to the helper options facets, disjunctiveFacets or hierarchicalFacets'\n    );\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters} new instance\n   */\n  toggleConjunctiveFacetRefinement: function toggleConjunctiveFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n\n    return this.setQueryParameters({\n      facetsRefinements: RefinementList.toggleRefinement(\n        this.facetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters} new instance\n   */\n  toggleExcludeFacetRefinement: function toggleExcludeFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isConjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the facets attribute of the helper configuration'\n      );\n    }\n\n    return this.setQueryParameters({\n      facetsExcludes: RefinementList.toggleRefinement(\n        this.facetsExcludes,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters} new instance\n   */\n  toggleDisjunctiveFacetRefinement: function toggleDisjunctiveFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the disjunctiveFacets attribute of the helper configuration'\n      );\n    }\n\n    return this.setQueryParameters({\n      disjunctiveFacetsRefinements: RefinementList.toggleRefinement(\n        this.disjunctiveFacetsRefinements,\n        facet,\n        value\n      ),\n    });\n  },\n  /**\n   * Switch the refinement applied over a facet/value\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {SearchParameters} new instance\n   */\n  toggleHierarchicalFacetRefinement: function toggleHierarchicalFacetRefinement(\n    facet,\n    value\n  ) {\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the hierarchicalFacets attribute of the helper configuration'\n      );\n    }\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facet)\n    );\n\n    var mod = {};\n\n    var upOneOrMultipleLevel =\n      this.hierarchicalFacetsRefinements[facet] !== undefined &&\n      this.hierarchicalFacetsRefinements[facet].length > 0 &&\n      // remove current refinement:\n      // refinement was 'beer > IPA', call is toggleRefine('beer > IPA'), refinement should be `beer`\n      (this.hierarchicalFacetsRefinements[facet][0] === value ||\n        // remove a parent refinement of the current refinement:\n        //  - refinement was 'beer > IPA > Flying dog'\n        //  - call is toggleRefine('beer > IPA')\n        //  - refinement should be `beer`\n        this.hierarchicalFacetsRefinements[facet][0].indexOf(\n          value + separator\n        ) === 0);\n\n    if (upOneOrMultipleLevel) {\n      if (value.indexOf(separator) === -1) {\n        // go back to root level\n        mod[facet] = [];\n      } else {\n        mod[facet] = [value.slice(0, value.lastIndexOf(separator))];\n      }\n    } else {\n      mod[facet] = [value];\n    }\n\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure(\n        {},\n        mod,\n        this.hierarchicalFacetsRefinements\n      ),\n    });\n  },\n\n  /**\n   * Adds a refinement on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @param {string} path the hierarchical facet path\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is refined\n   */\n  addHierarchicalFacetRefinement: function (facet, path) {\n    if (this.isHierarchicalFacetRefined(facet)) {\n      throw new Error(facet + ' is already refined.');\n    }\n    if (!this.isHierarchicalFacet(facet)) {\n      throw new Error(\n        facet +\n          ' is not defined in the hierarchicalFacets attribute of the helper configuration.'\n      );\n    }\n    var mod = {};\n    mod[facet] = [path];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure(\n        {},\n        mod,\n        this.hierarchicalFacetsRefinements\n      ),\n    });\n  },\n\n  /**\n   * Removes the refinement set on a hierarchical facet.\n   * @param {string} facet the facet name\n   * @return {SearchParameter} the new state\n   * @throws Error if the facet is not defined or if the facet is not refined\n   */\n  removeHierarchicalFacetRefinement: function (facet) {\n    if (!this.isHierarchicalFacetRefined(facet)) {\n      return this;\n    }\n    var mod = {};\n    mod[facet] = [];\n    return this.setQueryParameters({\n      hierarchicalFacetsRefinements: defaultsPure(\n        {},\n        mod,\n        this.hierarchicalFacetsRefinements\n      ),\n    });\n  },\n  /**\n   * Switch the tag refinement\n   * @method\n   * @param {string} tag the tag to remove or add\n   * @return {SearchParameters} new instance\n   */\n  toggleTagRefinement: function toggleTagRefinement(tag) {\n    if (this.isTagRefined(tag)) {\n      return this.removeTagRefinement(tag);\n    }\n\n    return this.addTagRefinement(tag);\n  },\n  /**\n   * Test if the facet name is from one of the disjunctive facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean} true if facet is a disjunctive facet\n   */\n  isDisjunctiveFacet: function (facet) {\n    return this.disjunctiveFacets.indexOf(facet) > -1;\n  },\n  /**\n   * Test if the facet name is from one of the hierarchical facets\n   * @method\n   * @param {string} facetName facet name to test\n   * @return {boolean} true if facetName is a hierarchical facet\n   */\n  isHierarchicalFacet: function (facetName) {\n    return this.getHierarchicalFacetByName(facetName) !== undefined;\n  },\n  /**\n   * Test if the facet name is from one of the conjunctive/normal facets\n   * @method\n   * @param {string} facet facet name to test\n   * @return {boolean} true if facet is a conjunctive facet\n   */\n  isConjunctiveFacet: function (facet) {\n    return this.facets.indexOf(facet) > -1;\n  },\n  /**\n   * Returns true if the facet is refined, either for a specific value or in\n   * general.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value, optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isFacetRefined: function isFacetRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsRefinements, facet, value);\n  },\n  /**\n   * Returns true if the facet contains exclusions or if a specific value is\n   * excluded.\n   *\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} [value] optional value. If passed will test that this value\n   * is filtering the given facet.\n   * @return {boolean} returns true if refined\n   */\n  isExcludeRefined: function isExcludeRefined(facet, value) {\n    if (!this.isConjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(this.facetsExcludes, facet, value);\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean} true if the facet is refined\n   */\n  isDisjunctiveFacetRefined: function isDisjunctiveFacetRefined(facet, value) {\n    if (!this.isDisjunctiveFacet(facet)) {\n      return false;\n    }\n    return RefinementList.isRefined(\n      this.disjunctiveFacetsRefinements,\n      facet,\n      value\n    );\n  },\n  /**\n   * Returns true if the facet contains a refinement, or if a value passed is a\n   * refinement for the facet.\n   * @method\n   * @param {string} facet name of the attribute for used for faceting\n   * @param {string} value optional, will test if the value is used for refinement\n   * if there is one, otherwise will test if the facet contains any refinement\n   * @return {boolean} true if the facet is refined\n   */\n  isHierarchicalFacetRefined: function isHierarchicalFacetRefined(\n    facet,\n    value\n  ) {\n    if (!this.isHierarchicalFacet(facet)) {\n      return false;\n    }\n\n    var refinements = this.getHierarchicalRefinement(facet);\n\n    if (!value) {\n      return refinements.length > 0;\n    }\n\n    return refinements.indexOf(value) !== -1;\n  },\n  /**\n   * Test if the triple (attribute, operator, value) is already refined.\n   * If only the attribute and the operator are provided, it tests if the\n   * contains any refinement value.\n   * @method\n   * @param {string} attribute attribute for which the refinement is applied\n   * @param {string} [operator] operator of the refinement\n   * @param {string} [value] value of the refinement\n   * @return {boolean} true if it is refined\n   */\n  isNumericRefined: function isNumericRefined(attribute, operator, value) {\n    if (value === undefined && operator === undefined) {\n      return Boolean(this.numericRefinements[attribute]);\n    }\n\n    var isOperatorDefined =\n      this.numericRefinements[attribute] &&\n      this.numericRefinements[attribute][operator] !== undefined;\n\n    if (value === undefined || !isOperatorDefined) {\n      return isOperatorDefined;\n    }\n\n    var parsedValue = valToNumber(value);\n    var isAttributeValueDefined =\n      findArray(this.numericRefinements[attribute][operator], parsedValue) !==\n      undefined;\n\n    return isOperatorDefined && isAttributeValueDefined;\n  },\n  /**\n   * Returns true if the tag refined, false otherwise\n   * @method\n   * @param {string} tag the tag to check\n   * @return {boolean} true if tag is refined\n   */\n  isTagRefined: function isTagRefined(tag) {\n    return this.tagRefinements.indexOf(tag) !== -1;\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]} returns the list of refinements\n   */\n  getRefinedDisjunctiveFacets: function getRefinedDisjunctiveFacets() {\n    // eslint-disable-next-line consistent-this\n    var self = this;\n\n    // attributes used for numeric filter can also be disjunctive\n    var disjunctiveNumericRefinedFacets = intersection(\n      Object.keys(this.numericRefinements).filter(function (facet) {\n        return Object.keys(self.numericRefinements[facet]).length > 0;\n      }),\n      this.disjunctiveFacets\n    );\n\n    return Object.keys(this.disjunctiveFacetsRefinements)\n      .filter(function (facet) {\n        return self.disjunctiveFacetsRefinements[facet].length > 0;\n      })\n      .concat(disjunctiveNumericRefinedFacets)\n      .concat(this.getRefinedHierarchicalFacets())\n      .sort();\n  },\n  /**\n   * Returns the list of all disjunctive facets refined\n   * @method\n   * @param {string} facet name of the attribute used for faceting\n   * @param {value} value value used for filtering\n   * @return {string[]} returns the list of refinements\n   */\n  getRefinedHierarchicalFacets: function getRefinedHierarchicalFacets() {\n    // eslint-disable-next-line consistent-this\n    var self = this;\n    return intersection(\n      // enforce the order between the two arrays,\n      // so that refinement name index === hierarchical facet index\n      this.hierarchicalFacets.map(function (facet) {\n        return facet.name;\n      }),\n      Object.keys(this.hierarchicalFacetsRefinements).filter(function (facet) {\n        return self.hierarchicalFacetsRefinements[facet].length > 0;\n      })\n    ).sort();\n  },\n  /**\n   * Returned the list of all disjunctive facets not refined\n   * @method\n   * @return {string[]} returns the list of facets that are not refined\n   */\n  getUnrefinedDisjunctiveFacets: function () {\n    var refinedFacets = this.getRefinedDisjunctiveFacets();\n\n    return this.disjunctiveFacets.filter(function (f) {\n      return refinedFacets.indexOf(f) === -1;\n    });\n  },\n\n  managedParameters: [\n    'index',\n\n    'facets',\n    'disjunctiveFacets',\n    'facetsRefinements',\n    'hierarchicalFacets',\n    'facetsExcludes',\n\n    'disjunctiveFacetsRefinements',\n    'numericRefinements',\n    'tagRefinements',\n    'hierarchicalFacetsRefinements',\n  ],\n\n  getQueryParams: function getQueryParams() {\n    var managedParameters = this.managedParameters;\n\n    var queryParams = {};\n\n    // eslint-disable-next-line consistent-this\n    var self = this;\n    Object.keys(this).forEach(function (paramName) {\n      var paramValue = self[paramName];\n      if (\n        managedParameters.indexOf(paramName) === -1 &&\n        paramValue !== undefined\n      ) {\n        queryParams[paramName] = paramValue;\n      }\n    });\n\n    return queryParams;\n  },\n  /**\n   * Let the user set a specific value for a given parameter. Will return the\n   * same instance if the parameter is invalid or if the value is the same as the\n   * previous one.\n   * @method\n   * @param {string} parameter the parameter name\n   * @param {any} value the value to be set, must be compliant with the definition\n   * of the attribute on the object\n   * @return {SearchParameters} the updated state\n   */\n  setQueryParameter: function setParameter(parameter, value) {\n    if (this[parameter] === value) return this;\n\n    var modification = {};\n\n    modification[parameter] = value;\n\n    return this.setQueryParameters(modification);\n  },\n  /**\n   * Let the user set any of the parameters with a plain object.\n   * @method\n   * @param {object} params all the keys and the values to be updated\n   * @return {SearchParameters} a new updated instance\n   */\n  setQueryParameters: function setQueryParameters(params) {\n    if (!params) return this;\n\n    var error = SearchParameters.validate(this, params);\n\n    if (error) {\n      throw error;\n    }\n\n    // eslint-disable-next-line consistent-this\n    var self = this;\n    var nextWithNumbers = SearchParameters._parseNumbers(params);\n    var previousPlainObject = Object.keys(this).reduce(function (acc, key) {\n      acc[key] = self[key];\n      return acc;\n    }, {});\n\n    var nextPlainObject = Object.keys(nextWithNumbers).reduce(function (\n      previous,\n      key\n    ) {\n      var isPreviousValueDefined = previous[key] !== undefined;\n      var isNextValueDefined = nextWithNumbers[key] !== undefined;\n\n      if (isPreviousValueDefined && !isNextValueDefined) {\n        return omit(previous, [key]);\n      }\n\n      if (isNextValueDefined) {\n        previous[key] = nextWithNumbers[key];\n      }\n\n      return previous;\n    },\n    previousPlainObject);\n\n    return new this.constructor(nextPlainObject);\n  },\n\n  /**\n   * Returns a new instance with the page reset. Two scenarios possible:\n   * the page is omitted -> return the given instance\n   * the page is set -> return a new instance with a page of 0\n   * @return {SearchParameters} a new updated instance\n   */\n  resetPage: function () {\n    if (this.page === undefined) {\n      return this;\n    }\n\n    return this.setPage(0);\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @param  {object} hierarchicalFacet the hierarchicalFacet object\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSortBy: function (hierarchicalFacet) {\n    return hierarchicalFacet.sortBy || ['isRefined:desc', 'name:asc'];\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet separator or the default one (`>`)\n   * @private\n   * @param  {object} hierarchicalFacet the hierarchicalFacet object\n   * @return {string} returns the hierarchicalFacet.separator or `>` as default\n   */\n  _getHierarchicalFacetSeparator: function (hierarchicalFacet) {\n    return hierarchicalFacet.separator || ' > ';\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet prefix path or null\n   * @private\n   * @param  {object} hierarchicalFacet the hierarchicalFacet object\n   * @return {string} returns the hierarchicalFacet.rootPath or null as default\n   */\n  _getHierarchicalRootPath: function (hierarchicalFacet) {\n    return hierarchicalFacet.rootPath || null;\n  },\n\n  /**\n   * Helper function to check if we show the parent level of the hierarchicalFacet\n   * @private\n   * @param  {object} hierarchicalFacet the hierarchicalFacet object\n   * @return {string} returns the hierarchicalFacet.showParentLevel or true as default\n   */\n  _getHierarchicalShowParentLevel: function (hierarchicalFacet) {\n    if (typeof hierarchicalFacet.showParentLevel === 'boolean') {\n      return hierarchicalFacet.showParentLevel;\n    }\n    return true;\n  },\n\n  /**\n   * Helper function to get the hierarchicalFacet by it's name\n   * @param  {string} hierarchicalFacetName the hierarchicalFacet name\n   * @return {object} a hierarchicalFacet\n   */\n  getHierarchicalFacetByName: function (hierarchicalFacetName) {\n    return find(this.hierarchicalFacets, function (f) {\n      return f.name === hierarchicalFacetName;\n    });\n  },\n\n  /**\n   * Get the current breadcrumb for a hierarchical facet, as an array\n   * @param  {string} facetName Hierarchical facet name\n   * @return {array.<string>} the path as an array of string\n   */\n  getHierarchicalFacetBreadcrumb: function (facetName) {\n    if (!this.isHierarchicalFacet(facetName)) {\n      return [];\n    }\n\n    var refinement = this.getHierarchicalRefinement(facetName)[0];\n    if (!refinement) return [];\n\n    var separator = this._getHierarchicalFacetSeparator(\n      this.getHierarchicalFacetByName(facetName)\n    );\n    var path = refinement.split(separator);\n    return path.map(function (part) {\n      return part.trim();\n    });\n  },\n\n  toString: function () {\n    return JSON.stringify(this, null, 2);\n  },\n};\n\n/**\n * Callback used for clearRefinement method\n * @callback SearchParameters.clearCallback\n * @param {OperatorList|FacetList} value the value of the filter\n * @param {string} key the current attribute name\n * @param {string} type `numeric`, `disjunctiveFacet`, `conjunctiveFacet`, `hierarchicalFacet` or `exclude`\n * depending on the type of facet\n * @return {boolean} `true` if the element should be removed. `false` otherwise.\n */\nmodule.exports = SearchParameters;\n","'use strict';\n\nconst split = require('split-string');\nconst flatten = require('arr-flatten');\nconst union = require('union-value');\nconst forOwn = require('for-own');\nconst typeOf = require('kind-of');\nconst get = require('get-value');\n\nfunction groupFn(arr, props) {\n  if (arr == null) {\n    return [];\n  }\n\n  if (!Array.isArray(arr)) {\n    throw new TypeError('group-array expects an array.');\n  }\n\n  if (arguments.length === 1) {\n    return arr;\n  }\n\n  let args = flatten([].slice.call(arguments, 1));\n  let groups = groupBy(arr, args[0]);\n\n  for (let i = 1; i < args.length; i++) {\n    toGroup(groups, args[i]);\n  }\n  return groups;\n}\n\nfunction groupBy(arr, prop, key) {\n  let groups = {};\n\n  for (let i = 0; i < arr.length; i++) {\n    let obj = arr[i];\n    let val;\n\n    // allow a function to modify the object\n    // and/or return a val to use\n    if (typeof prop === 'function') {\n      val = prop.call(groups, obj, key);\n    } else {\n      val = get(obj, prop);\n    }\n\n    switch (typeOf(val)) {\n      case 'undefined':\n        break;\n      case 'string':\n      case 'number':\n      case 'boolean':\n        union(groups, escape(String(val)), obj);\n        break;\n      case 'object':\n      case 'array':\n        eachValue(groups, obj, val);\n        break;\n      case 'function':\n        throw new Error('invalid argument type: ' + key);\n    }\n  }\n  return groups;\n}\n\nfunction eachValue(groups, obj, val) {\n  if (Array.isArray(val)) {\n    val.forEach(key => {\n      union(groups, escape(key), obj);\n    });\n  } else {\n    forOwn(val, (v, key) => {\n      union(groups, escape(key), obj);\n    });\n  }\n}\n\nfunction toGroup(groups, prop) {\n  forOwn(groups, (val, key) => {\n    if (!Array.isArray(val)) {\n      groups[key] = toGroup(val, prop, key);\n    } else {\n      groups[key] = groupBy(val, prop, key);\n    }\n  });\n  return groups;\n}\n\nfunction escape(str) {\n  var opts = {\n    strict: false,\n    keepEscaping: true,\n    keepDoubleQuotes: true,\n    keepSingleQuotes: true\n  };\n\n  try {\n    return split(str, opts).join('\\\\.');\n  } catch (err) {\n    return str;\n  }\n}\n\n/**\n * Expose `groupArray`\n */\n\nmodule.exports = groupFn;\n","'use strict';\n\nmodule.exports = (input, options = {}, fn) => {\n  if (typeof input !== 'string') throw new TypeError('expected a string');\n\n  if (typeof options === 'function') {\n    fn = options;\n    options = {};\n  }\n\n  let separator = options.separator || '.';\n  let ast = { type: 'root', nodes: [], stash: [''] };\n  let stack = [ast];\n  let state = { input, separator, stack };\n  let string = input;\n  let value, node;\n  let i = -1;\n\n  state.bos = () => i === 0;\n  state.eos = () => i === string.length;\n  state.prev = () => string[i - 1];\n  state.next = () => string[i + 1];\n\n  let quotes = options.quotes || [];\n  let openers = options.brackets || {};\n\n  if (options.brackets === true) {\n    openers = { '[': ']', '(': ')', '{': '}', '<': '>' };\n  }\n  if (options.quotes === true) {\n    quotes = ['\"', '\\'', '`'];\n  }\n\n  let closers = invert(openers);\n  let keep = options.keep || (value => value !== '\\\\');\n\n  const block = () => (state.block = stack[stack.length - 1]);\n  const peek = () => string[i + 1];\n  const next = () => string[++i];\n  const append = value => {\n    state.value = value;\n    if (value && keep(value, state) !== false) {\n      state.block.stash[state.block.stash.length - 1] += value;\n    }\n  };\n\n  const closeIndex = (value, startIdx) => {\n    let idx = string.indexOf(value, startIdx);\n    if (idx > -1 && string[idx - 1] === '\\\\') {\n      idx = closeIndex(value, idx + 1);\n    }\n    return idx;\n  };\n\n  for (; i < string.length - 1;) {\n    state.value = value = next();\n    state.index = i;\n    block();\n\n    // handle escaped characters\n    if (value === '\\\\') {\n      if (peek() === '\\\\') {\n        append(value + next());\n      } else {\n        // if the next char is not '\\\\', allow the \"append\" function\n        // to determine if the backslashes should be added\n        append(value);\n        append(next());\n      }\n      continue;\n    }\n\n    // handle quoted strings\n    if (quotes.includes(value)) {\n      let pos = i + 1;\n      let idx = closeIndex(value, pos);\n\n      if (idx > -1) {\n        append(value); // append opening quote\n        append(string.slice(pos, idx)); // append quoted string\n        append(string[idx]); // append closing quote\n        i = idx;\n        continue;\n      }\n\n      append(value);\n      continue;\n    }\n\n    // handle opening brackets, if not disabled\n    if (options.brackets !== false && openers[value]) {\n      node = { type: 'bracket', nodes: [] };\n      node.stash = keep(value) !== false ? [value] : [''];\n      node.parent = state.block;\n      state.block.nodes.push(node);\n      stack.push(node);\n      continue;\n    }\n\n    // handle closing brackets, if not disabled\n    if (options.brackets !== false && closers[value]) {\n      if (stack.length === 1) {\n        append(value);\n        continue;\n      }\n\n      append(value);\n      node = stack.pop();\n      block();\n      append(node.stash.join(''));\n      continue;\n    }\n\n    // push separator onto stash\n    if (value === separator && state.block.type === 'root') {\n      if (typeof fn === 'function' && fn(state) === false) {\n        append(value);\n        continue;\n      }\n      state.block.stash.push('');\n      continue;\n    }\n\n    // append value onto the last string on the stash\n    append(value);\n  }\n\n  node = stack.pop();\n\n  while (node !== ast) {\n    if (options.strict === true) {\n      let column = i - node.stash.length + 1;\n      throw new SyntaxError(`Unmatched: \"${node.stash[0]}\", at column ${column}`);\n    }\n\n    value = (node.parent.stash.pop() + node.stash.join('.'));\n    node.parent.stash = node.parent.stash.concat(value.split('.'));\n    node = stack.pop();\n  }\n\n  return node.stash;\n};\n\nfunction invert(obj) {\n  let inverted = {};\n  for (const key of Object.keys(obj)) inverted[obj[key]] = key;\n  return inverted;\n}\n","'use strict';\n\nmodule.exports = '3.14.0';\n","'use strict';\n\n/**\n * Replaces a leading - with \\-\n * @private\n * @param {any} value the facet value to replace\n * @returns {any} the escaped facet value or the value if it was not a string\n */\nfunction escapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return String(value).replace(/^-/, '\\\\-');\n}\n\n/**\n * Replaces a leading \\- with -\n * @private\n * @param {any} value the escaped facet value\n * @returns {any} the unescaped facet value or the value if it was not a string\n */\nfunction unescapeFacetValue(value) {\n  if (typeof value !== 'string') return value;\n\n  return value.replace(/^\\\\-/, '-');\n}\n\nmodule.exports = {\n  escapeFacetValue: escapeFacetValue,\n  unescapeFacetValue: unescapeFacetValue,\n};\n","'use strict';\n\nvar compact = require('../functions/compact');\nvar defaultsPure = require('../functions/defaultsPure');\nvar fv = require('../functions/escapeFacetValue');\nvar find = require('../functions/find');\nvar findIndex = require('../functions/findIndex');\nvar formatSort = require('../functions/formatSort');\nvar merge = require('../functions/merge');\nvar orderBy = require('../functions/orderBy');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nvar generateHierarchicalTree = require('./generate-hierarchical-tree');\n\n/**\n * @typedef SearchResults.Facet\n * @type {object}\n * @property {string} name name of the attribute in the record\n * @property {object} data the faceting data: value, number of entries\n * @property {object} stats undefined unless facet_stats is retrieved from algolia\n */\n\n/**\n * @typedef SearchResults.HierarchicalFacet\n * @type {object}\n * @property {string} name name of the current value given the hierarchical level, trimmed.\n * If root node, you get the facet name\n * @property {number} count number of objects matching this hierarchical value\n * @property {string} path the current hierarchical value full path\n * @property {boolean} isRefined `true` if the current value was refined, `false` otherwise\n * @property {HierarchicalFacet[]} data sub values for the current level\n */\n\n/**\n * @typedef SearchResults.FacetValue\n * @type {object}\n * @property {string} name the facet value itself\n * @property {number} count times this facet appears in the results\n * @property {boolean} isRefined is the facet currently selected\n * @property {boolean} isExcluded is the facet currently excluded (only for conjunctive facets)\n */\n\n/**\n * @typedef Refinement\n * @type {object}\n * @property {string} type the type of filter used:\n * `numeric`, `facet`, `exclude`, `disjunctive`, `hierarchical`\n * @property {string} attributeName name of the attribute used for filtering\n * @property {string} name the value of the filter\n * @property {number} numericValue the value as a number. Only for numeric filters.\n * @property {string} operator the operator used. Only for numeric filters.\n * @property {number} count the number of computed hits for this filter. Only on facets.\n * @property {boolean} exhaustive if the count is exhaustive\n */\n\n/**\n * Turn an array of attributes in an object of attributes with their position in the array as value\n * @param {string[]} attributes the list of attributes in the record\n * @return {object} the list of attributes indexed by attribute name\n */\nfunction getIndices(attributes) {\n  var indices = {};\n\n  attributes.forEach(function (val, idx) {\n    indices[val] = idx;\n  });\n\n  return indices;\n}\n\nfunction assignFacetStats(dest, facetStats, key) {\n  if (facetStats && facetStats[key]) {\n    dest.stats = facetStats[key];\n  }\n}\n\n/**\n * @typedef {Object} HierarchicalFacet\n * @property {string} name\n * @property {string[]} attributes\n */\n\n/**\n * @param {HierarchicalFacet[]} hierarchicalFacets All hierarchical facets\n * @param {string} hierarchicalAttributeName The name of the hierarchical attribute\n * @return {HierarchicalFacet} The hierarchical facet matching the attribute name\n */\nfunction findMatchingHierarchicalFacetFromAttributeName(\n  hierarchicalFacets,\n  hierarchicalAttributeName\n) {\n  return find(\n    hierarchicalFacets,\n    function facetKeyMatchesAttribute(hierarchicalFacet) {\n      var facetNames = hierarchicalFacet.attributes || [];\n      return facetNames.indexOf(hierarchicalAttributeName) > -1;\n    }\n  );\n}\n\n// eslint-disable-next-line valid-jsdoc\n/**\n * Constructor for SearchResults\n * @class\n * @classdesc SearchResults contains the results of a query to Algolia using the\n * {@link AlgoliaSearchHelper}.\n * @param {SearchParameters} state state that led to the response\n * @param {array.<object>} results the results from algolia client\n * @example <caption>SearchResults of the first query in\n * <a href=\"http://demos.algolia.com/instant-search-demo\">the instant search demo</a></caption>\n{\n   \"hitsPerPage\": 10,\n   \"processingTimeMS\": 2,\n   \"facets\": [\n      {\n         \"name\": \"type\",\n         \"data\": {\n            \"HardGood\": 6627,\n            \"BlackTie\": 550,\n            \"Music\": 665,\n            \"Software\": 131,\n            \"Game\": 456,\n            \"Movie\": 1571\n         },\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"Free shipping\": 5507\n         },\n         \"name\": \"shipping\"\n      }\n  ],\n   \"hits\": [\n      {\n         \"thumbnailImage\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_54x108_s.gif\",\n         \"_highlightResult\": {\n            \"shortDescription\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n               \"matchedWords\": []\n            },\n            \"category\": {\n               \"matchLevel\": \"none\",\n               \"value\": \"Computer Security Software\",\n               \"matchedWords\": []\n            },\n            \"manufacturer\": {\n               \"matchedWords\": [],\n               \"value\": \"Webroot\",\n               \"matchLevel\": \"none\"\n            },\n            \"name\": {\n               \"value\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n               \"matchedWords\": [],\n               \"matchLevel\": \"none\"\n            }\n         },\n         \"image\": \"http://img.bbystatic.com/BestBuy_US/images/products/1688/1688832_105x210_sc.jpg\",\n         \"shipping\": \"Free shipping\",\n         \"bestSellingRank\": 4,\n         \"shortDescription\": \"Safeguard your PC, Mac, Android and iOS devices with comprehensive Internet protection\",\n         \"url\": \"http://www.bestbuy.com/site/webroot-secureanywhere-internet-security-3-devi…d=1219060687969&skuId=1688832&cmp=RMX&ky=2d3GfEmNIzjA0vkzveHdZEBgpPCyMnLTJ\",\n         \"name\": \"Webroot SecureAnywhere Internet Security (3-Device) (1-Year Subscription) - Mac/Windows\",\n         \"category\": \"Computer Security Software\",\n         \"salePrice_range\": \"1 - 50\",\n         \"objectID\": \"1688832\",\n         \"type\": \"Software\",\n         \"customerReviewCount\": 5980,\n         \"salePrice\": 49.99,\n         \"manufacturer\": \"Webroot\"\n      },\n      ....\n  ],\n   \"nbHits\": 10000,\n   \"disjunctiveFacets\": [\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"5\": 183,\n            \"12\": 112,\n            \"7\": 149,\n            ...\n         },\n         \"name\": \"customerReviewCount\",\n         \"stats\": {\n            \"max\": 7461,\n            \"avg\": 157.939,\n            \"min\": 1\n         }\n      },\n      {\n         \"data\": {\n            \"Printer Ink\": 142,\n            \"Wireless Speakers\": 60,\n            \"Point & Shoot Cameras\": 48,\n            ...\n         },\n         \"name\": \"category\",\n         \"exhaustive\": false\n      },\n      {\n         \"exhaustive\": false,\n         \"data\": {\n            \"> 5000\": 2,\n            \"1 - 50\": 6524,\n            \"501 - 2000\": 566,\n            \"201 - 500\": 1501,\n            \"101 - 200\": 1360,\n            \"2001 - 5000\": 47\n         },\n         \"name\": \"salePrice_range\"\n      },\n      {\n         \"data\": {\n            \"Dynex™\": 202,\n            \"Insignia™\": 230,\n            \"PNY\": 72,\n            ...\n         },\n         \"name\": \"manufacturer\",\n         \"exhaustive\": false\n      }\n  ],\n   \"query\": \"\",\n   \"nbPages\": 100,\n   \"page\": 0,\n   \"index\": \"bestbuy\"\n}\n **/\nfunction SearchResults(state, results, options) {\n  var mainSubResponse = results[0];\n\n  this._rawResults = results;\n\n  // eslint-disable-next-line consistent-this\n  var self = this;\n\n  // https://www.algolia.com/doc/api-reference/api-methods/search/#response\n  Object.keys(mainSubResponse).forEach(function (key) {\n    self[key] = mainSubResponse[key];\n  });\n\n  // Make every key of the result options reachable from the instance\n  Object.keys(options || {}).forEach(function (key) {\n    self[key] = options[key];\n  });\n\n  /**\n   * query used to generate the results\n   * @name query\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The query as parsed by the engine given all the rules.\n   * @name parsedQuery\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * all the records that match the search parameters. Each record is\n   * augmented with a new attribute `_highlightResult`\n   * which is an object keyed by attribute and with the following properties:\n   * - `value` : the value of the facet highlighted (html)\n   * - `matchLevel`: `full`, `partial` or `none`, depending on how the query terms match\n   * @name hits\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * index where the results come from\n   * @name index\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * number of hits per page requested\n   * @name hitsPerPage\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of hits of this query on the index\n   * @name nbHits\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * total number of pages with respect to the number of hits per page and the total number of hits\n   * @name nbPages\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * current page\n   * @name page\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * The position if the position was guessed by IP.\n   * @name aroundLatLng\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"48.8637,2.3615\",\n   */\n  /**\n   * The radius computed by Algolia.\n   * @name automaticRadius\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"126792922\",\n   */\n  /**\n   * String identifying the server used to serve this request.\n   *\n   * getRankingInfo needs to be set to `true` for this to be returned\n   *\n   * @name serverUsed\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   * @example \"c7-use-2.algolia.net\",\n   */\n  /**\n   * Boolean that indicates if the computation of the counts did time out.\n   * @deprecated\n   * @name timeoutCounts\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Boolean that indicates if the computation of the hits did time out.\n   * @deprecated\n   * @name timeoutHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the counts of the facets is exhaustive\n   * @name exhaustiveFacetsCount\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * True if the number of hits is exhaustive\n   * @name exhaustiveNbHits\n   * @member {boolean}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * Contains the userData if they are set by a [query rule](https://www.algolia.com/doc/guides/query-rules/query-rules-overview/).\n   * @name userData\n   * @member {object[]}\n   * @memberof SearchResults\n   * @instance\n   */\n  /**\n   * queryID is the unique identifier of the query used to generate the current search results.\n   * This value is only available if the `clickAnalytics` search parameter is set to `true`.\n   * @name queryID\n   * @member {string}\n   * @memberof SearchResults\n   * @instance\n   */\n\n  /**\n   * sum of the processing time of all the queries\n   * @name processingTimeMS\n   * @member {number}\n   * @memberof SearchResults\n   * @instance\n   */\n  this.processingTimeMS = results.reduce(function (sum, result) {\n    return result.processingTimeMS === undefined\n      ? sum\n      : sum + result.processingTimeMS;\n  }, 0);\n\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.disjunctiveFacets = [];\n  /**\n   * disjunctive facets results\n   * @member {SearchResults.HierarchicalFacet[]}\n   */\n  this.hierarchicalFacets = state.hierarchicalFacets.map(\n    function initFutureTree() {\n      return [];\n    }\n  );\n  /**\n   * other facets results\n   * @member {SearchResults.Facet[]}\n   */\n  this.facets = [];\n\n  var disjunctiveFacets = state.getRefinedDisjunctiveFacets();\n\n  var facetsIndices = getIndices(state.facets);\n  var disjunctiveFacetsIndices = getIndices(state.disjunctiveFacets);\n  var nextDisjunctiveResult = 1;\n\n  // Since we send request only for disjunctive facets that have been refined,\n  // we get the facets information from the first, general, response.\n\n  var mainFacets = mainSubResponse.facets || {};\n\n  Object.keys(mainFacets).forEach(function (facetKey) {\n    var facetValueObject = mainFacets[facetKey];\n\n    var hierarchicalFacet = findMatchingHierarchicalFacetFromAttributeName(\n      state.hierarchicalFacets,\n      facetKey\n    );\n\n    if (hierarchicalFacet) {\n      // Place the hierarchicalFacet data at the correct index depending on\n      // the attributes order that was defined at the helper initialization\n      var facetIndex = hierarchicalFacet.attributes.indexOf(facetKey);\n      var idxAttributeName = findIndex(state.hierarchicalFacets, function (f) {\n        return f.name === hierarchicalFacet.name;\n      });\n      self.hierarchicalFacets[idxAttributeName][facetIndex] = {\n        attribute: facetKey,\n        data: facetValueObject,\n        exhaustive: mainSubResponse.exhaustiveFacetsCount,\n      };\n    } else {\n      var isFacetDisjunctive = state.disjunctiveFacets.indexOf(facetKey) !== -1;\n      var isFacetConjunctive = state.facets.indexOf(facetKey) !== -1;\n      var position;\n\n      if (isFacetDisjunctive) {\n        position = disjunctiveFacetsIndices[facetKey];\n        self.disjunctiveFacets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount,\n        };\n        assignFacetStats(\n          self.disjunctiveFacets[position],\n          mainSubResponse.facets_stats,\n          facetKey\n        );\n      }\n      if (isFacetConjunctive) {\n        position = facetsIndices[facetKey];\n        self.facets[position] = {\n          name: facetKey,\n          data: facetValueObject,\n          exhaustive: mainSubResponse.exhaustiveFacetsCount,\n        };\n        assignFacetStats(\n          self.facets[position],\n          mainSubResponse.facets_stats,\n          facetKey\n        );\n      }\n    }\n  });\n\n  // Make sure we do not keep holes within the hierarchical facets\n  this.hierarchicalFacets = compact(this.hierarchicalFacets);\n\n  // aggregate the refined disjunctive facets\n  disjunctiveFacets.forEach(function (disjunctiveFacet) {\n    var result = results[nextDisjunctiveResult];\n    var facets = result && result.facets ? result.facets : {};\n    var hierarchicalFacet = state.getHierarchicalFacetByName(disjunctiveFacet);\n\n    // There should be only item in facets.\n    Object.keys(facets).forEach(function (dfacet) {\n      var facetResults = facets[dfacet];\n\n      var position;\n\n      if (hierarchicalFacet) {\n        position = findIndex(state.hierarchicalFacets, function (f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(\n          self.hierarchicalFacets[position],\n          function (f) {\n            return f.attribute === dfacet;\n          }\n        );\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = merge(\n          {},\n          self.hierarchicalFacets[position][attributeIndex].data,\n          facetResults\n        );\n      } else {\n        position = disjunctiveFacetsIndices[dfacet];\n\n        var dataFromMainRequest =\n          (mainSubResponse.facets && mainSubResponse.facets[dfacet]) || {};\n\n        self.disjunctiveFacets[position] = {\n          name: dfacet,\n          data: defaultsPure({}, facetResults, dataFromMainRequest),\n          exhaustive: result.exhaustiveFacetsCount,\n        };\n        assignFacetStats(\n          self.disjunctiveFacets[position],\n          result.facets_stats,\n          dfacet\n        );\n\n        if (state.disjunctiveFacetsRefinements[dfacet]) {\n          state.disjunctiveFacetsRefinements[dfacet].forEach(function (\n            refinementValue\n          ) {\n            // add the disjunctive refinements if it is no more retrieved\n            if (\n              !self.disjunctiveFacets[position].data[refinementValue] &&\n              state.disjunctiveFacetsRefinements[dfacet].indexOf(\n                unescapeFacetValue(refinementValue)\n              ) > -1\n            ) {\n              self.disjunctiveFacets[position].data[refinementValue] = 0;\n            }\n          });\n        }\n      }\n    });\n    nextDisjunctiveResult++;\n  });\n\n  // if we have some parent level values for hierarchical facets, merge them\n  state.getRefinedHierarchicalFacets().forEach(function (refinedFacet) {\n    var hierarchicalFacet = state.getHierarchicalFacetByName(refinedFacet);\n    var separator = state._getHierarchicalFacetSeparator(hierarchicalFacet);\n\n    var currentRefinement = state.getHierarchicalRefinement(refinedFacet);\n    // if we are already at a root refinement (or no refinement at all), there is no\n    // root level values request\n    if (\n      currentRefinement.length === 0 ||\n      currentRefinement[0].split(separator).length < 2\n    ) {\n      return;\n    }\n\n    results.slice(nextDisjunctiveResult).forEach(function (result) {\n      var facets = result && result.facets ? result.facets : {};\n\n      Object.keys(facets).forEach(function (dfacet) {\n        var facetResults = facets[dfacet];\n        var position = findIndex(state.hierarchicalFacets, function (f) {\n          return f.name === hierarchicalFacet.name;\n        });\n        var attributeIndex = findIndex(\n          self.hierarchicalFacets[position],\n          function (f) {\n            return f.attribute === dfacet;\n          }\n        );\n\n        // previous refinements and no results so not able to find it\n        if (attributeIndex === -1) {\n          return;\n        }\n\n        // when we always get root levels, if the hits refinement is `beers > IPA` (count: 5),\n        // then the disjunctive values will be `beers` (count: 100),\n        // but we do not want to display\n        //   | beers (100)\n        //     > IPA (5)\n        // We want\n        //   | beers (5)\n        //     > IPA (5)\n        var defaultData = {};\n\n        if (currentRefinement.length > 0) {\n          var root = currentRefinement[0].split(separator)[0];\n          defaultData[root] =\n            self.hierarchicalFacets[position][attributeIndex].data[root];\n        }\n\n        self.hierarchicalFacets[position][attributeIndex].data = defaultsPure(\n          defaultData,\n          facetResults,\n          self.hierarchicalFacets[position][attributeIndex].data\n        );\n      });\n\n      nextDisjunctiveResult++;\n    });\n  });\n\n  // add the excludes\n  Object.keys(state.facetsExcludes).forEach(function (facetName) {\n    var excludes = state.facetsExcludes[facetName];\n    var position = facetsIndices[facetName];\n\n    self.facets[position] = {\n      name: facetName,\n      data: mainFacets[facetName],\n      exhaustive: mainSubResponse.exhaustiveFacetsCount,\n    };\n    excludes.forEach(function (facetValue) {\n      self.facets[position] = self.facets[position] || { name: facetName };\n      self.facets[position].data = self.facets[position].data || {};\n      self.facets[position].data[facetValue] = 0;\n    });\n  });\n\n  /**\n   * @type {Array}\n   */\n  this.hierarchicalFacets = this.hierarchicalFacets.map(\n    generateHierarchicalTree(state)\n  );\n\n  /**\n   * @type {Array}\n   */\n  this.facets = compact(this.facets);\n  /**\n   * @type {Array}\n   */\n  this.disjunctiveFacets = compact(this.disjunctiveFacets);\n\n  this._state = state;\n}\n\n/**\n * Get a facet object with its name\n * @deprecated\n * @param {string} name name of the faceted attribute\n * @return {SearchResults.Facet} the facet object\n */\nSearchResults.prototype.getFacetByName = function (name) {\n  function predicate(facet) {\n    return facet.name === name;\n  }\n\n  return (\n    find(this.facets, predicate) ||\n    find(this.disjunctiveFacets, predicate) ||\n    find(this.hierarchicalFacets, predicate)\n  );\n};\n\n/**\n * Get the facet values of a specified attribute from a SearchResults object.\n * @private\n * @param {SearchResults} results the search results to search in\n * @param {string} attribute name of the faceted attribute to search for\n * @return {array|object} facet values. For the hierarchical facets it is an object.\n */\nfunction extractNormalizedFacetValues(results, attribute) {\n  function predicate(facet) {\n    return facet.name === attribute;\n  }\n\n  if (results._state.isConjunctiveFacet(attribute)) {\n    var facet = find(results.facets, predicate);\n    if (!facet) return [];\n\n    return Object.keys(facet.data).map(function (name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: facet.data[name],\n        isRefined: results._state.isFacetRefined(attribute, value),\n        isExcluded: results._state.isExcludeRefined(attribute, name),\n      };\n    });\n  } else if (results._state.isDisjunctiveFacet(attribute)) {\n    var disjunctiveFacet = find(results.disjunctiveFacets, predicate);\n    if (!disjunctiveFacet) return [];\n\n    return Object.keys(disjunctiveFacet.data).map(function (name) {\n      var value = escapeFacetValue(name);\n      return {\n        name: name,\n        escapedValue: value,\n        count: disjunctiveFacet.data[name],\n        isRefined: results._state.isDisjunctiveFacetRefined(attribute, value),\n      };\n    });\n  } else if (results._state.isHierarchicalFacet(attribute)) {\n    var hierarchicalFacetValues = find(results.hierarchicalFacets, predicate);\n    if (!hierarchicalFacetValues) return hierarchicalFacetValues;\n\n    var hierarchicalFacet =\n      results._state.getHierarchicalFacetByName(attribute);\n    var separator =\n      results._state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    var currentRefinement = unescapeFacetValue(\n      results._state.getHierarchicalRefinement(attribute)[0] || ''\n    );\n\n    if (currentRefinement.indexOf(hierarchicalFacet.rootPath) === 0) {\n      currentRefinement = currentRefinement.replace(\n        hierarchicalFacet.rootPath + separator,\n        ''\n      );\n    }\n\n    var currentRefinementSplit = currentRefinement.split(separator);\n    currentRefinementSplit.unshift(attribute);\n\n    setIsRefined(hierarchicalFacetValues, currentRefinementSplit, 0);\n\n    return hierarchicalFacetValues;\n  }\n\n  return undefined;\n}\n\n/**\n * Set the isRefined of a hierarchical facet result based on the current state.\n * @param {SearchResults.HierarchicalFacet} item Hierarchical facet to fix\n * @param {string[]} currentRefinement array of parts of the current hierarchical refinement\n * @param {number} depth recursion depth in the currentRefinement\n * @return {undefined} function mutates the item\n */\nfunction setIsRefined(item, currentRefinement, depth) {\n  item.isRefined = item.name === currentRefinement[depth];\n  if (item.data) {\n    item.data.forEach(function (child) {\n      setIsRefined(child, currentRefinement, depth + 1);\n    });\n  }\n}\n\n/**\n * Sort nodes of a hierarchical or disjunctive facet results\n * @private\n * @param {function} sortFn sort function to apply\n * @param {HierarchicalFacet|Array} node node upon which we want to apply the sort\n * @param {string[]} names attribute names\n * @param {number} [level=0] current index in the names array\n * @return {HierarchicalFacet|Array} sorted node\n */\nfunction recSort(sortFn, node, names, level) {\n  level = level || 0;\n\n  if (Array.isArray(node)) {\n    return sortFn(node, names[level]);\n  }\n\n  if (!node.data || node.data.length === 0) {\n    return node;\n  }\n\n  var children = node.data.map(function (childNode) {\n    return recSort(sortFn, childNode, names, level + 1);\n  });\n  var sortedChildren = sortFn(children, names[level]);\n  var newNode = defaultsPure({ data: sortedChildren }, node);\n  return newNode;\n}\n\nSearchResults.DEFAULT_SORT = ['isRefined:desc', 'count:desc', 'name:asc'];\n\nfunction vanillaSortFn(order, data) {\n  return data.sort(order);\n}\n\n/**\n * @typedef FacetOrdering\n * @type {Object}\n * @property {string[]} [order]\n * @property {'count' | 'alpha' | 'hidden'} [sortRemainingBy]\n */\n\n/**\n * Sorts facet arrays via their facet ordering\n * @param {Array} facetValues the values\n * @param {FacetOrdering} facetOrdering the ordering\n * @returns {Array} the sorted facet values\n */\nfunction sortViaFacetOrdering(facetValues, facetOrdering) {\n  var orderedFacets = [];\n  var remainingFacets = [];\n\n  var order = facetOrdering.order || [];\n  /**\n   * an object with the keys being the values in order, the values their index:\n   * ['one', 'two'] -> { one: 0, two: 1 }\n   */\n  var reverseOrder = order.reduce(function (acc, name, i) {\n    acc[name] = i;\n    return acc;\n  }, {});\n\n  facetValues.forEach(function (item) {\n    // hierarchical facets get sorted using their raw name\n    var name = item.path || item.name;\n    if (reverseOrder[name] !== undefined) {\n      orderedFacets[reverseOrder[name]] = item;\n    } else {\n      remainingFacets.push(item);\n    }\n  });\n\n  orderedFacets = orderedFacets.filter(function (facet) {\n    return facet;\n  });\n\n  var sortRemainingBy = facetOrdering.sortRemainingBy;\n  var ordering;\n  if (sortRemainingBy === 'hidden') {\n    return orderedFacets;\n  } else if (sortRemainingBy === 'alpha') {\n    ordering = [\n      ['path', 'name'],\n      ['asc', 'asc'],\n    ];\n  } else {\n    ordering = [['count'], ['desc']];\n  }\n\n  return orderedFacets.concat(\n    orderBy(remainingFacets, ordering[0], ordering[1])\n  );\n}\n\n/**\n * @param {SearchResults} results the search results class\n * @param {string} attribute the attribute to retrieve ordering of\n * @returns {FacetOrdering | undefined} the facet ordering\n */\nfunction getFacetOrdering(results, attribute) {\n  return (\n    results.renderingContent &&\n    results.renderingContent.facetOrdering &&\n    results.renderingContent.facetOrdering.values &&\n    results.renderingContent.facetOrdering.values[attribute]\n  );\n}\n\n/**\n * Get a the list of values for a given facet attribute. Those values are sorted\n * refinement first, descending count (bigger value on top), and name ascending\n * (alphabetical order). The sort formula can overridden using either string based\n * predicates or a function.\n *\n * This method will return all the values returned by the Algolia engine plus all\n * the values already refined. This means that it can happen that the\n * `maxValuesPerFacet` [configuration](https://www.algolia.com/doc/rest-api/search#param-maxValuesPerFacet)\n * might not be respected if you have facet values that are already refined.\n * @param {string} attribute attribute name\n * @param {object} opts configuration options.\n * @param {boolean} [opts.facetOrdering]\n * Force the use of facetOrdering from the result if a sortBy is present. If\n * sortBy isn't present, facetOrdering will be used automatically.\n * @param {Array.<string> | function} opts.sortBy\n * When using strings, it consists of\n * the name of the [FacetValue](#SearchResults.FacetValue) or the\n * [HierarchicalFacet](#SearchResults.HierarchicalFacet) attributes with the\n * order (`asc` or `desc`). For example to order the value by count, the\n * argument would be `['count:asc']`.\n *\n * If only the attribute name is specified, the ordering defaults to the one\n * specified in the default value for this attribute.\n *\n * When not specified, the order is\n * ascending.  This parameter can also be a function which takes two facet\n * values and should return a number, 0 if equal, 1 if the first argument is\n * bigger or -1 otherwise.\n *\n * The default value for this attribute `['isRefined:desc', 'count:desc', 'name:asc']`\n * @return {FacetValue[]|HierarchicalFacet|undefined} depending on the type of facet of\n * the attribute requested (hierarchical, disjunctive or conjunctive)\n * @example\n * helper.on('result', function(event){\n *   //get values ordered only by name ascending using the string predicate\n *   event.results.getFacetValues('city', {sortBy: ['name:asc']});\n *   //get values  ordered only by count ascending using a function\n *   event.results.getFacetValues('city', {\n *     // this is equivalent to ['count:asc']\n *     sortBy: function(a, b) {\n *       if (a.count === b.count) return 0;\n *       if (a.count > b.count)   return 1;\n *       if (b.count > a.count)   return -1;\n *     }\n *   });\n * });\n */\nSearchResults.prototype.getFacetValues = function (attribute, opts) {\n  var facetValues = extractNormalizedFacetValues(this, attribute);\n  if (!facetValues) {\n    return undefined;\n  }\n\n  var options = defaultsPure({}, opts, {\n    sortBy: SearchResults.DEFAULT_SORT,\n    // if no sortBy is given, attempt to sort based on facetOrdering\n    // if it is given, we still allow to sort via facet ordering first\n    facetOrdering: !(opts && opts.sortBy),\n  });\n\n  // eslint-disable-next-line consistent-this\n  var results = this;\n  var attributes;\n  if (Array.isArray(facetValues)) {\n    attributes = [attribute];\n  } else {\n    var config = results._state.getHierarchicalFacetByName(facetValues.name);\n    attributes = config.attributes;\n  }\n\n  return recSort(\n    function (data, facetName) {\n      if (options.facetOrdering) {\n        var facetOrdering = getFacetOrdering(results, facetName);\n        if (facetOrdering) {\n          return sortViaFacetOrdering(data, facetOrdering);\n        }\n      }\n\n      if (Array.isArray(options.sortBy)) {\n        var order = formatSort(options.sortBy, SearchResults.DEFAULT_SORT);\n        return orderBy(data, order[0], order[1]);\n      } else if (typeof options.sortBy === 'function') {\n        return vanillaSortFn(options.sortBy, data);\n      }\n      throw new Error(\n        'options.sortBy is optional but if defined it must be ' +\n          'either an array of string (predicates) or a sorting function'\n      );\n    },\n    facetValues,\n    attributes\n  );\n};\n\n/**\n * Returns the facet stats if attribute is defined and the facet contains some.\n * Otherwise returns undefined.\n * @param {string} attribute name of the faceted attribute\n * @return {object} The stats of the facet\n */\nSearchResults.prototype.getFacetStats = function (attribute) {\n  if (this._state.isConjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.facets, attribute);\n  } else if (this._state.isDisjunctiveFacet(attribute)) {\n    return getFacetStatsIfAvailable(this.disjunctiveFacets, attribute);\n  }\n\n  return undefined;\n};\n\n/**\n * @typedef {Object} FacetListItem\n * @property {string} name\n */\n\n/**\n * @param {FacetListItem[]} facetList (has more items, but enough for here)\n * @param {string} facetName The attribute to look for\n * @return {object|undefined} The stats of the facet\n */\nfunction getFacetStatsIfAvailable(facetList, facetName) {\n  var data = find(facetList, function (facet) {\n    return facet.name === facetName;\n  });\n  return data && data.stats;\n}\n\n/**\n * Returns all refinements for all filters + tags. It also provides\n * additional information: count and exhaustiveness for each filter.\n *\n * See the [refinement type](#Refinement) for an exhaustive view of the available\n * data.\n *\n * Note that for a numeric refinement, results are grouped per operator, this\n * means that it will return responses for operators which are empty.\n *\n * @return {Array.<Refinement>} all the refinements\n */\nSearchResults.prototype.getRefinements = function () {\n  var state = this._state;\n  // eslint-disable-next-line consistent-this\n  var results = this;\n  var res = [];\n\n  Object.keys(state.facetsRefinements).forEach(function (attributeName) {\n    state.facetsRefinements[attributeName].forEach(function (name) {\n      res.push(\n        getRefinement(state, 'facet', attributeName, name, results.facets)\n      );\n    });\n  });\n\n  Object.keys(state.facetsExcludes).forEach(function (attributeName) {\n    state.facetsExcludes[attributeName].forEach(function (name) {\n      res.push(\n        getRefinement(state, 'exclude', attributeName, name, results.facets)\n      );\n    });\n  });\n\n  Object.keys(state.disjunctiveFacetsRefinements).forEach(function (\n    attributeName\n  ) {\n    state.disjunctiveFacetsRefinements[attributeName].forEach(function (name) {\n      res.push(\n        getRefinement(\n          state,\n          'disjunctive',\n          attributeName,\n          name,\n          results.disjunctiveFacets\n        )\n      );\n    });\n  });\n\n  Object.keys(state.hierarchicalFacetsRefinements).forEach(function (\n    attributeName\n  ) {\n    state.hierarchicalFacetsRefinements[attributeName].forEach(function (name) {\n      res.push(\n        getHierarchicalRefinement(\n          state,\n          attributeName,\n          name,\n          results.hierarchicalFacets\n        )\n      );\n    });\n  });\n\n  Object.keys(state.numericRefinements).forEach(function (attributeName) {\n    var operators = state.numericRefinements[attributeName];\n    Object.keys(operators).forEach(function (operator) {\n      operators[operator].forEach(function (value) {\n        res.push({\n          type: 'numeric',\n          attributeName: attributeName,\n          name: value,\n          numericValue: value,\n          operator: operator,\n        });\n      });\n    });\n  });\n\n  state.tagRefinements.forEach(function (name) {\n    res.push({ type: 'tag', attributeName: '_tags', name: name });\n  });\n\n  return res;\n};\n\n/**\n * @typedef {Object} Facet\n * @property {string} name\n * @property {Object} data\n * @property {boolean} exhaustive\n */\n\n/**\n * @param {SearchParameters} state the current state\n * @param {string} type the type of the refinement\n * @param {string} attributeName The attribute of the facet\n * @param {*} name The name of the facet\n * @param {Facet[]} resultsFacets facets from the results\n * @return {Refinement} the refinement\n */\nfunction getRefinement(state, type, attributeName, name, resultsFacets) {\n  var facet = find(resultsFacets, function (f) {\n    return f.name === attributeName;\n  });\n  var count = facet && facet.data && facet.data[name] ? facet.data[name] : 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n\n  return {\n    type: type,\n    attributeName: attributeName,\n    name: name,\n    count: count,\n    exhaustive: exhaustive,\n  };\n}\n\n/**\n * @param {SearchParameters} state the current state\n * @param {string} attributeName the attribute of the hierarchical facet\n * @param {string} name the name of the facet\n * @param {Facet[]} resultsFacets facets from the results\n * @return {HierarchicalFacet} the hierarchical facet\n */\nfunction getHierarchicalRefinement(state, attributeName, name, resultsFacets) {\n  var facetDeclaration = state.getHierarchicalFacetByName(attributeName);\n  var separator = state._getHierarchicalFacetSeparator(facetDeclaration);\n  var split = name.split(separator);\n  var rootFacet = find(resultsFacets, function (facet) {\n    return facet.name === attributeName;\n  });\n\n  var facet = split.reduce(function (intermediateFacet, part) {\n    var newFacet =\n      intermediateFacet &&\n      find(intermediateFacet.data, function (f) {\n        return f.name === part;\n      });\n    return newFacet !== undefined ? newFacet : intermediateFacet;\n  }, rootFacet);\n\n  var count = (facet && facet.count) || 0;\n  var exhaustive = (facet && facet.exhaustive) || false;\n  var path = (facet && facet.path) || '';\n\n  return {\n    type: 'hierarchical',\n    attributeName: attributeName,\n    name: path,\n    count: count,\n    exhaustive: exhaustive,\n  };\n}\n\nmodule.exports = SearchResults;\n","'use strict';\n\nmodule.exports = generateTrees;\n\nvar fv = require('../functions/escapeFacetValue');\nvar find = require('../functions/find');\nvar prepareHierarchicalFacetSortBy = require('../functions/formatSort');\nvar orderBy = require('../functions/orderBy');\nvar escapeFacetValue = fv.escapeFacetValue;\nvar unescapeFacetValue = fv.unescapeFacetValue;\n\nfunction generateTrees(state) {\n  return function generate(hierarchicalFacetResult, hierarchicalFacetIndex) {\n    var hierarchicalFacet = state.hierarchicalFacets[hierarchicalFacetIndex];\n    var hierarchicalFacetRefinement =\n      (state.hierarchicalFacetsRefinements[hierarchicalFacet.name] &&\n        state.hierarchicalFacetsRefinements[hierarchicalFacet.name][0]) ||\n      '';\n    var hierarchicalSeparator =\n      state._getHierarchicalFacetSeparator(hierarchicalFacet);\n    var hierarchicalRootPath =\n      state._getHierarchicalRootPath(hierarchicalFacet);\n    var hierarchicalShowParentLevel =\n      state._getHierarchicalShowParentLevel(hierarchicalFacet);\n    var sortBy = prepareHierarchicalFacetSortBy(\n      state._getHierarchicalFacetSortBy(hierarchicalFacet)\n    );\n\n    var rootExhaustive = hierarchicalFacetResult.every(function (facetResult) {\n      return facetResult.exhaustive;\n    });\n\n    var generateTreeFn = generateHierarchicalTree(\n      sortBy,\n      hierarchicalSeparator,\n      hierarchicalRootPath,\n      hierarchicalShowParentLevel,\n      hierarchicalFacetRefinement\n    );\n\n    var results = hierarchicalFacetResult;\n\n    if (hierarchicalRootPath) {\n      results = hierarchicalFacetResult.slice(\n        hierarchicalRootPath.split(hierarchicalSeparator).length\n      );\n    }\n\n    return results.reduce(generateTreeFn, {\n      name: state.hierarchicalFacets[hierarchicalFacetIndex].name,\n      count: null, // root level, no count\n      isRefined: true, // root level, always refined\n      path: null, // root level, no path\n      escapedValue: null,\n      exhaustive: rootExhaustive,\n      data: null,\n    });\n  };\n}\n\nfunction generateHierarchicalTree(\n  sortBy,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel,\n  currentRefinement\n) {\n  return function generateTree(\n    hierarchicalTree,\n    hierarchicalFacetResult,\n    currentHierarchicalLevel\n  ) {\n    var parent = hierarchicalTree;\n\n    if (currentHierarchicalLevel > 0) {\n      var level = 0;\n\n      parent = hierarchicalTree;\n\n      while (level < currentHierarchicalLevel) {\n        /**\n         * @type {object[]]} hierarchical data\n         */\n        var data = parent && Array.isArray(parent.data) ? parent.data : [];\n        parent = find(data, function (subtree) {\n          return subtree.isRefined;\n        });\n        level++;\n      }\n    }\n\n    // we found a refined parent, let's add current level data under it\n    if (parent) {\n      // filter values in case an object has multiple categories:\n      //   {\n      //     categories: {\n      //       level0: ['beers', 'bières'],\n      //       level1: ['beers > IPA', 'bières > Belges']\n      //     }\n      //   }\n      //\n      // If parent refinement is `beers`, then we do not want to have `bières > Belges`\n      // showing up\n\n      var picked = Object.keys(hierarchicalFacetResult.data)\n        .map(function (facetValue) {\n          return [facetValue, hierarchicalFacetResult.data[facetValue]];\n        })\n        .filter(function (tuple) {\n          var facetValue = tuple[0];\n          return onlyMatchingTree(\n            facetValue,\n            parent.path || hierarchicalRootPath,\n            currentRefinement,\n            hierarchicalSeparator,\n            hierarchicalRootPath,\n            hierarchicalShowParentLevel\n          );\n        });\n\n      parent.data = orderBy(\n        picked.map(function (tuple) {\n          var facetValue = tuple[0];\n          var facetCount = tuple[1];\n\n          return format(\n            facetCount,\n            facetValue,\n            hierarchicalSeparator,\n            unescapeFacetValue(currentRefinement),\n            hierarchicalFacetResult.exhaustive\n          );\n        }),\n        sortBy[0],\n        sortBy[1]\n      );\n    }\n\n    return hierarchicalTree;\n  };\n}\n\n// eslint-disable-next-line max-params\nfunction onlyMatchingTree(\n  facetValue,\n  parentPath,\n  currentRefinement,\n  hierarchicalSeparator,\n  hierarchicalRootPath,\n  hierarchicalShowParentLevel\n) {\n  // we want the facetValue is a child of hierarchicalRootPath\n  if (\n    hierarchicalRootPath &&\n    (facetValue.indexOf(hierarchicalRootPath) !== 0 ||\n      hierarchicalRootPath === facetValue)\n  ) {\n    return false;\n  }\n\n  // we always want root levels (only when there is no prefix path)\n  return (\n    (!hierarchicalRootPath &&\n      facetValue.indexOf(hierarchicalSeparator) === -1) ||\n    // if there is a rootPath, being root level mean 1 level under rootPath\n    (hierarchicalRootPath &&\n      facetValue.split(hierarchicalSeparator).length -\n        hierarchicalRootPath.split(hierarchicalSeparator).length ===\n        1) ||\n    // if current refinement is a root level and current facetValue is a root level,\n    // keep the facetValue\n    (facetValue.indexOf(hierarchicalSeparator) === -1 &&\n      currentRefinement.indexOf(hierarchicalSeparator) === -1) ||\n    // currentRefinement is a child of the facet value\n    currentRefinement.indexOf(facetValue) === 0 ||\n    // facetValue is a child of the current parent, add it\n    (facetValue.indexOf(parentPath + hierarchicalSeparator) === 0 &&\n      (hierarchicalShowParentLevel ||\n        facetValue.indexOf(currentRefinement) === 0))\n  );\n}\n\nfunction format(\n  facetCount,\n  facetValue,\n  hierarchicalSeparator,\n  currentRefinement,\n  exhaustive\n) {\n  var parts = facetValue.split(hierarchicalSeparator);\n  return {\n    name: parts[parts.length - 1].trim(),\n    path: facetValue,\n    escapedValue: escapeFacetValue(facetValue),\n    count: facetCount,\n    isRefined:\n      currentRefinement === facetValue ||\n      currentRefinement.indexOf(facetValue + hierarchicalSeparator) === 0,\n    exhaustive: exhaustive,\n    data: null,\n  };\n}\n"],"names":["find","module","exports","sortBy","defaults","defaultInstructions","map","sort","split","reduce","out","sortInstruction","matchingDefault","defaultInstruction","length","push","obj","fn","thisArg","key","call","val","Array","isArray","AlgoliaSearchHelper","SearchParameters","SearchResults","algoliasearchHelper","client","index","opts","version","compareAscending","value","other","valIsDefined","undefined","valIsNull","othIsDefined","othIsNull","collection","iteratees","orders","result","criteria","iteratee","object","res","array","comparator","i","filter","Boolean","arr1","arr2","indexOf","defaultsPure","objectHasKeys","omit","lib","addRefinement","refinementList","attribute","isRefined","valueAsString","facetRefinement","concat","mod","removeRefinement","clearRefinement","v","f","toggleRefinement","Error","refinementType","hasChanged","newRefinementList","Object","keys","memo","values","facetList","refinementValue","containsRefinements","refinementValueAsString","source","excluded","target","sourceKeys","merge","sortObject","acc","curr","requestBuilder","_getQueries","state","queries","indexName","params","_getHitsSearchParams","getRefinedDisjunctiveFacets","forEach","refinedFacet","_getDisjunctiveFacetSearchParams","getRefinedHierarchicalFacets","hierarchicalFacet","getHierarchicalFacetByName","currentRefinement","getHierarchicalRefinement","separator","_getHierarchicalFacetSeparator","filtersMap","slice","segment","level","attributes","join","hasHierarchicalFacetFilter","some","filteredFacetFilters","facetFilters","facetFilter","filtered","filterValue","parent","facets","disjunctiveFacets","_getHitsHierarchicalFacetsAttributes","_getFacetFilters","numericFilters","_getNumericFilters","tagFilters","_getTagFilters","additionalParams","getQueryParams","facet","hierarchicalRootLevel","hitsPerPage","page","analytics","clickAnalytics","_getDisjunctiveHierarchicalFacetAttribute","facetName","numericRefinements","operators","operator","vs","tagRefinements","facetsRefinements","facetValue","facetsExcludes","disjunctiveFacetsRefinements","facetValues","orFilters","hierarchicalFacetsRefinements","attributeToRefine","attributesIndex","rootPath","_getHierarchicalRootPath","lastIndexOf","hierarchicalFacets","allAttributes","hierarchicalRefinement","name","newAttributes","rootLevel","attributeIndex","parentLevel","getSearchForFacetQuery","query","maxFacetHits","stateForSearchForFacetValues","isDisjunctiveFacet","clearRefinements","searchForFacetSearchParameters","facetQuery","e","t","r","defineProperty","enumerable","configurable","writable","getOwnPropertySymbols","n","getOwnPropertyDescriptor","apply","arguments","o","getOwnPropertyDescriptors","defineProperties","a","prototype","propertyIsEnumerable","Symbol","iterator","toString","u","next","done","return","TypeError","from","localStorage","window","JSON","parse","getItem","setItem","stringify","timeToLive","fromEntries","entries","timestamp","Date","getTime","get","miss","Promise","resolve","then","all","set","delete","clear","removeItem","caches","shift","catch","s","serializable","c","Math","floor","random","l","replace","encodeURIComponent","h","WithinQueryParameters","WithinHeaders","m","data","timeout","headers","queryParameters","cacheable","d","Read","Write","Any","p","g","y","status","lastUpdate","now","b","protocol","url","accept","O","P","q","getTimeout","statelessHosts","j","method","toLowerCase","userAgent","pop","message","transporterStackTrace","A","S","path","connectTimeout","timeouts","connect","responseTimeout","request","response","host","triesLeft","onSuccess","content","onRetry","isTimedOut","logger","info","x","hostsCache","onFail","requester","send","reverse","w","add","T","charAt","substr","N","appId","authMode","apiKey","requestsCache","responsesCache","hosts","read","mappedRequestOptions","transporter","reject","write","addAlgoliaAgent","clearCache","methods","C","E","J","requests","k","searchForFacetValues","F","I","queryLanguages","R","D","W","H","Q","threshold","L","XMLHttpRequest","open","setRequestHeader","setTimeout","abort","onreadystatechange","readyState","OPENED","clearTimeout","onerror","responseText","onload","debug","console","error","search","multipleQueries","multipleSearchForFacetValues","customRequest","initIndex","findAnswers","getRecommendations","userToken","test","forIn","hasOwn","hasOwnProperty","valToNumber","parseFloat","isObject","segs","joinChar","options","isValid","isValidObject","default","String","isString","splitChar","len","idx","prop","hasProp","isObjectOrArrayOrFunction","_merge","sourceVal","targetVal","isPlain","assign","id","pattern","createKey","char","isValidKey","orig","flat","arr","cur","union","args","unique","ele","flatten","first","EventEmitter","DerivedHelper","escapeFacetValue","inherits","this","setClient","make","lastResults","_queryId","_lastQueryIdReceived","derivedHelpers","_currentNbQueries","setCurrentPage","_change","setPage","isPageReset","getCurrentPage","_search","onlyWithDerivedHelpers","searchOnlyWithDerivedHelpers","getQuery","searchOnce","cb","tempState","setQueryParameters","self","emit","results","_originalResponse","err","warn","derivedHelper","derivedState","getModifiedState","attributesForPrediction","nbHits","errorMessage","userState","clientHasSFFV","clientHasInitIndex","isDisjunctive","algoliaQuery","searchForFacetValuesPromise","type","facetHits","escapedValue","isDisjunctiveFacetRefined","isFacetRefined","setQuery","resetPage","clearTags","addDisjunctiveFacetRefinement","addDisjunctiveRefine","addHierarchicalFacetRefinement","addNumericRefinement","addFacetRefinement","addRefine","addFacetExclusion","addExcludeRefinement","addExclude","addTag","tag","addTagRefinement","removeNumericRefinement","removeDisjunctiveFacetRefinement","removeDisjunctiveRefine","removeHierarchicalFacetRefinement","removeFacetRefinement","removeRefine","removeFacetExclusion","removeExcludeRefinement","removeExclude","removeTag","removeTagRefinement","toggleFacetExclusion","toggleExcludeFacetRefinement","toggleExclude","toggleFacetRefinement","toggleRefine","toggleTag","toggleTagRefinement","nextPage","previousPage","setIndex","setQueryParameter","parameter","setState","newState","overrideStateWithoutTriggeringChangeEvent","hasRefinements","getNumericRefinements","isConjunctiveFacet","isHierarchicalFacet","isHierarchicalFacetRefined","isExcluded","isExcludeRefined","isDisjunctiveRefined","hasTag","isTagRefined","hasTagRefinements","getIndex","getPage","getTags","getRefinements","refinements","getConjunctiveRefinements","getExcludeRefinements","getDisjunctiveRefinements","getNumericRefinement","getHierarchicalFacetBreadcrumb","states","mainQueries","queriesCount","helper","derivedQueries","derivedStateQueries","queryId","_dispatchAlgoliaResponse","bind","_dispatchAlgoliaError","specificResults","splice","containsRefinement","_hasDisjunctiveRefinements","disjunctiveRefinements","event","newClient","getClient","derive","detachDerivedHelper","pos","hasPendingRequests","_events","_maxListeners","isFunction","arg","isUndefined","defaultMaxListeners","setMaxListeners","isNaN","er","handler","listeners","context","addListener","listener","newListener","warned","trace","on","once","fired","removeListener","list","position","removeAllListeners","listenerCount","evlistener","emitter","ctorName","constructor","isBuffer","callee","isArguments","toDateString","getDate","setDate","isDate","stackTraceLimit","isError","RegExp","flags","ignoreCase","multiline","global","isRegexp","throw","isGeneratorObj","instantSearchContext","createContext","onInternalStateUpdate","createHrefForState","onSearchForFacetValues","onSearchStateChange","onSearchParameters","store","widgetsManager","mainTargetedIndex","InstantSearchConsumer","Consumer","InstantSearchProvider","Provider","_createContext","IndexConsumer","_typeof","shallowEqual","objA","objB","keysA","keysB","resolved","removeEmptyKey","isPlainObject","createWidgetsManager","onWidgetsUpdate","widgets","scheduled","scheduleUpdate","registerWidget","widget","update","getWidgets","HIGHLIGHT_TAGS","highlightPreTag","highlightPostTag","parseHighlightedAttribute","_ref","preTag","postTag","_ref$highlightedValue","highlightedValue","splitByPreTag","firstValue","elements","isHighlighted","splitByPostTag","parseAlgoliaHit","_ref2","_ref2$preTag","_ref2$postTag","highlightProperty","hit","highlightObject","current","item","enumerableOnly","symbols","sym","input","hint","prim","toPrimitive","Number","getIndexId","hasMultipleIndices","multiIndexContext","targetedIndex","ais","refineValue","searchState","nextRefinement","namespace","indexId","_objectSpread4","indices","refineMultiIndexWithNamespace","refineMultiIndex","refineSingleIndexWithNamespace","refineSingleIndex","getNamespaceAndAttributeName","parts","match","attributeName","getCurrentRefinementValue","props","defaultValue","_getNamespaceAndAttri","multiIndex","hasRefinementsValue","defaultRefinement","cleanUpValue","_getNamespaceAndAttri2","_ref4","indexSearchState","cleanUpValueWithMultiIndex","_ref3","cleanUpValueWithSingleIndex","_excluded","_excluded2","_excluded3","_objectWithoutProperties","_objectWithoutPropertiesLoose","sourceSymbolKeys","addAlgoliaAgents","searchClient","isMultiIndexContext","contextValue","indexContextValue","isTargetedIndexEqualIndex","isIndexWidget","isIndexWidgetEqualIndex","sortIndexWidgetsFirst","firstWidget","secondWidget","isFirstWidgetIndex","isSecondWidgetIndex","serializeQueryParameters","parameters","format","_len","_key","encode","createInstantSearchManager","_ref$initialState","initialState","resultsState","stalledSearchDelay","stalledSearchTimer","_store$getState","getState","partialState","resultsFacetValues","isSearchStalled","handleSearchSuccess","handleSearchError","searchCounter","skip","initialSearchParameters","metadata","getMetadata","searching","_cacheHydrated","_useCache","baseMethod","_len2","methodArgs","_key2","requestsWithSerializedParams","rawResults","cache","hydrateSearchClientWithMultiIndexRequest","hydrateSearchClientWithSingleIndexRequest","hydrateSearchClient","nextState","subscribe","createStore","hydrateMetadata","_internalIndexId","hydrateResultsState","searchingForFacetValues","getSearchParameters","sharedParameters","mainParameters","targetedIndexEqualMainIndex","subIndexEqualMainIndex","derivedIndices","targetedIndexNotEqualMainIndex","subIndexNotEqualMainIndex","derivedParameters","_getSearchParameters","detach","isDerivedHelpersEmpty","getFacetByName","currentState","nextIsSearchStalled","getWidgetsIds","meta","_ref5","_ref5$maxFacetHits","maxFacetHitsWithinRange","max","min","_objectSpread7","onExternalStateUpdate","nextSearchState","transitionState","updateClient","updateIndex","newIndex","skipSearch","datum","items","nestedItem","injectMetadata","payloadContainer","document","createElement","refNode","querySelector","payload","internalProps","widgetsPayload","_connectorDesc","_ref2$defaultProps","defaultProps","_ref2$displayName","displayName","$$type","$$widgetType","includes","ua","_ua","getMetadataPayload","appendChild","_defineProperties","descriptor","_setPrototypeOf","setPrototypeOf","__proto__","_createSuper","Derived","hasNativeReflectConstruct","Reflect","construct","sham","Proxy","valueOf","_isNativeReflectConstruct","Super","_getPrototypeOf","NewTarget","_assertThisInitialized","_possibleConstructorReturn","ReferenceError","getPrototypeOf","isControlled","InstantSearch","_Component","subClass","superClass","create","_inherits","Constructor","protoProps","staticProps","_super","_this","instance","_classCallCheck","instantSearchManager","onWidgetsInternalStateUpdate","nextProps","prevState","nextIsControlled","previousSearchState","prevProps","prevIsControlled","refresh","cleanupTimerRef","navigator","_this2","isUnmounting","createURL","getKnownKeys","_searchState","widgetsCollector","_searchState2","Children","count","children","Component","isRequired","_extends","createConnectorWithoutContext","connectorDesc","isWidget","Composed","additionalWidgetProperties","Connector","providedProps","getProvidedProps","refine","_len3","_key3","unsubscribe","unregisterWidget","shouldComponentUpdate","propsEqual","_this3","cleanUp","_this$props$contextVa","searchResults","searchParameters","nextWidgetsState","prevWidgetsState","_this$props","refineProps","searchForFacetValuesProps","searchForItems","propTypes","createConnector","prevSearchState","propKeys","nonPresentKeys","_props","subState","configureState","getCurrentRefinement","_refine","_cleanUp","label","useDebounce","delay","debouncedValue","setDebouncedValue","useState","useEffect","connectSearchBox","focus","handleFocus","handleClose","rest","searchTerm","setSearchTerm","debouncedSearchTerm","searchCharacters","useCallback","___EmotionJSX","React","SearchInput","onFocus","onChange","onKeyDown","keyCode","currentTarget","blur","isLoaded","highlight","_ref$preTag","_ref$postTag","createClassNames","block","prefix","suitElements","element","baseClassName","Highlight","cx","highlightedTagName","nonHighlightedTagName","TagName","className","Highlighter","tagName","parsedHighlightedValue","isLast","connectHighlight","hits","getResults","allSearchResults","hostname","location","fill","AlgoliaLogo","viewBox","width","height","PoweredBy","translate","href","rel","defaultTranslations","searchBy","Translatable","translations","translation","propName","componentName","_i","_Object$keys","connectPoweredBy","useScrollDisabler","useLayoutEffect","originalStyle","getComputedStyle","body","overflow","style","ConnectedHits","connectStateResults","Spinner","strokeWidth","duration","sx","styles","spinner","hitsByCategory","groupArray","Box","variant","hitGroup","Heading","node","_objectSpread","objectID","title","excerpt","Snippet","Card","omitCategory","omitFooter","omitMedia","Results","resultsWrapper","hitsWrapper","poweredBy","Overlay","onClick","overlay","close","IconButton","FaTimes","esc","isFocused","setFocus","algoliaClient","algoliasearch","process","shouldSearch","Configure","distinct","SearchBox","isObjectObject","ctor","prot","mainHelper","main","superCtor","reduceRight","intersection","isValidUserToken","RefinementList","isEqualNumericRefinement","every","el","newParameters","_parseNumbers","paramName","isKeyKnown","PARAMETERS","isValueDefined","numbers","parsedValue","insideBoundingBox","geoRect","parsedValues","vPrime","toggleHierarchicalFacetRefinement","validate","patch","_clearNumericRefinements","newQuery","newPage","setFacets","setDisjunctiveFacets","setHitsPerPage","setTypoTolerance","typoTolerance","isNumericRefined","number","paramValue","op","newNumericRefinements","operatorList","outValues","addFacet","addDisjunctiveFacet","addHierarchicalFacet","modification","removeFacet","removeDisjunctiveFacet","removeHierarchicalFacet","toggleConjunctiveFacetRefinement","toggleDisjunctiveFacetRefinement","isOperatorDefined","searchedValue","isAttributeValueDefined","currentValue","disjunctiveNumericRefinedFacets","getUnrefinedDisjunctiveFacets","refinedFacets","managedParameters","queryParams","nextWithNumbers","previousPlainObject","nextPlainObject","previous","isPreviousValueDefined","isNextValueDefined","_getHierarchicalFacetSortBy","_getHierarchicalShowParentLevel","showParentLevel","hierarchicalFacetName","refinement","part","trim","forOwn","typeOf","groupBy","groups","escape","eachValue","toGroup","str","strict","keepEscaping","keepDoubleQuotes","keepSingleQuotes","ast","nodes","stash","stack","string","bos","eos","prev","quotes","openers","brackets","closers","inverted","invert","keep","append","closeIndex","startIdx","column","SyntaxError","unescapeFacetValue","compact","fv","findIndex","formatSort","orderBy","generateHierarchicalTree","getIndices","assignFacetStats","dest","facetStats","stats","mainSubResponse","_rawResults","processingTimeMS","sum","facetsIndices","disjunctiveFacetsIndices","nextDisjunctiveResult","mainFacets","facetKey","hierarchicalAttributeName","facetValueObject","facetIndex","idxAttributeName","exhaustive","exhaustiveFacetsCount","isFacetDisjunctive","isFacetConjunctive","facets_stats","disjunctiveFacet","dfacet","facetResults","dataFromMainRequest","defaultData","root","excludes","_state","extractNormalizedFacetValues","predicate","hierarchicalFacetValues","currentRefinementSplit","unshift","setIsRefined","depth","child","recSort","sortFn","names","childNode","sortedChildren","getFacetStatsIfAvailable","getRefinement","resultsFacets","DEFAULT_SORT","getFacetValues","facetOrdering","renderingContent","getFacetOrdering","orderedFacets","remainingFacets","reverseOrder","order","ordering","sortRemainingBy","sortViaFacetOrdering","vanillaSortFn","getFacetStats","facetDeclaration","rootFacet","intermediateFacet","newFacet","numericValue","hierarchicalFacetResult","hierarchicalFacetIndex","hierarchicalFacetRefinement","hierarchicalSeparator","hierarchicalRootPath","hierarchicalShowParentLevel","prepareHierarchicalFacetSortBy","rootExhaustive","facetResult","generateTreeFn","hierarchicalTree","currentHierarchicalLevel","subtree","picked","tuple","parentPath","onlyMatchingTree","facetCount"],"sourceRoot":""}